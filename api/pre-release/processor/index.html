
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A CLI tool that generates optimized markdown docs and streamline Git workflows">
      
      
        <meta name="author" content="Sarthak Mishra">
      
      
        <link rel="canonical" href="https://codemap.run/api/pre-release/processor/">
      
      
        <link rel="prev" href="../llm/utils/">
      
      
        <link rel="next" href="lod/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Processor Overview - Codemap</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Geist:300,300i,400,400i,700,700i%7CGeist+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Geist";--md-code-font:"Geist Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#processor-overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Codemap" class="md-header__button md-logo" aria-label="Codemap" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Codemap
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Processor Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/SarthakMishra/codemap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    SarthakMishra/codemap
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Codemap" class="md-nav__button md-logo" aria-label="Codemap" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Codemap
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SarthakMishra/codemap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    SarthakMishra/codemap
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../usage/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/generate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generate Docs (`gen`)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/commit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Smart Commit (`commit`)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/pr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pull Requests (`pr`)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/llm-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLM Support
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../contributing/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing Guidelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/code-of-conduct/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code of Conduct
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../acknowledgements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Acknowledgements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6" id="__nav_1_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Stable
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2" id="__nav_1_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2">
            <span class="md-nav__icon md-icon"></span>
            Stable
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/cli/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Cli
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_2" id="__nav_1_6_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_2">
            <span class="md-nav__icon md-icon"></span>
            Cli
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/cli/ask_cmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ask Cmd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/cli/commit_cmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commit Cmd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/cli/gen_cmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gen Cmd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/cli/index_cmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index Cmd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/cli/pr_cmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pr Cmd
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/db/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Db
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_4" id="__nav_1_6_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_4">
            <span class="md-nav__icon md-icon"></span>
            Db
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/db/client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/db/engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Engine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/db/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/gen/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Gen
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_5" id="__nav_1_6_2_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_5">
            <span class="md-nav__icon md-icon"></span>
            Gen
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/gen/command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/gen/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/gen/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/gen/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/git/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Git
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_6" id="__nav_1_6_2_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_6">
            <span class="md-nav__icon md-icon"></span>
            Git
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_6_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/git/commit_generator/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Commit Generator
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_6_2" id="__nav_1_6_2_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_2_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_6_2">
            <span class="md-nav__icon md-icon"></span>
            Commit Generator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/commit_generator/command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/commit_generator/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/commit_generator/prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/commit_generator/schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schemas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/commit_generator/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_6_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/git/commit_linter/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Commit Linter
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_6_3" id="__nav_1_6_2_6_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_2_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_6_3">
            <span class="md-nav__icon md-icon"></span>
            Commit Linter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/commit_linter/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/commit_linter/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/commit_linter/linter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/commit_linter/parser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/commit_linter/validators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validators
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_6_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/git/diff_splitter/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Diff Splitter
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_6_4" id="__nav_1_6_2_6_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_2_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_6_4">
            <span class="md-nav__icon md-icon"></span>
            Diff Splitter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/diff_splitter/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/diff_splitter/schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schemas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/diff_splitter/splitter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Splitter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/diff_splitter/strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/diff_splitter/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/interactive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interactive
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_6_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/git/pr_generator/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Pr Generator
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_6_6" id="__nav_1_6_2_6_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_2_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_6_6">
            <span class="md-nav__icon md-icon"></span>
            Pr Generator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/pr_generator/command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/pr_generator/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/pr_generator/decorators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Decorators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/pr_generator/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/pr_generator/prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/pr_generator/schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schemas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/pr_generator/strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/pr_generator/templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/pr_generator/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_6_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/git/semantic_grouping/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Semantic Grouping
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_6_7" id="__nav_1_6_2_6_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_2_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_6_7">
            <span class="md-nav__icon md-icon"></span>
            Semantic Grouping
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/semantic_grouping/batch_processor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Batch Processor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/semantic_grouping/clusterer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clusterer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/semantic_grouping/context_processor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context Processor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/semantic_grouping/embedder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Embedder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/semantic_grouping/group/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Group
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/semantic_grouping/resolver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resolver
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/git/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/llm/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Llm
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_7" id="__nav_1_6_2_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_7">
            <span class="md-nav__icon md-icon"></span>
            Llm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/llm/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Api
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/llm/client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/llm/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/llm/errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Errors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_7_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/llm/rag/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Rag
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_7_6" id="__nav_1_6_2_7_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_2_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_7_6">
            <span class="md-nav__icon md-icon"></span>
            Rag
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/llm/rag/command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/llm/rag/formatter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Formatter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/llm/rag/prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompts
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/llm/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/processor/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Processor
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_8" id="__nav_1_6_2_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_8">
            <span class="md-nav__icon md-icon"></span>
            Processor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/lod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pipeline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_8_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/processor/tree_sitter/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tree Sitter
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_8_4" id="__nav_1_6_2_8_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_2_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_8_4">
            <span class="md-nav__icon md-icon"></span>
            Tree Sitter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/tree_sitter/analyzer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Analyzer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/tree_sitter/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_8_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/processor/tree_sitter/languages/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Languages
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_8_4_4" id="__nav_1_6_2_8_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_6_2_8_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_8_4_4">
            <span class="md-nav__icon md-icon"></span>
            Languages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/tree_sitter/languages/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/tree_sitter/languages/javascript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Javascript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/tree_sitter/languages/python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/tree_sitter/languages/typescript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Typescript
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_8_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/processor/utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_8_5" id="__nav_1_6_2_8_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_2_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_8_5">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/utils/embedding_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Embedding Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/utils/git_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/utils/sync_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sync Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_8_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/processor/vector/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Vector
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_8_6" id="__nav_1_6_2_8_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_2_8_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_8_6">
            <span class="md-nav__icon md-icon"></span>
            Vector
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/vector/chunking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chunking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/vector/qdrant_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qdrant Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/processor/vector/synchronizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Synchronizer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_9" id="__nav_1_6_2_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_9">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/utils/cli_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cli Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/utils/config_loader/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config Loader
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/utils/docker_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/utils/file_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/utils/log_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Log Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/utils/path_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Path Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../stable/watcher/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Watcher
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_2_10" id="__nav_1_6_2_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2_10">
            <span class="md-nav__icon md-icon"></span>
            Watcher
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stable/watcher/file_watcher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File Watcher
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Pre-release
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3" id="__nav_1_6_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_6_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_6_3">
            <span class="md-nav__icon md-icon"></span>
            Pre-release
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../cli/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Cli
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_2" id="__nav_1_6_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_2">
            <span class="md-nav__icon md-icon"></span>
            Cli
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/ask_cmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ask Cmd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/commit_cmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commit Cmd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/gen_cmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gen Cmd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/index_cmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Index Cmd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/pr_cmd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pr Cmd
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../db/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Db
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_4" id="__nav_1_6_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_4">
            <span class="md-nav__icon md-icon"></span>
            Db
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../db/client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../db/engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Engine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../db/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../gen/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Gen
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_5" id="__nav_1_6_3_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_5">
            <span class="md-nav__icon md-icon"></span>
            Gen
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gen/command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gen/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gen/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gen/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../git/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Git
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_6" id="__nav_1_6_3_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_6">
            <span class="md-nav__icon md-icon"></span>
            Git
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_6_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../git/commit_generator/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Commit Generator
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_6_2" id="__nav_1_6_3_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_3_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_6_2">
            <span class="md-nav__icon md-icon"></span>
            Commit Generator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/commit_generator/command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/commit_generator/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/commit_generator/prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/commit_generator/schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schemas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/commit_generator/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_6_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../git/commit_linter/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Commit Linter
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_6_3" id="__nav_1_6_3_6_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_3_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_6_3">
            <span class="md-nav__icon md-icon"></span>
            Commit Linter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/commit_linter/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/commit_linter/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/commit_linter/linter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/commit_linter/parser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/commit_linter/validators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validators
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_6_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../git/diff_splitter/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Diff Splitter
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_6_4" id="__nav_1_6_3_6_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_3_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_6_4">
            <span class="md-nav__icon md-icon"></span>
            Diff Splitter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/diff_splitter/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/diff_splitter/schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schemas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/diff_splitter/splitter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Splitter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/diff_splitter/strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/diff_splitter/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/interactive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interactive
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_6_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../git/pr_generator/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Pr Generator
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_6_6" id="__nav_1_6_3_6_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_3_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_6_6">
            <span class="md-nav__icon md-icon"></span>
            Pr Generator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/pr_generator/command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/pr_generator/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/pr_generator/decorators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Decorators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/pr_generator/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/pr_generator/prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/pr_generator/schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schemas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/pr_generator/strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/pr_generator/templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/pr_generator/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_6_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../git/semantic_grouping/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Semantic Grouping
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_6_7" id="__nav_1_6_3_6_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_3_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_6_7">
            <span class="md-nav__icon md-icon"></span>
            Semantic Grouping
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/semantic_grouping/batch_processor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Batch Processor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/semantic_grouping/clusterer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clusterer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/semantic_grouping/context_processor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context Processor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/semantic_grouping/embedder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Embedder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/semantic_grouping/group/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Group
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/semantic_grouping/resolver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resolver
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../llm/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Llm
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_7" id="__nav_1_6_3_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_7">
            <span class="md-nav__icon md-icon"></span>
            Llm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Api
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm/client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm/errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Errors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_7_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../llm/rag/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Rag
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_7_6" id="__nav_1_6_3_7_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_3_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_7_6">
            <span class="md-nav__icon md-icon"></span>
            Rag
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm/rag/command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm/rag/formatter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Formatter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm/rag/prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompts
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_8" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  
  <span class="md-ellipsis">
    Processor
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_1_6_3_8" id="__nav_1_6_3_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_3_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_6_3_8">
            <span class="md-nav__icon md-icon"></span>
            Processor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="lod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pipeline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_8_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="tree_sitter/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tree Sitter
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_8_4" id="__nav_1_6_3_8_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_3_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_8_4">
            <span class="md-nav__icon md-icon"></span>
            Tree Sitter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tree_sitter/analyzer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Analyzer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tree_sitter/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_8_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="tree_sitter/languages/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Languages
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_8_4_4" id="__nav_1_6_3_8_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_6_3_8_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_8_4_4">
            <span class="md-nav__icon md-icon"></span>
            Languages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tree_sitter/languages/base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tree_sitter/languages/javascript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Javascript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tree_sitter/languages/python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tree_sitter/languages/typescript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Typescript
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_8_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_8_5" id="__nav_1_6_3_8_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_3_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_8_5">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="utils/embedding_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Embedding Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="utils/git_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="utils/sync_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sync Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_8_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="vector/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Vector
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_8_6" id="__nav_1_6_3_8_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_6_3_8_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_8_6">
            <span class="md-nav__icon md-icon"></span>
            Vector
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vector/chunking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chunking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vector/qdrant_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Qdrant Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="vector/synchronizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Synchronizer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../utils/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_9" id="__nav_1_6_3_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_9">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/cli_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cli Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/config_loader/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config Loader
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/docker_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/file_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File Utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/log_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Log Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/path_utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Path Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../watcher/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Watcher
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1_6_3_10" id="__nav_1_6_3_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_6_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_3_10">
            <span class="md-nav__icon md-icon"></span>
            Watcher
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../watcher/file_watcher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File Watcher
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#codemap.processor" class="md-nav__link">
    <span class="md-ellipsis">
      processor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity" class="md-nav__link">
    <span class="md-ellipsis">
      LODEntity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LODEntity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity.entity_type" class="md-nav__link">
    <span class="md-ellipsis">
      entity_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity.start_line" class="md-nav__link">
    <span class="md-ellipsis">
      start_line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity.end_line" class="md-nav__link">
    <span class="md-ellipsis">
      end_line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity.docstring" class="md-nav__link">
    <span class="md-ellipsis">
      docstring
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity.signature" class="md-nav__link">
    <span class="md-ellipsis">
      signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity.content" class="md-nav__link">
    <span class="md-ellipsis">
      content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity.children" class="md-nav__link">
    <span class="md-ellipsis">
      children
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity.language" class="md-nav__link">
    <span class="md-ellipsis">
      language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity.metadata" class="md-nav__link">
    <span class="md-ellipsis">
      metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODEntity.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codemap.processor.LODGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      LODGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LODGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODGenerator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODGenerator.analyzer" class="md-nav__link">
    <span class="md-ellipsis">
      analyzer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODGenerator.generate_lod" class="md-nav__link">
    <span class="md-ellipsis">
      generate_lod
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codemap.processor.LODLevel" class="md-nav__link">
    <span class="md-ellipsis">
      LODLevel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LODLevel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODLevel.SIGNATURES" class="md-nav__link">
    <span class="md-ellipsis">
      SIGNATURES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODLevel.STRUCTURE" class="md-nav__link">
    <span class="md-ellipsis">
      STRUCTURE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODLevel.DOCS" class="md-nav__link">
    <span class="md-ellipsis">
      DOCS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.LODLevel.FULL" class="md-nav__link">
    <span class="md-ellipsis">
      FULL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline" class="md-nav__link">
    <span class="md-ellipsis">
      ProcessingPipeline
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ProcessingPipeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.repo_path" class="md-nav__link">
    <span class="md-ellipsis">
      repo_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.config_loader" class="md-nav__link">
    <span class="md-ellipsis">
      config_loader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.config" class="md-nav__link">
    <span class="md-ellipsis">
      config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.analyzer" class="md-nav__link">
    <span class="md-ellipsis">
      analyzer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.chunker" class="md-nav__link">
    <span class="md-ellipsis">
      chunker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.db_client" class="md-nav__link">
    <span class="md-ellipsis">
      db_client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.embedding_model_name" class="md-nav__link">
    <span class="md-ellipsis">
      embedding_model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.qdrant_manager" class="md-nav__link">
    <span class="md-ellipsis">
      qdrant_manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.vector_synchronizer" class="md-nav__link">
    <span class="md-ellipsis">
      vector_synchronizer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.is_async_initialized" class="md-nav__link">
    <span class="md-ellipsis">
      is_async_initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.watcher" class="md-nav__link">
    <span class="md-ellipsis">
      watcher
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.async_init" class="md-nav__link">
    <span class="md-ellipsis">
      async_init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.stop" class="md-nav__link">
    <span class="md-ellipsis">
      stop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.sync_databases" class="md-nav__link">
    <span class="md-ellipsis">
      sync_databases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.initialize_watcher" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_watcher
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.start_watcher" class="md-nav__link">
    <span class="md-ellipsis">
      start_watcher
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.semantic_search" class="md-nav__link">
    <span class="md-ellipsis">
      semantic_search
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.__aenter__" class="md-nav__link">
    <span class="md-ellipsis">
      __aenter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.ProcessingPipeline.__aexit__" class="md-nav__link">
    <span class="md-ellipsis">
      __aexit__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codemap.processor.lod" class="md-nav__link">
    <span class="md-ellipsis">
      lod
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lod">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODLevel" class="md-nav__link">
    <span class="md-ellipsis">
      LODLevel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LODLevel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODLevel.SIGNATURES" class="md-nav__link">
    <span class="md-ellipsis">
      SIGNATURES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODLevel.STRUCTURE" class="md-nav__link">
    <span class="md-ellipsis">
      STRUCTURE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODLevel.DOCS" class="md-nav__link">
    <span class="md-ellipsis">
      DOCS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODLevel.FULL" class="md-nav__link">
    <span class="md-ellipsis">
      FULL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity" class="md-nav__link">
    <span class="md-ellipsis">
      LODEntity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LODEntity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity.name" class="md-nav__link">
    <span class="md-ellipsis">
      name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity.entity_type" class="md-nav__link">
    <span class="md-ellipsis">
      entity_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity.start_line" class="md-nav__link">
    <span class="md-ellipsis">
      start_line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity.end_line" class="md-nav__link">
    <span class="md-ellipsis">
      end_line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity.docstring" class="md-nav__link">
    <span class="md-ellipsis">
      docstring
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity.signature" class="md-nav__link">
    <span class="md-ellipsis">
      signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity.content" class="md-nav__link">
    <span class="md-ellipsis">
      content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity.children" class="md-nav__link">
    <span class="md-ellipsis">
      children
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity.language" class="md-nav__link">
    <span class="md-ellipsis">
      language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODEntity.metadata" class="md-nav__link">
    <span class="md-ellipsis">
      metadata
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      LODGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LODGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODGenerator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODGenerator.analyzer" class="md-nav__link">
    <span class="md-ellipsis">
      analyzer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.lod.LODGenerator.generate_lod" class="md-nav__link">
    <span class="md-ellipsis">
      generate_lod
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codemap.processor.pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      pipeline
    </span>
  </a>
  
    <nav class="md-nav" aria-label="pipeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline" class="md-nav__link">
    <span class="md-ellipsis">
      ProcessingPipeline
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ProcessingPipeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.repo_path" class="md-nav__link">
    <span class="md-ellipsis">
      repo_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.config_loader" class="md-nav__link">
    <span class="md-ellipsis">
      config_loader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.config" class="md-nav__link">
    <span class="md-ellipsis">
      config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.analyzer" class="md-nav__link">
    <span class="md-ellipsis">
      analyzer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.chunker" class="md-nav__link">
    <span class="md-ellipsis">
      chunker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.db_client" class="md-nav__link">
    <span class="md-ellipsis">
      db_client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.embedding_model_name" class="md-nav__link">
    <span class="md-ellipsis">
      embedding_model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.qdrant_manager" class="md-nav__link">
    <span class="md-ellipsis">
      qdrant_manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.vector_synchronizer" class="md-nav__link">
    <span class="md-ellipsis">
      vector_synchronizer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.is_async_initialized" class="md-nav__link">
    <span class="md-ellipsis">
      is_async_initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.watcher" class="md-nav__link">
    <span class="md-ellipsis">
      watcher
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.async_init" class="md-nav__link">
    <span class="md-ellipsis">
      async_init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.stop" class="md-nav__link">
    <span class="md-ellipsis">
      stop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.sync_databases" class="md-nav__link">
    <span class="md-ellipsis">
      sync_databases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.initialize_watcher" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_watcher
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.start_watcher" class="md-nav__link">
    <span class="md-ellipsis">
      start_watcher
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.semantic_search" class="md-nav__link">
    <span class="md-ellipsis">
      semantic_search
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.__aenter__" class="md-nav__link">
    <span class="md-ellipsis">
      __aenter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.pipeline.ProcessingPipeline.__aexit__" class="md-nav__link">
    <span class="md-ellipsis">
      __aexit__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codemap.processor.utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.git_utils" class="md-nav__link">
    <span class="md-ellipsis">
      git_utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="git_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.git_utils.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.git_utils.MIN_GIT_LS_FILES_PARTS" class="md-nav__link">
    <span class="md-ellipsis">
      MIN_GIT_LS_FILES_PARTS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.git_utils.SHA1_HASH_LENGTH" class="md-nav__link">
    <span class="md-ellipsis">
      SHA1_HASH_LENGTH
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.git_utils.get_git_tracked_files" class="md-nav__link">
    <span class="md-ellipsis">
      get_git_tracked_files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.git_utils.get_file_git_hash" class="md-nav__link">
    <span class="md-ellipsis">
      get_file_git_hash
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.embedding_utils" class="md-nav__link">
    <span class="md-ellipsis">
      embedding_utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="embedding_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.embedding_utils.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.embedding_utils.get_retry_settings" class="md-nav__link">
    <span class="md-ellipsis">
      get_retry_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.embedding_utils.generate_embeddings_batch" class="md-nav__link">
    <span class="md-ellipsis">
      generate_embeddings_batch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.embedding_utils.generate_embedding" class="md-nav__link">
    <span class="md-ellipsis">
      generate_embedding
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.sync_utils" class="md-nav__link">
    <span class="md-ellipsis">
      sync_utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sync_utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.sync_utils.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.utils.sync_utils.compare_states" class="md-nav__link">
    <span class="md-ellipsis">
      compare_states
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codemap.processor.vector" class="md-nav__link">
    <span class="md-ellipsis">
      vector
    </span>
  </a>
  
    <nav class="md-nav" aria-label="vector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer" class="md-nav__link">
    <span class="md-ellipsis">
      synchronizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="synchronizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.DEFAULT_VOYAGE_TOKEN_LIMIT" class="md-nav__link">
    <span class="md-ellipsis">
      DEFAULT_VOYAGE_TOKEN_LIMIT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer" class="md-nav__link">
    <span class="md-ellipsis">
      VectorSynchronizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VectorSynchronizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.repo_path" class="md-nav__link">
    <span class="md-ellipsis">
      repo_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.qdrant_manager" class="md-nav__link">
    <span class="md-ellipsis">
      qdrant_manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.chunker" class="md-nav__link">
    <span class="md-ellipsis">
      chunker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.embedding_model_name" class="md-nav__link">
    <span class="md-ellipsis">
      embedding_model_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.analyzer" class="md-nav__link">
    <span class="md-ellipsis">
      analyzer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.config_loader" class="md-nav__link">
    <span class="md-ellipsis">
      config_loader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.batch_size" class="md-nav__link">
    <span class="md-ellipsis">
      batch_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.qdrant_batch_size" class="md-nav__link">
    <span class="md-ellipsis">
      qdrant_batch_size
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.voyage_token_limit" class="md-nav__link">
    <span class="md-ellipsis">
      voyage_token_limit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.voyage_client" class="md-nav__link">
    <span class="md-ellipsis">
      voyage_client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.synchronizer.VectorSynchronizer.sync_index" class="md-nav__link">
    <span class="md-ellipsis">
      sync_index
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking" class="md-nav__link">
    <span class="md-ellipsis">
      chunking
    </span>
  </a>
  
    <nav class="md-nav" aria-label="chunking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.ChunkMetadata" class="md-nav__link">
    <span class="md-ellipsis">
      ChunkMetadata
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ChunkMetadata">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.ChunkMetadata.chunk_id" class="md-nav__link">
    <span class="md-ellipsis">
      chunk_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.ChunkMetadata.file_path" class="md-nav__link">
    <span class="md-ellipsis">
      file_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.ChunkMetadata.start_line" class="md-nav__link">
    <span class="md-ellipsis">
      start_line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.ChunkMetadata.end_line" class="md-nav__link">
    <span class="md-ellipsis">
      end_line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.ChunkMetadata.entity_type" class="md-nav__link">
    <span class="md-ellipsis">
      entity_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.ChunkMetadata.entity_name" class="md-nav__link">
    <span class="md-ellipsis">
      entity_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.ChunkMetadata.language" class="md-nav__link">
    <span class="md-ellipsis">
      language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.ChunkMetadata.git_hash" class="md-nav__link">
    <span class="md-ellipsis">
      git_hash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.ChunkMetadata.hierarchy_path" class="md-nav__link">
    <span class="md-ellipsis">
      hierarchy_path
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.CodeChunk" class="md-nav__link">
    <span class="md-ellipsis">
      CodeChunk
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CodeChunk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.CodeChunk.content" class="md-nav__link">
    <span class="md-ellipsis">
      content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.CodeChunk.metadata" class="md-nav__link">
    <span class="md-ellipsis">
      metadata
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.TreeSitterChunker" class="md-nav__link">
    <span class="md-ellipsis">
      TreeSitterChunker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TreeSitterChunker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.TreeSitterChunker.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.TreeSitterChunker.lod_generator" class="md-nav__link">
    <span class="md-ellipsis">
      lod_generator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.TreeSitterChunker.config_loader" class="md-nav__link">
    <span class="md-ellipsis">
      config_loader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.TreeSitterChunker.max_hierarchy_depth" class="md-nav__link">
    <span class="md-ellipsis">
      max_hierarchy_depth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.TreeSitterChunker.max_file_lines" class="md-nav__link">
    <span class="md-ellipsis">
      max_file_lines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.chunking.TreeSitterChunker.chunk_file" class="md-nav__link">
    <span class="md-ellipsis">
      chunk_file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager" class="md-nav__link">
    <span class="md-ellipsis">
      qdrant_manager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="qdrant_manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.HTTP_NOT_FOUND" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP_NOT_FOUND
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager" class="md-nav__link">
    <span class="md-ellipsis">
      QdrantManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QdrantManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.value_error_msg" class="md-nav__link">
    <span class="md-ellipsis">
      value_error_msg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.config_loader" class="md-nav__link">
    <span class="md-ellipsis">
      config_loader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.collection_name" class="md-nav__link">
    <span class="md-ellipsis">
      collection_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.dim" class="md-nav__link">
    <span class="md-ellipsis">
      dim
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.distance" class="md-nav__link">
    <span class="md-ellipsis">
      distance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.client_args" class="md-nav__link">
    <span class="md-ellipsis">
      client_args
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.client" class="md-nav__link">
    <span class="md-ellipsis">
      client
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.is_initialized" class="md-nav__link">
    <span class="md-ellipsis">
      is_initialized
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.initialize" class="md-nav__link">
    <span class="md-ellipsis">
      initialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.upsert_points" class="md-nav__link">
    <span class="md-ellipsis">
      upsert_points
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.delete_points" class="md-nav__link">
    <span class="md-ellipsis">
      delete_points
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.search" class="md-nav__link">
    <span class="md-ellipsis">
      search
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.get_all_point_ids_with_filter" class="md-nav__link">
    <span class="md-ellipsis">
      get_all_point_ids_with_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.get_payloads_by_ids" class="md-nav__link">
    <span class="md-ellipsis">
      get_payloads_by_ids
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.close" class="md-nav__link">
    <span class="md-ellipsis">
      close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.__aenter__" class="md-nav__link">
    <span class="md-ellipsis">
      __aenter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.__aexit__" class="md-nav__link">
    <span class="md-ellipsis">
      __aexit__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.set_payload" class="md-nav__link">
    <span class="md-ellipsis">
      set_payload
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.overwrite_payload" class="md-nav__link">
    <span class="md-ellipsis">
      overwrite_payload
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.clear_payload" class="md-nav__link">
    <span class="md-ellipsis">
      clear_payload
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.QdrantManager.delete_payload_keys" class="md-nav__link">
    <span class="md-ellipsis">
      delete_payload_keys
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.vector.qdrant_manager.create_qdrant_point" class="md-nav__link">
    <span class="md-ellipsis">
      create_qdrant_point
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter" class="md-nav__link">
    <span class="md-ellipsis">
      tree_sitter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="tree_sitter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.TreeSitterAnalyzer" class="md-nav__link">
    <span class="md-ellipsis">
      TreeSitterAnalyzer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TreeSitterAnalyzer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.TreeSitterAnalyzer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.TreeSitterAnalyzer.parsers" class="md-nav__link">
    <span class="md-ellipsis">
      parsers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.TreeSitterAnalyzer.get_parser" class="md-nav__link">
    <span class="md-ellipsis">
      get_parser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.TreeSitterAnalyzer.parse_file" class="md-nav__link">
    <span class="md-ellipsis">
      parse_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.TreeSitterAnalyzer.get_syntax_handler" class="md-nav__link">
    <span class="md-ellipsis">
      get_syntax_handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.TreeSitterAnalyzer.analyze_node" class="md-nav__link">
    <span class="md-ellipsis">
      analyze_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.TreeSitterAnalyzer.analyze_file" class="md-nav__link">
    <span class="md-ellipsis">
      analyze_file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType" class="md-nav__link">
    <span class="md-ellipsis">
      EntityType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EntityType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.MODULE" class="md-nav__link">
    <span class="md-ellipsis">
      MODULE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.NAMESPACE" class="md-nav__link">
    <span class="md-ellipsis">
      NAMESPACE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.PACKAGE" class="md-nav__link">
    <span class="md-ellipsis">
      PACKAGE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.CLASS" class="md-nav__link">
    <span class="md-ellipsis">
      CLASS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.INTERFACE" class="md-nav__link">
    <span class="md-ellipsis">
      INTERFACE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.PROTOCOL" class="md-nav__link">
    <span class="md-ellipsis">
      PROTOCOL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.STRUCT" class="md-nav__link">
    <span class="md-ellipsis">
      STRUCT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.ENUM" class="md-nav__link">
    <span class="md-ellipsis">
      ENUM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.TYPE_ALIAS" class="md-nav__link">
    <span class="md-ellipsis">
      TYPE_ALIAS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.FUNCTION" class="md-nav__link">
    <span class="md-ellipsis">
      FUNCTION
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.METHOD" class="md-nav__link">
    <span class="md-ellipsis">
      METHOD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.PROPERTY" class="md-nav__link">
    <span class="md-ellipsis">
      PROPERTY
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.TEST_CASE" class="md-nav__link">
    <span class="md-ellipsis">
      TEST_CASE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.TEST_SUITE" class="md-nav__link">
    <span class="md-ellipsis">
      TEST_SUITE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.VARIABLE" class="md-nav__link">
    <span class="md-ellipsis">
      VARIABLE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.CONSTANT" class="md-nav__link">
    <span class="md-ellipsis">
      CONSTANT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.CLASS_FIELD" class="md-nav__link">
    <span class="md-ellipsis">
      CLASS_FIELD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.IMPORT" class="md-nav__link">
    <span class="md-ellipsis">
      IMPORT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.DECORATOR" class="md-nav__link">
    <span class="md-ellipsis">
      DECORATOR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.COMMENT" class="md-nav__link">
    <span class="md-ellipsis">
      COMMENT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.DOCSTRING" class="md-nav__link">
    <span class="md-ellipsis">
      DOCSTRING
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.EntityType.UNKNOWN" class="md-nav__link">
    <span class="md-ellipsis">
      UNKNOWN
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base" class="md-nav__link">
    <span class="md-ellipsis">
      base
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType" class="md-nav__link">
    <span class="md-ellipsis">
      EntityType
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EntityType">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.MODULE" class="md-nav__link">
    <span class="md-ellipsis">
      MODULE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.NAMESPACE" class="md-nav__link">
    <span class="md-ellipsis">
      NAMESPACE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.PACKAGE" class="md-nav__link">
    <span class="md-ellipsis">
      PACKAGE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.CLASS" class="md-nav__link">
    <span class="md-ellipsis">
      CLASS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.INTERFACE" class="md-nav__link">
    <span class="md-ellipsis">
      INTERFACE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.PROTOCOL" class="md-nav__link">
    <span class="md-ellipsis">
      PROTOCOL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.STRUCT" class="md-nav__link">
    <span class="md-ellipsis">
      STRUCT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.ENUM" class="md-nav__link">
    <span class="md-ellipsis">
      ENUM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.TYPE_ALIAS" class="md-nav__link">
    <span class="md-ellipsis">
      TYPE_ALIAS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.FUNCTION" class="md-nav__link">
    <span class="md-ellipsis">
      FUNCTION
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.METHOD" class="md-nav__link">
    <span class="md-ellipsis">
      METHOD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.PROPERTY" class="md-nav__link">
    <span class="md-ellipsis">
      PROPERTY
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.TEST_CASE" class="md-nav__link">
    <span class="md-ellipsis">
      TEST_CASE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.TEST_SUITE" class="md-nav__link">
    <span class="md-ellipsis">
      TEST_SUITE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.VARIABLE" class="md-nav__link">
    <span class="md-ellipsis">
      VARIABLE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.CONSTANT" class="md-nav__link">
    <span class="md-ellipsis">
      CONSTANT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.CLASS_FIELD" class="md-nav__link">
    <span class="md-ellipsis">
      CLASS_FIELD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.IMPORT" class="md-nav__link">
    <span class="md-ellipsis">
      IMPORT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.DECORATOR" class="md-nav__link">
    <span class="md-ellipsis">
      DECORATOR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.COMMENT" class="md-nav__link">
    <span class="md-ellipsis">
      COMMENT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.DOCSTRING" class="md-nav__link">
    <span class="md-ellipsis">
      DOCSTRING
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.base.EntityType.UNKNOWN" class="md-nav__link">
    <span class="md-ellipsis">
      UNKNOWN
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer" class="md-nav__link">
    <span class="md-ellipsis">
      analyzer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="analyzer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer.LANGUAGE_NAMES" class="md-nav__link">
    <span class="md-ellipsis">
      LANGUAGE_NAMES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer.get_language_by_extension" class="md-nav__link">
    <span class="md-ellipsis">
      get_language_by_extension
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer" class="md-nav__link">
    <span class="md-ellipsis">
      TreeSitterAnalyzer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TreeSitterAnalyzer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.parsers" class="md-nav__link">
    <span class="md-ellipsis">
      parsers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.get_parser" class="md-nav__link">
    <span class="md-ellipsis">
      get_parser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.parse_file" class="md-nav__link">
    <span class="md-ellipsis">
      parse_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.get_syntax_handler" class="md-nav__link">
    <span class="md-ellipsis">
      get_syntax_handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.analyze_node" class="md-nav__link">
    <span class="md-ellipsis">
      analyze_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.analyze_file" class="md-nav__link">
    <span class="md-ellipsis">
      analyze_file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages" class="md-nav__link">
    <span class="md-ellipsis">
      languages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="languages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig" class="md-nav__link">
    <span class="md-ellipsis">
      LanguageConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LanguageConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.module" class="md-nav__link">
    <span class="md-ellipsis">
      module
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.namespace" class="md-nav__link">
    <span class="md-ellipsis">
      namespace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.class_" class="md-nav__link">
    <span class="md-ellipsis">
      class_
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.interface" class="md-nav__link">
    <span class="md-ellipsis">
      interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.protocol" class="md-nav__link">
    <span class="md-ellipsis">
      protocol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.struct" class="md-nav__link">
    <span class="md-ellipsis">
      struct
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.enum" class="md-nav__link">
    <span class="md-ellipsis">
      enum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.type_alias" class="md-nav__link">
    <span class="md-ellipsis">
      type_alias
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.function" class="md-nav__link">
    <span class="md-ellipsis">
      function
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.method" class="md-nav__link">
    <span class="md-ellipsis">
      method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.property_def" class="md-nav__link">
    <span class="md-ellipsis">
      property_def
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.test_case" class="md-nav__link">
    <span class="md-ellipsis">
      test_case
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.test_suite" class="md-nav__link">
    <span class="md-ellipsis">
      test_suite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.variable" class="md-nav__link">
    <span class="md-ellipsis">
      variable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.constant" class="md-nav__link">
    <span class="md-ellipsis">
      constant
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.class_field" class="md-nav__link">
    <span class="md-ellipsis">
      class_field
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.import_" class="md-nav__link">
    <span class="md-ellipsis">
      import_
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.decorator" class="md-nav__link">
    <span class="md-ellipsis">
      decorator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.comment" class="md-nav__link">
    <span class="md-ellipsis">
      comment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.docstring" class="md-nav__link">
    <span class="md-ellipsis">
      docstring
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.file_extensions" class="md-nav__link">
    <span class="md-ellipsis">
      file_extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.tree_sitter_name" class="md-nav__link">
    <span class="md-ellipsis">
      tree_sitter_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.decorators" class="md-nav__link">
    <span class="md-ellipsis">
      decorators
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.class_fields" class="md-nav__link">
    <span class="md-ellipsis">
      class_fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.all_node_types" class="md-nav__link">
    <span class="md-ellipsis">
      all_node_types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageConfig.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler" class="md-nav__link">
    <span class="md-ellipsis">
      LanguageSyntaxHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LanguageSyntaxHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.config" class="md-nav__link">
    <span class="md-ellipsis">
      config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.get_entity_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_entity_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.find_docstring" class="md-nav__link">
    <span class="md-ellipsis">
      find_docstring
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.extract_name" class="md-nav__link">
    <span class="md-ellipsis">
      extract_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.get_body_node" class="md-nav__link">
    <span class="md-ellipsis">
      get_body_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.get_children_to_process" class="md-nav__link">
    <span class="md-ellipsis">
      get_children_to_process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.should_skip_node" class="md-nav__link">
    <span class="md-ellipsis">
      should_skip_node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.extract_imports" class="md-nav__link">
    <span class="md-ellipsis">
      extract_imports
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.extract_calls" class="md-nav__link">
    <span class="md-ellipsis">
      extract_calls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.extract_signature" class="md-nav__link">
    <span class="md-ellipsis">
      extract_signature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.get_enclosing_node_of_type" class="md-nav__link">
    <span class="md-ellipsis">
      get_enclosing_node_of_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LANGUAGE_CONFIGS" class="md-nav__link">
    <span class="md-ellipsis">
      LANGUAGE_CONFIGS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.LANGUAGE_HANDLERS" class="md-nav__link">
    <span class="md-ellipsis">
      LANGUAGE_HANDLERS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.python" class="md-nav__link">
    <span class="md-ellipsis">
      python
    </span>
  </a>
  
    <nav class="md-nav" aria-label="python">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.python.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.python.PythonConfig" class="md-nav__link">
    <span class="md-ellipsis">
      PythonConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.python.PYTHON_CONFIG" class="md-nav__link">
    <span class="md-ellipsis">
      PYTHON_CONFIG
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler" class="md-nav__link">
    <span class="md-ellipsis">
      PythonSyntaxHandler
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.typescript" class="md-nav__link">
    <span class="md-ellipsis">
      typescript
    </span>
  </a>
  
    <nav class="md-nav" aria-label="typescript">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.typescript.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig" class="md-nav__link">
    <span class="md-ellipsis">
      TypeScriptConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.typescript.TYPESCRIPT_CONFIG" class="md-nav__link">
    <span class="md-ellipsis">
      TYPESCRIPT_CONFIG
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.typescript.TypeScriptSyntaxHandler" class="md-nav__link">
    <span class="md-ellipsis">
      TypeScriptSyntaxHandler
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.base" class="md-nav__link">
    <span class="md-ellipsis">
      base
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.base.LanguageConfig" class="md-nav__link">
    <span class="md-ellipsis">
      LanguageConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler" class="md-nav__link">
    <span class="md-ellipsis">
      LanguageSyntaxHandler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.base.PythonConfig" class="md-nav__link">
    <span class="md-ellipsis">
      PythonConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.base.JavaScriptConfig" class="md-nav__link">
    <span class="md-ellipsis">
      JavaScriptConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.base.TypeScriptConfig" class="md-nav__link">
    <span class="md-ellipsis">
      TypeScriptConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.base.RustConfig" class="md-nav__link">
    <span class="md-ellipsis">
      RustConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.base.GoConfig" class="md-nav__link">
    <span class="md-ellipsis">
      GoConfig
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.javascript" class="md-nav__link">
    <span class="md-ellipsis">
      javascript
    </span>
  </a>
  
    <nav class="md-nav" aria-label="javascript">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.javascript.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig" class="md-nav__link">
    <span class="md-ellipsis">
      JavaScriptConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG" class="md-nav__link">
    <span class="md-ellipsis">
      JAVASCRIPT_CONFIG
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler" class="md-nav__link">
    <span class="md-ellipsis">
      JavaScriptSyntaxHandler
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  
    
      
    
    <a href="https://github.com/SarthakMishra/codemap/raw/master/docs/api/pre-release/processor/index.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="processor-overview">Processor Overview</h1>


<div class="doc doc-object doc-module">



<a id="codemap.processor"></a>
    <div class="doc doc-contents first">

        <p>CodeMap processor module.</p>
<p>This module provides functionality for code processing and analysis,
with a focus on generating code structure at different levels of detail
using tree-sitter.</p>









  <div class="doc doc-children">











<div class="doc doc-object doc-class">



<h3 id="codemap.processor.LODEntity" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LODEntity</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>Represents a code entity at a specific level of detail.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/lod.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">LODEntity</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Represents a code entity at a specific level of detail.&quot;&quot;&quot;</span>

	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Name of the entity.&quot;&quot;&quot;</span>

	<span class="n">entity_type</span><span class="p">:</span> <span class="n">EntityType</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Type of entity (class, function, etc.).&quot;&quot;&quot;</span>

	<span class="n">start_line</span><span class="p">:</span> <span class="nb">int</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Starting line number (1-indexed).&quot;&quot;&quot;</span>

	<span class="n">end_line</span><span class="p">:</span> <span class="nb">int</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Ending line number (1-indexed).&quot;&quot;&quot;</span>

	<span class="n">docstring</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Entity docstring, if available.&quot;&quot;&quot;</span>

	<span class="n">signature</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Entity signature (e.g., function parameters), if available.&quot;&quot;&quot;</span>

	<span class="n">content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Complete entity content/implementation.&quot;&quot;&quot;</span>

	<span class="n">children</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">LODEntity</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Child entities contained within this entity.&quot;&quot;&quot;</span>

	<span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Programming language of the entity.&quot;&quot;&quot;</span>

	<span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Additional metadata about the entity.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODEntity.name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Name of the entity.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODEntity.entity_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">entity_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">entity_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Type of entity (class, function, etc.).</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODEntity.start_line" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">start_line</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">start_line</span><span class="p">:</span> <span class="n"><span title="int">int</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Starting line number (1-indexed).</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODEntity.end_line" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">end_line</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">end_line</span><span class="p">:</span> <span class="n"><span title="int">int</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Ending line number (1-indexed).</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODEntity.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Entity docstring, if available.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODEntity.signature" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">signature</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">signature</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Entity signature (e.g., function parameters), if available.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODEntity.content" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">content</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">content</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Complete entity content/implementation.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODEntity.children" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">children</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">children</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODEntity&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODEntity&lt;/code&gt;)" href="#codemap.processor.lod.LODEntity">LODEntity</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="dataclasses.field">field</span></span><span class="p">(</span><span class="n"><span title="dataclasses.field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><span title="list">list</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Child entities contained within this entity.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODEntity.language" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">language</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Programming language of the entity.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODEntity.metadata" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">metadata</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">metadata</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="dataclasses.field">field</span></span><span class="p">(</span><span class="n"><span title="dataclasses.field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><span title="dict">dict</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Additional metadata about the entity.</p>

    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="codemap.processor.LODEntity.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
	<span class="nf">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">entity_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span><span class="p">,</span>
	<span class="n">start_line</span><span class="p">:</span> <span class="n"><span title="int">int</span></span><span class="p">,</span>
	<span class="n">end_line</span><span class="p">:</span> <span class="n"><span title="int">int</span></span><span class="p">,</span>
	<span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
	<span class="n">signature</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
	<span class="n">content</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
	<span class="n">children</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODEntity&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODEntity&lt;/code&gt;)" href="#codemap.processor.lod.LODEntity">LODEntity</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="list">list</span></span><span class="p">(),</span>
	<span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
	<span class="n">metadata</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="dict">dict</span></span><span class="p">(),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">


    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h3 id="codemap.processor.LODGenerator" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LODGenerator</span>


</h3>


    <div class="doc doc-contents ">


        <p>Generates different levels of detail from source code.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/lod.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LODGenerator</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Generates different levels of detail from source code.&quot;&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Initialize the LOD generator.&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">TreeSitterAnalyzer</span><span class="p">()</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">generate_lod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">LODLevel</span> <span class="o">=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LODEntity</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Generate LOD representation for a file.</span>

<span class="sd">		Args:</span>
<span class="sd">		    file_path: Path to the file to analyze</span>
<span class="sd">		    level: Level of detail to generate (default changed to STRUCTURE)</span>

<span class="sd">		Returns:</span>
<span class="sd">		    LODEntity representing the file, or None if analysis failed</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Read file content</span>
		<span class="n">content</span> <span class="o">=</span> <span class="n">read_file_content</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">content</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not read content from </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span>

		<span class="c1"># Analyze file with tree-sitter</span>
		<span class="n">analysis_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">analyze_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">analysis_result</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to analyze </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span>

		<span class="c1"># Convert analysis result to LOD, passing the file_path</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_to_lod</span><span class="p">(</span><span class="n">analysis_result</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_convert_to_lod</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span> <span class="n">analysis_result</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">level</span><span class="p">:</span> <span class="n">LODLevel</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LODEntity</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Convert tree-sitter analysis to LOD format.</span>

<span class="sd">		Args:</span>
<span class="sd">		    analysis_result: Tree-sitter analysis result</span>
<span class="sd">		    level: Level of detail to generate</span>
<span class="sd">		    file_path: Path to the file being analyzed</span>

<span class="sd">		Returns:</span>
<span class="sd">		    LODEntity representation</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">entity_type_str</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;UNKNOWN&quot;</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">entity_type</span> <span class="o">=</span> <span class="n">EntityType</span><span class="p">[</span><span class="n">entity_type_str</span><span class="p">]</span>
		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
			<span class="n">entity_type</span> <span class="o">=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span>

		<span class="n">location</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;location&quot;</span><span class="p">,</span> <span class="p">{})</span>
		<span class="n">start_line</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start_line&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">end_line</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;end_line&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

		<span class="c1"># Create the entity with appropriate level of detail</span>
		<span class="n">entity</span> <span class="o">=</span> <span class="n">LODEntity</span><span class="p">(</span>
			<span class="n">name</span><span class="o">=</span><span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
			<span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
			<span class="n">start_line</span><span class="o">=</span><span class="n">start_line</span><span class="p">,</span>
			<span class="n">end_line</span><span class="o">=</span><span class="n">end_line</span><span class="p">,</span>
			<span class="n">language</span><span class="o">=</span><span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
		<span class="p">)</span>

		<span class="c1"># Add file_path to metadata for top-level entities</span>
		<span class="k">if</span> <span class="n">file_path</span><span class="p">:</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;file_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

		<span class="c1"># Add details based on LOD level (updated comparisons)</span>
		<span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">DOCS</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">docstring</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docstring&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

		<span class="c1"># Signature is needed for SIGNATURES (1), STRUCTURE (2), DOCS (3), FULL (4)</span>
		<span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">SIGNATURES</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
			<span class="c1"># Extract signature from content if available</span>
			<span class="n">content</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_signature</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">entity_type</span><span class="p">,</span> <span class="n">entity</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>

		<span class="c1"># Content is needed for FULL (4)</span>
		<span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="o">.</span><span class="n">value</span> <span class="ow">or</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">:</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

		<span class="c1"># Process children recursively (without passing file_path)</span>
		<span class="n">children</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;children&quot;</span><span class="p">,</span> <span class="p">[])</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children</span><span class="p">:</span>
			<span class="n">child_entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_to_lod</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_entity</span><span class="p">)</span>

		<span class="c1"># Add any additional metadata</span>
		<span class="k">if</span> <span class="s2">&quot;dependencies&quot;</span> <span class="ow">in</span> <span class="n">analysis_result</span><span class="p">:</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;dependencies&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="p">[</span><span class="s2">&quot;dependencies&quot;</span><span class="p">]</span>
		<span class="k">if</span> <span class="s2">&quot;calls&quot;</span> <span class="ow">in</span> <span class="n">analysis_result</span><span class="p">:</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;calls&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="p">[</span><span class="s2">&quot;calls&quot;</span><span class="p">]</span>

		<span class="k">return</span> <span class="n">entity</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_extract_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">entity_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">,</span> <span class="n">_language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract function/method signature from content.</span>

<span class="sd">		This is a simple implementation; ideally, the language-specific handlers</span>
<span class="sd">		should provide this functionality.</span>

<span class="sd">		Args:</span>
<span class="sd">		    content: Full entity content</span>
<span class="sd">		    entity_type: Type of entity</span>
<span class="sd">		    _language: Programming language (unused currently)</span>

<span class="sd">		Returns:</span>
<span class="sd">		    Signature string</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">content</span><span class="p">:</span>
			<span class="k">return</span> <span class="s2">&quot;&quot;</span>

		<span class="c1"># For functions and methods, extract the first line (declaration)</span>
		<span class="k">if</span> <span class="n">entity_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">INTERFACE</span><span class="p">]:</span>
			<span class="n">lines</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">lines</span><span class="p">:</span>
				<span class="c1"># Return first line without trailing characters</span>
				<span class="k">return</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;:{&quot;</span><span class="p">)</span>

		<span class="k">return</span> <span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h4 id="codemap.processor.LODGenerator.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the LOD generator.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Initialize the LOD generator.&quot;&quot;&quot;</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">TreeSitterAnalyzer</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODGenerator.analyzer" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">analyzer</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">analyzer</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TreeSitterAnalyzer&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer&lt;/code&gt;)" href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer">TreeSitterAnalyzer</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="codemap.processor.LODGenerator.generate_lod" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">generate_lod</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_lod</span><span class="p">(</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODLevel&lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel">LODLevel</a></span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-attribute-name&quot;&gt;STRUCTURE&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
      &lt;small class=&quot;doc doc-label doc-label-instance-attribute&quot;&gt;&lt;code&gt;instance-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel.STRUCTURE&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel.STRUCTURE">STRUCTURE</a></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODEntity&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODEntity&lt;/code&gt;)" href="#codemap.processor.lod.LODEntity">LODEntity</a></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generate LOD representation for a file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the file to analyze</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>level</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODLevel&lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel">LODLevel</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Level of detail to generate (default changed to STRUCTURE)</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-attribute-name&quot;&gt;STRUCTURE&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
      &lt;small class=&quot;doc doc-label doc-label-instance-attribute&quot;&gt;&lt;code&gt;instance-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel.STRUCTURE&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel.STRUCTURE">STRUCTURE</a></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODEntity&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODEntity&lt;/code&gt;)" href="#codemap.processor.lod.LODEntity">LODEntity</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>LODEntity representing the file, or None if analysis failed</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_lod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">LODLevel</span> <span class="o">=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LODEntity</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Generate LOD representation for a file.</span>

<span class="sd">	Args:</span>
<span class="sd">	    file_path: Path to the file to analyze</span>
<span class="sd">	    level: Level of detail to generate (default changed to STRUCTURE)</span>

<span class="sd">	Returns:</span>
<span class="sd">	    LODEntity representing the file, or None if analysis failed</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Read file content</span>
	<span class="n">content</span> <span class="o">=</span> <span class="n">read_file_content</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">content</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not read content from </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="c1"># Analyze file with tree-sitter</span>
	<span class="n">analysis_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">analyze_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">analysis_result</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to analyze </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="c1"># Convert analysis result to LOD, passing the file_path</span>
	<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_to_lod</span><span class="p">(</span><span class="n">analysis_result</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h3 id="codemap.processor.LODLevel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LODLevel</span>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Enumeration of Level of Detail levels.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/lod.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LODLevel</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Enumeration of Level of Detail levels.&quot;&quot;&quot;</span>

	<span class="n">SIGNATURES</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># Top-level entity names, docstrings, and signatures</span>
	<span class="n">STRUCTURE</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># All entity signatures, indented structure</span>
	<span class="n">DOCS</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># Level 2 + Docstrings for all entities</span>
	<span class="n">FULL</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c1"># Level 3 + Full implementation content</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODLevel.SIGNATURES" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">SIGNATURES</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">SIGNATURES</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODLevel.STRUCTURE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">STRUCTURE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">STRUCTURE</span> <span class="o">=</span> <span class="mi">2</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODLevel.DOCS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">DOCS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">DOCS</span> <span class="o">=</span> <span class="mi">3</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.LODLevel.FULL" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">FULL</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">FULL</span> <span class="o">=</span> <span class="mi">4</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h3 id="codemap.processor.ProcessingPipeline" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ProcessingPipeline</span>


</h3>


    <div class="doc doc-contents ">


        <p>Orchestrates data processing, synchronization, and retrieval for CodeMap using Qdrant.</p>
<p>Manages connections and interactions with the Qdrant vector database,
ensuring it is synchronized with the Git repository state. Provides
methods for semantic search. Uses asyncio for database and embedding
operations.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ProcessingPipeline</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Orchestrates data processing, synchronization, and retrieval for CodeMap using Qdrant.</span>

<span class="sd">	Manages connections and interactions with the Qdrant vector database,</span>
<span class="sd">	ensuring it is synchronized with the Git repository state. Provides</span>
<span class="sd">	methods for semantic search. Uses asyncio for database and embedding</span>
<span class="sd">	operations.</span>

<span class="sd">	&quot;&quot;&quot;</span>

	<span class="c1"># Note: __init__ cannot be async directly. Initialization happens in an async method.</span>
	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">repo_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize the processing pipeline synchronously.</span>

<span class="sd">		Core async initialization is done via `async_init`.</span>

<span class="sd">		Args:</span>
<span class="sd">		    repo_path: Path to the repository root. If None, it will be determined.</span>
<span class="sd">		    config_loader: Application configuration loader. If None, a default one is created.</span>
<span class="sd">		    _progress: Progress bar instance for initialization tracking.</span>
<span class="sd">		    _task_id: Task ID for the progress bar.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_path</span> <span class="ow">or</span> <span class="n">find_project_root</span><span class="p">()</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Repository path could not be determined.&quot;</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span> <span class="o">=</span> <span class="n">config_loader</span> <span class="ow">or</span> <span class="n">ConfigLoader</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Config loading failed or returned unexpected type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Failed to load a valid Config object.&quot;</span>
			<span class="k">raise</span> <span class="n">ConfigError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="c1"># --- Initialize Shared Components (Synchronous) --- #</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">TreeSitterAnalyzer</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">chunker</span> <span class="o">=</span> <span class="n">TreeSitterChunker</span><span class="p">(</span><span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">db_client</span> <span class="o">=</span> <span class="n">DatabaseClient</span><span class="p">()</span>

		<span class="c1"># --- Load Configuration --- #</span>
		<span class="c1"># Get embedding configuration</span>
		<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
		<span class="n">embedding_model</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model_name&quot;</span><span class="p">)</span>
		<span class="n">qdrant_dimension</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension&quot;</span><span class="p">)</span>
		<span class="n">distance_metric</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension_metric&quot;</span><span class="p">,</span> <span class="s2">&quot;cosine&quot;</span><span class="p">)</span>

		<span class="c1"># Make sure embedding_model_name is always a string</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;voyage-code-3&quot;</span>  <span class="c1"># Default</span>
		<span class="k">if</span> <span class="n">embedding_model</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embedding_model</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span> <span class="o">=</span> <span class="n">embedding_model</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">qdrant_dimension</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Missing qdrant dimension in configuration, using default 1024&quot;</span><span class="p">)</span>
			<span class="n">qdrant_dimension</span> <span class="o">=</span> <span class="mi">1024</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using embedding model: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="si">}</span><span class="s2"> with dimension: </span><span class="si">{</span><span class="n">qdrant_dimension</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

		<span class="c1"># Get Qdrant configuration</span>
		<span class="n">vector_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
		<span class="n">qdrant_location</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_location&quot;</span><span class="p">)</span>
		<span class="n">qdrant_collection</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_collection_name&quot;</span><span class="p">,</span> <span class="s2">&quot;codemap_vectors&quot;</span><span class="p">)</span>
		<span class="n">qdrant_url</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
		<span class="n">qdrant_api_key</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;api_key&quot;</span><span class="p">)</span>

		<span class="c1"># Convert distance metric string to enum</span>
		<span class="n">distance_enum</span> <span class="o">=</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Distance</span><span class="o">.</span><span class="n">COSINE</span>
		<span class="k">if</span> <span class="n">distance_metric</span> <span class="ow">and</span> <span class="n">distance_metric</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;COSINE&quot;</span><span class="p">,</span> <span class="s2">&quot;EUCLID&quot;</span><span class="p">,</span> <span class="s2">&quot;DOT&quot;</span><span class="p">]:</span>
			<span class="n">distance_enum</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">Distance</span><span class="p">,</span> <span class="n">distance_metric</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>

		<span class="c1"># Use URL if provided, otherwise use location (defaults to :memory: in QdrantManager)</span>
		<span class="n">qdrant_init_args</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s2">&quot;config_loader&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to QdrantManager</span>
			<span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="n">qdrant_collection</span><span class="p">,</span>
			<span class="s2">&quot;dim&quot;</span><span class="p">:</span> <span class="n">qdrant_dimension</span><span class="p">,</span>
			<span class="s2">&quot;distance&quot;</span><span class="p">:</span> <span class="n">distance_enum</span><span class="p">,</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="n">qdrant_url</span><span class="p">:</span>
			<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_url</span>
			<span class="k">if</span> <span class="n">qdrant_api_key</span><span class="p">:</span>
				<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;api_key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_api_key</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring Qdrant client for URL: </span><span class="si">{</span><span class="n">qdrant_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">qdrant_location</span><span class="p">:</span>
			<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_location</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring Qdrant client for local path/memory: </span><span class="si">{</span><span class="n">qdrant_location</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># Let QdrantManager use its default (:memory:)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Configuring Qdrant client for default location (:memory:)&quot;</span><span class="p">)</span>

		<span class="c1"># --- Initialize Managers (Synchronous) --- #</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="n">QdrantManager</span><span class="p">(</span><span class="o">**</span><span class="n">qdrant_init_args</span><span class="p">)</span>

		<span class="c1"># Initialize VectorSynchronizer with the embedding model name and config_loader</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span> <span class="o">=</span> <span class="n">VectorSynchronizer</span><span class="p">(</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">chunker</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="p">,</span>
			<span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to VectorSynchronizer</span>
		<span class="p">)</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ProcessingPipeline synchronous initialization complete for repo: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">False</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span> <span class="n">Watcher</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_init</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span> <span class="n">sync_on_init</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="n">Progress</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="p">:</span> <span class="n">TaskID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Perform asynchronous initialization steps, including Qdrant connection and initial sync.</span>

<span class="sd">		Args:</span>
<span class="sd">		    sync_on_init: If True, run database synchronization during initialization.</span>
<span class="sd">		    progress: Optional rich Progress instance for unified status display.</span>
<span class="sd">		    task_id: Optional rich TaskID for the main initialization/sync task.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Pipeline already async initialized.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="n">init_description</span> <span class="o">=</span> <span class="s2">&quot;Initializing pipeline components...&quot;</span>
		<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">init_description</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># Get embedding configuration for Qdrant URL</span>
			<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
			<span class="n">qdrant_url</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>

			<span class="c1"># Check for Docker containers</span>
			<span class="k">if</span> <span class="n">qdrant_url</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Checking Docker containers...&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

				<span class="c1"># Only check Docker if we&#39;re using a URL that looks like localhost/127.0.0.1</span>
				<span class="k">if</span> <span class="s2">&quot;localhost&quot;</span> <span class="ow">in</span> <span class="n">qdrant_url</span> <span class="ow">or</span> <span class="s2">&quot;127.0.0.1&quot;</span> <span class="ow">in</span> <span class="n">qdrant_url</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Ensuring Qdrant container is running&quot;</span><span class="p">)</span>
					<span class="n">success</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ensure_qdrant_running</span><span class="p">(</span><span class="n">wait_for_health</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">qdrant_url</span><span class="o">=</span><span class="n">qdrant_url</span><span class="p">)</span>

					<span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docker check failed: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
						<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
							<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
								<span class="n">task_id</span><span class="p">,</span>
								<span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[yellow]Warning:[/yellow] </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">. Continuing anyway...&quot;</span><span class="p">,</span>
								<span class="n">completed</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
							<span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docker container check: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
						<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
							<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Docker containers ready.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

			<span class="c1"># Initialize the database client asynchronously</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Initializing database client...&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

			<span class="k">try</span><span class="p">:</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Database client initialized successfully.&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Database initialized.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
					<span class="sa">f</span><span class="s2">&quot;Database initialization failed (RuntimeError): </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Some features may not work properly.&quot;</span>
				<span class="p">)</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
						<span class="n">task_id</span><span class="p">,</span>
						<span class="n">description</span><span class="o">=</span><span class="s2">&quot;[yellow]Warning:[/yellow] Database initialization failed. Continuing anyway...&quot;</span><span class="p">,</span>
						<span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
					<span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">ConnectionError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database connection failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Some features may not work properly.&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
						<span class="n">task_id</span><span class="p">,</span>
						<span class="n">description</span><span class="o">=</span><span class="s2">&quot;[yellow]Warning:[/yellow] Database connection failed. Continuing anyway...&quot;</span><span class="p">,</span>
						<span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
					<span class="p">)</span>

			<span class="c1"># Initialize Qdrant client (connects, creates collection if needed)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Qdrant manager initialized asynchronously.&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Qdrant connected.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># This case should theoretically not happen if __init__ succeeded</span>
				<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;QdrantManager was not initialized in __init__.&quot;</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
				<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

			<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">False</span>
			<span class="k">if</span> <span class="n">sync_on_init</span><span class="p">:</span>
				<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">True</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;`sync_on_init` is True. Performing index synchronization...&quot;</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># Optional: Could add a check here if Qdrant collection is empty</span>
				<span class="c1"># requires another call to qdrant_manager, e.g., get_count()</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Skipping sync on init as requested.&quot;</span><span class="p">)</span>
				<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">False</span>

			<span class="c1"># Set initialized flag *before* potentially long sync operation</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">True</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ProcessingPipeline async core components initialized.&quot;</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">needs_sync</span><span class="p">:</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_databases</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>
				<span class="c1"># sync_databases handles final progress update on success/failure</span>
			<span class="k">elif</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="c1"># Update progress if sync was skipped</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
					<span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[green]✓[/green] Pipeline initialized (sync skipped).&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span>
				<span class="p">)</span>

		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed during async initialization&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[red]Error:[/red] Init failed&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
			<span class="c1"># Optionally re-raise or handle specific exceptions</span>
			<span class="k">raise</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Stops the pipeline and releases resources, including closing Qdrant connection.&quot;&quot;&quot;</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping ProcessingPipeline asynchronously...&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore[assignment]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Qdrant Manager already None during stop.&quot;</span><span class="p">)</span>

		<span class="c1"># Stop the watcher if it&#39;s running</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping file watcher...&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span>  <span class="c1"># Allow cancellation to propagate</span>
			<span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher task cancelled.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher stopped.&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="o">=</span> <span class="kc">None</span>

		<span class="c1"># Cleanup database client</span>
		<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;db_client&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Database client cleaned up.&quot;</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error during database client cleanup&quot;</span><span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">ConnectionError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Connection error during database client cleanup&quot;</span><span class="p">)</span>

		<span class="c1"># Other cleanup if needed</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">False</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ProcessingPipeline stopped.&quot;</span><span class="p">)</span>

	<span class="c1"># --- Synchronization --- #</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_sync_callback_wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Async wrapper for the sync callback to handle locking.&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="o">.</span><span class="n">locked</span><span class="p">():</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Sync already in progress, skipping watcher-triggered sync.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Watcher triggered sync starting...&quot;</span><span class="p">)</span>
			<span class="c1"># Run sync without progress bars from watcher</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_databases</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Watcher triggered sync finished.&quot;</span><span class="p">)</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sync_databases</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="n">Progress</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="p">:</span> <span class="n">TaskID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Asynchronously synchronize the Qdrant index with the Git repository state.</span>

<span class="sd">		Args:</span>
<span class="sd">		    progress: Optional rich Progress instance for status updates.</span>
<span class="sd">		    task_id: Optional rich TaskID for the main sync task.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot sync databases, async initialization not complete.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[red]Error:[/red] Not initialized&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="c1"># Acquire lock only if not already held (for watcher calls)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="o">.</span><span class="n">locked</span><span class="p">():</span>
			<span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting vector index synchronization using VectorSynchronizer...&quot;</span><span class="p">)</span>
				<span class="c1"># VectorSynchronizer handles its own progress updates internally now</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span><span class="o">.</span><span class="n">sync_index</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>
				<span class="c1"># Final status message/logging is handled by sync_index</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># If lock is already held (likely by watcher call), just run it</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting vector index synchronization (lock already held)...&quot;</span><span class="p">)</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span><span class="o">.</span><span class="n">sync_index</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>

	<span class="c1"># --- Watcher Methods --- #</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">initialize_watcher</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debounce_delay</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize the file watcher.</span>

<span class="sd">		Args:</span>
<span class="sd">		    debounce_delay: Delay in seconds before triggering sync after a file change.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot initialize watcher without a repository path.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Watcher already initialized.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initializing file watcher for path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="n">Watcher</span><span class="p">(</span>
				<span class="n">path_to_watch</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">,</span>
				<span class="n">on_change_callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sync_callback_wrapper</span><span class="p">,</span>  <span class="c1"># Use the lock wrapper</span>
				<span class="n">debounce_delay</span><span class="o">=</span><span class="n">debounce_delay</span><span class="p">,</span>
			<span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher initialized.&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to initialize watcher&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unexpected error initializing watcher.&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_watcher</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Start the file watcher in the background.</span>

<span class="sd">		`initialize_watcher` must be called first.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Watcher not initialized. Call initialize_watcher() first.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Watcher task is already running.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting file watcher task in the background...&quot;</span><span class="p">)</span>
		<span class="c1"># Create a task to run the watcher&#39;s start method asynchronously</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="o">.</span><span class="n">start</span><span class="p">())</span>
		<span class="c1"># We don&#39;t await the task here; it runs independently.</span>
		<span class="c1"># Error handling within the watcher&#39;s start method logs issues.</span>

	<span class="c1"># --- Retrieval Methods --- #</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">semantic_search</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
		<span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="n">filter_params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Perform semantic search for code chunks similar to the query using Qdrant.</span>

<span class="sd">		Args:</span>
<span class="sd">		    query: The search query string.</span>
<span class="sd">		    k: The number of top similar results to retrieve.</span>
<span class="sd">		    filter_params: Optional dictionary for filtering results. Supports:</span>
<span class="sd">		        - exact match: {&quot;field&quot;: &quot;value&quot;} or {&quot;match&quot;: {&quot;field&quot;: &quot;value&quot;}}</span>
<span class="sd">		        - multiple values: {&quot;match_any&quot;: {&quot;field&quot;: [&quot;value1&quot;, &quot;value2&quot;]}}</span>
<span class="sd">		        - range: {&quot;range&quot;: {&quot;field&quot;: {&quot;gt&quot;: value, &quot;lt&quot;: value}}}</span>
<span class="sd">		        - complex: {&quot;must&quot;: [...], &quot;should&quot;: [...], &quot;must_not&quot;: [...]}</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A list of search result dictionaries (Qdrant ScoredPoint converted to dict),</span>
<span class="sd">		    or None if an error occurs.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;QdrantManager not available for semantic search.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Performing semantic search for query: &#39;</span><span class="si">%s</span><span class="s2">&#39;, k=</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># 1. Generate query embedding (must be async)</span>
			<span class="n">query_embedding</span> <span class="o">=</span> <span class="k">await</span> <span class="n">generate_embedding</span><span class="p">(</span>
				<span class="n">query</span><span class="p">,</span>
				<span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">,</span>
				<span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to generate_embedding</span>
			<span class="p">)</span>
			<span class="k">if</span> <span class="n">query_embedding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to generate embedding for query.&quot;</span><span class="p">)</span>
				<span class="k">return</span> <span class="kc">None</span>

			<span class="c1"># Convert to numpy array if needed by Qdrant client, though list is often fine</span>
			<span class="c1"># query_vector = np.array(query_embedding, dtype=np.float32)</span>
			<span class="n">query_vector</span> <span class="o">=</span> <span class="n">query_embedding</span>  <span class="c1"># Qdrant client typically accepts list[float]</span>

			<span class="c1"># 2. Process filter parameters to Qdrant filter format</span>
			<span class="n">query_filter</span> <span class="o">=</span> <span class="kc">None</span>
			<span class="k">if</span> <span class="n">filter_params</span><span class="p">:</span>
				<span class="n">query_filter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_qdrant_filter</span><span class="p">(</span><span class="n">filter_params</span><span class="p">)</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using filter for search: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query_filter</span><span class="p">)</span>

			<span class="c1"># 3. Query Qdrant index (must be async)</span>
			<span class="n">search_results</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">ScoredPoint</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
				<span class="n">query_vector</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">query_filter</span><span class="o">=</span><span class="n">query_filter</span>
			<span class="p">)</span>

			<span class="k">if</span> <span class="ow">not</span> <span class="n">search_results</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Qdrant search returned no results.&quot;</span><span class="p">)</span>
				<span class="k">return</span> <span class="p">[]</span>

			<span class="c1"># 4. Format results (convert ScoredPoint to dictionary)</span>
			<span class="n">formatted_results</span> <span class="o">=</span> <span class="p">[]</span>
			<span class="k">for</span> <span class="n">scored_point</span> <span class="ow">in</span> <span class="n">search_results</span><span class="p">:</span>
				<span class="c1"># Convert Qdrant model to dict for consistent output</span>
				<span class="c1"># Include score (similarity) and payload</span>
				<span class="n">result_dict</span> <span class="o">=</span> <span class="p">{</span>
					<span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">scored_point</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>  <span class="c1"># Ensure ID is string</span>
					<span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="n">scored_point</span><span class="o">.</span><span class="n">score</span><span class="p">,</span>
					<span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="n">scored_point</span><span class="o">.</span><span class="n">payload</span><span class="p">,</span>
					<span class="c1"># Optionally include version if needed</span>
					<span class="c1"># &quot;version&quot;: scored_point.version,</span>
				<span class="p">}</span>
				<span class="n">formatted_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_dict</span><span class="p">)</span>

			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Semantic search found </span><span class="si">%d</span><span class="s2"> results.&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">formatted_results</span><span class="p">))</span>
			<span class="k">return</span> <span class="n">formatted_results</span>

		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error during semantic search.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_build_qdrant_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Convert filter parameters to Qdrant filter format.</span>

<span class="sd">		Args:</span>
<span class="sd">		    filter_params: Dictionary of filter parameters</span>

<span class="sd">		Returns:</span>
<span class="sd">		    Qdrant filter object</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># If already a proper Qdrant filter, return as is</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filter_params</span><span class="p">,</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">):</span>
			<span class="k">return</span> <span class="n">filter_params</span>

		<span class="c1"># Check for clause-based filter (must, should, must_not)</span>
		<span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="n">filter_params</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;must&quot;</span><span class="p">,</span> <span class="s2">&quot;should&quot;</span><span class="p">,</span> <span class="s2">&quot;must_not&quot;</span><span class="p">]):</span>
			<span class="n">filter_obj</span> <span class="o">=</span> <span class="p">{}</span>

			<span class="c1"># Process must conditions (AND)</span>
			<span class="k">if</span> <span class="s2">&quot;must&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
				<span class="n">filter_obj</span><span class="p">[</span><span class="s2">&quot;must&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_build_qdrant_filter</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span> <span class="k">for</span> <span class="n">cond</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;must&quot;</span><span class="p">]]</span>

			<span class="c1"># Process should conditions (OR)</span>
			<span class="k">if</span> <span class="s2">&quot;should&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
				<span class="n">filter_obj</span><span class="p">[</span><span class="s2">&quot;should&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_build_qdrant_filter</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span> <span class="k">for</span> <span class="n">cond</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;should&quot;</span><span class="p">]]</span>

			<span class="c1"># Process must_not conditions (NOT)</span>
			<span class="k">if</span> <span class="s2">&quot;must_not&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
				<span class="n">filter_obj</span><span class="p">[</span><span class="s2">&quot;must_not&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_build_qdrant_filter</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span> <span class="k">for</span> <span class="n">cond</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;must_not&quot;</span><span class="p">]]</span>

			<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span><span class="o">**</span><span class="n">filter_obj</span><span class="p">)</span>

		<span class="c1"># Check for condition-based filter (match, range, etc.)</span>
		<span class="k">if</span> <span class="s2">&quot;match&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
			<span class="n">field</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;match&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
			<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span>
				<span class="n">must</span><span class="o">=</span><span class="p">[</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">FieldCondition</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">MatchValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">))]</span>
			<span class="p">)</span>

		<span class="k">if</span> <span class="s2">&quot;match_any&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
			<span class="n">field</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;match_any&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
			<span class="c1"># For string values</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">values</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">values</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))):</span>
				<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span>
					<span class="n">should</span><span class="o">=</span><span class="p">[</span>
						<span class="n">qdrant_models</span><span class="o">.</span><span class="n">FieldCondition</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">MatchValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">))</span>
						<span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span>
					<span class="p">]</span>
				<span class="p">)</span>
			<span class="c1"># Default case</span>
			<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span>
				<span class="n">should</span><span class="o">=</span><span class="p">[</span>
					<span class="n">qdrant_models</span><span class="o">.</span><span class="n">FieldCondition</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">MatchValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">))</span>
					<span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span>
				<span class="p">]</span>
			<span class="p">)</span>

		<span class="k">if</span> <span class="s2">&quot;range&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
			<span class="n">field</span><span class="p">,</span> <span class="n">range_values</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
			<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span>
				<span class="n">must</span><span class="o">=</span><span class="p">[</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">FieldCondition</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">Range</span><span class="p">(</span><span class="o">**</span><span class="n">range_values</span><span class="p">))]</span>
			<span class="p">)</span>

		<span class="c1"># Default: treat as simple field-value pairs (exact match)</span>
		<span class="n">must_conditions</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="n">must_conditions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">FieldCondition</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">MatchValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)))</span>

		<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span><span class="n">must</span><span class="o">=</span><span class="n">must_conditions</span><span class="p">)</span>

	<span class="c1"># Context manager support for async operations</span>
	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Return self for use as async context manager.&quot;&quot;&quot;</span>
		<span class="c1"># Basic initialization is sync, async init must be called separately</span>
		<span class="c1"># Consider if automatic async_init here is desired, or keep it explicit</span>
		<span class="c1"># await self.async_init() # Example if auto-init is desired</span>
		<span class="k">return</span> <span class="bp">self</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aexit__</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Clean up resources when exiting the async context manager.&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h4 id="codemap.processor.ProcessingPipeline.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
	<span class="nf">repo_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">config_loader</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the processing pipeline synchronously.</p>
<p>Core async initialization is done via <code>async_init</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>repo_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the repository root. If None, it will be determined.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config_loader</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Application configuration loader. If None, a default one is created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>_progress</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Progress bar instance for initialization tracking.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>_task_id</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Task ID for the progress bar.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">repo_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Initialize the processing pipeline synchronously.</span>

<span class="sd">	Core async initialization is done via `async_init`.</span>

<span class="sd">	Args:</span>
<span class="sd">	    repo_path: Path to the repository root. If None, it will be determined.</span>
<span class="sd">	    config_loader: Application configuration loader. If None, a default one is created.</span>
<span class="sd">	    _progress: Progress bar instance for initialization tracking.</span>
<span class="sd">	    _task_id: Task ID for the progress bar.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_path</span> <span class="ow">or</span> <span class="n">find_project_root</span><span class="p">()</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">:</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Repository path could not be determined.&quot;</span>
		<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

	<span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span> <span class="o">=</span> <span class="n">config_loader</span> <span class="ow">or</span> <span class="n">ConfigLoader</span><span class="p">()</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Config loading failed or returned unexpected type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Failed to load a valid Config object.&quot;</span>
		<span class="k">raise</span> <span class="n">ConfigError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

	<span class="c1"># --- Initialize Shared Components (Synchronous) --- #</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">TreeSitterAnalyzer</span><span class="p">()</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">chunker</span> <span class="o">=</span> <span class="n">TreeSitterChunker</span><span class="p">(</span><span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">)</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">db_client</span> <span class="o">=</span> <span class="n">DatabaseClient</span><span class="p">()</span>

	<span class="c1"># --- Load Configuration --- #</span>
	<span class="c1"># Get embedding configuration</span>
	<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
	<span class="n">embedding_model</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model_name&quot;</span><span class="p">)</span>
	<span class="n">qdrant_dimension</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension&quot;</span><span class="p">)</span>
	<span class="n">distance_metric</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension_metric&quot;</span><span class="p">,</span> <span class="s2">&quot;cosine&quot;</span><span class="p">)</span>

	<span class="c1"># Make sure embedding_model_name is always a string</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;voyage-code-3&quot;</span>  <span class="c1"># Default</span>
	<span class="k">if</span> <span class="n">embedding_model</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embedding_model</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span> <span class="o">=</span> <span class="n">embedding_model</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">qdrant_dimension</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Missing qdrant dimension in configuration, using default 1024&quot;</span><span class="p">)</span>
		<span class="n">qdrant_dimension</span> <span class="o">=</span> <span class="mi">1024</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using embedding model: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="si">}</span><span class="s2"> with dimension: </span><span class="si">{</span><span class="n">qdrant_dimension</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

	<span class="c1"># Get Qdrant configuration</span>
	<span class="n">vector_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
	<span class="n">qdrant_location</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_location&quot;</span><span class="p">)</span>
	<span class="n">qdrant_collection</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_collection_name&quot;</span><span class="p">,</span> <span class="s2">&quot;codemap_vectors&quot;</span><span class="p">)</span>
	<span class="n">qdrant_url</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
	<span class="n">qdrant_api_key</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;api_key&quot;</span><span class="p">)</span>

	<span class="c1"># Convert distance metric string to enum</span>
	<span class="n">distance_enum</span> <span class="o">=</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Distance</span><span class="o">.</span><span class="n">COSINE</span>
	<span class="k">if</span> <span class="n">distance_metric</span> <span class="ow">and</span> <span class="n">distance_metric</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;COSINE&quot;</span><span class="p">,</span> <span class="s2">&quot;EUCLID&quot;</span><span class="p">,</span> <span class="s2">&quot;DOT&quot;</span><span class="p">]:</span>
		<span class="n">distance_enum</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">Distance</span><span class="p">,</span> <span class="n">distance_metric</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>

	<span class="c1"># Use URL if provided, otherwise use location (defaults to :memory: in QdrantManager)</span>
	<span class="n">qdrant_init_args</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s2">&quot;config_loader&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to QdrantManager</span>
		<span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="n">qdrant_collection</span><span class="p">,</span>
		<span class="s2">&quot;dim&quot;</span><span class="p">:</span> <span class="n">qdrant_dimension</span><span class="p">,</span>
		<span class="s2">&quot;distance&quot;</span><span class="p">:</span> <span class="n">distance_enum</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="n">qdrant_url</span><span class="p">:</span>
		<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_url</span>
		<span class="k">if</span> <span class="n">qdrant_api_key</span><span class="p">:</span>
			<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;api_key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_api_key</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring Qdrant client for URL: </span><span class="si">{</span><span class="n">qdrant_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">qdrant_location</span><span class="p">:</span>
		<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_location</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring Qdrant client for local path/memory: </span><span class="si">{</span><span class="n">qdrant_location</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="c1"># Let QdrantManager use its default (:memory:)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Configuring Qdrant client for default location (:memory:)&quot;</span><span class="p">)</span>

	<span class="c1"># --- Initialize Managers (Synchronous) --- #</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="n">QdrantManager</span><span class="p">(</span><span class="o">**</span><span class="n">qdrant_init_args</span><span class="p">)</span>

	<span class="c1"># Initialize VectorSynchronizer with the embedding model name and config_loader</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span> <span class="o">=</span> <span class="n">VectorSynchronizer</span><span class="p">(</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">,</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">,</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">chunker</span><span class="p">,</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">,</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="p">,</span>
		<span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to VectorSynchronizer</span>
	<span class="p">)</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ProcessingPipeline synchronous initialization complete for repo: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">False</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span> <span class="n">Watcher</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.ProcessingPipeline.repo_path" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">repo_path</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">repo_path</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(repo_path)">repo_path</span></span> <span class="ow">or</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;find_project_root&lt;/span&gt; (&lt;code&gt;codemap.utils.path_utils.find_project_root&lt;/code&gt;)" href="../utils/#codemap.utils.path_utils.find_project_root">find_project_root</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.ProcessingPipeline.config_loader" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_loader</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config_loader</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(config_loader)">config_loader</span></span> <span class="ow">or</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.ProcessingPipeline.config" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).config_loader.load_config">load_config</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.ProcessingPipeline.analyzer" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">analyzer</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">analyzer</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TreeSitterAnalyzer&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.TreeSitterAnalyzer&lt;/code&gt;)" href="#codemap.processor.tree_sitter.TreeSitterAnalyzer">TreeSitterAnalyzer</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.ProcessingPipeline.chunker" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">chunker</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">chunker</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TreeSitterChunker&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.chunking.TreeSitterChunker&lt;/code&gt;)" href="#codemap.processor.vector.chunking.TreeSitterChunker">TreeSitterChunker</a></span><span class="p">(</span><span class="n"><span title="codemap.processor.vector.chunking.TreeSitterChunker(config_loader)">config_loader</span></span><span class="o">=</span><span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).config_loader">config_loader</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.ProcessingPipeline.db_client" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">db_client</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">db_client</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;DatabaseClient&lt;/span&gt; (&lt;code&gt;codemap.db.client.DatabaseClient&lt;/code&gt;)" href="../db/#codemap.db.client.DatabaseClient">DatabaseClient</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.ProcessingPipeline.embedding_model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">embedding_model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">embedding_model_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;voyage-code-3&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.ProcessingPipeline.qdrant_manager" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">qdrant_manager</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;QdrantManager&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.qdrant_manager.QdrantManager&lt;/code&gt;)" href="#codemap.processor.vector.qdrant_manager.QdrantManager">QdrantManager</a></span><span class="p">(</span><span class="o">**</span><span class="n"><span title="qdrant_init_args">qdrant_init_args</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.ProcessingPipeline.vector_synchronizer" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">vector_synchronizer</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">vector_synchronizer</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;VectorSynchronizer&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.synchronizer.VectorSynchronizer&lt;/code&gt;)" href="#codemap.processor.vector.synchronizer.VectorSynchronizer">VectorSynchronizer</a></span><span class="p">(</span>
	<span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).repo_path">repo_path</span></span><span class="p">,</span>
	<span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).qdrant_manager">qdrant_manager</span></span><span class="p">,</span>
	<span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).chunker">chunker</span></span><span class="p">,</span>
	<span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).embedding_model_name">embedding_model_name</span></span><span class="p">,</span>
	<span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).analyzer">analyzer</span></span><span class="p">,</span>
	<span class="n"><span title="codemap.processor.vector.synchronizer.VectorSynchronizer(config_loader)">config_loader</span></span><span class="o">=</span><span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).config_loader">config_loader</span></span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.ProcessingPipeline.is_async_initialized" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">is_async_initialized</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.ProcessingPipeline.watcher" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">watcher</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">watcher</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;Watcher&lt;/span&gt; (&lt;code&gt;codemap.watcher.file_watcher.Watcher&lt;/code&gt;)" href="../watcher/#codemap.watcher.file_watcher.Watcher">Watcher</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="codemap.processor.ProcessingPipeline.async_init" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">async_init</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">async_init</span><span class="p">(</span>
	<span class="n">sync_on_init</span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
	<span class="n">progress</span><span class="p">:</span> <span class="n"><span title="rich.progress.Progress">Progress</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">task_id</span><span class="p">:</span> <span class="n"><span title="rich.progress.TaskID">TaskID</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Perform asynchronous initialization steps, including Qdrant connection and initial sync.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sync_on_init</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, run database synchronization during initialization.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress</code>
            </td>
            <td>
                  <code><span title="rich.progress.Progress">Progress</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rich Progress instance for unified status display.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>task_id</code>
            </td>
            <td>
                  <code><span title="rich.progress.TaskID">TaskID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rich TaskID for the main initialization/sync task.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_init</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span> <span class="n">sync_on_init</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="n">Progress</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="p">:</span> <span class="n">TaskID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Perform asynchronous initialization steps, including Qdrant connection and initial sync.</span>

<span class="sd">	Args:</span>
<span class="sd">	    sync_on_init: If True, run database synchronization during initialization.</span>
<span class="sd">	    progress: Optional rich Progress instance for unified status display.</span>
<span class="sd">	    task_id: Optional rich TaskID for the main initialization/sync task.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Pipeline already async initialized.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="n">init_description</span> <span class="o">=</span> <span class="s2">&quot;Initializing pipeline components...&quot;</span>
	<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
		<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">init_description</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="c1"># Get embedding configuration for Qdrant URL</span>
		<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
		<span class="n">qdrant_url</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>

		<span class="c1"># Check for Docker containers</span>
		<span class="k">if</span> <span class="n">qdrant_url</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Checking Docker containers...&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

			<span class="c1"># Only check Docker if we&#39;re using a URL that looks like localhost/127.0.0.1</span>
			<span class="k">if</span> <span class="s2">&quot;localhost&quot;</span> <span class="ow">in</span> <span class="n">qdrant_url</span> <span class="ow">or</span> <span class="s2">&quot;127.0.0.1&quot;</span> <span class="ow">in</span> <span class="n">qdrant_url</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Ensuring Qdrant container is running&quot;</span><span class="p">)</span>
				<span class="n">success</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ensure_qdrant_running</span><span class="p">(</span><span class="n">wait_for_health</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">qdrant_url</span><span class="o">=</span><span class="n">qdrant_url</span><span class="p">)</span>

				<span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docker check failed: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
						<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
							<span class="n">task_id</span><span class="p">,</span>
							<span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[yellow]Warning:[/yellow] </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">. Continuing anyway...&quot;</span><span class="p">,</span>
							<span class="n">completed</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
						<span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docker container check: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
						<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Docker containers ready.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

		<span class="c1"># Initialize the database client asynchronously</span>
		<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Initializing database client...&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Database client initialized successfully.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Database initialized.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
				<span class="sa">f</span><span class="s2">&quot;Database initialization failed (RuntimeError): </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Some features may not work properly.&quot;</span>
			<span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
					<span class="n">task_id</span><span class="p">,</span>
					<span class="n">description</span><span class="o">=</span><span class="s2">&quot;[yellow]Warning:[/yellow] Database initialization failed. Continuing anyway...&quot;</span><span class="p">,</span>
					<span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
				<span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">ConnectionError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database connection failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Some features may not work properly.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
					<span class="n">task_id</span><span class="p">,</span>
					<span class="n">description</span><span class="o">=</span><span class="s2">&quot;[yellow]Warning:[/yellow] Database connection failed. Continuing anyway...&quot;</span><span class="p">,</span>
					<span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
				<span class="p">)</span>

		<span class="c1"># Initialize Qdrant client (connects, creates collection if needed)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Qdrant manager initialized asynchronously.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Qdrant connected.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># This case should theoretically not happen if __init__ succeeded</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;QdrantManager was not initialized in __init__.&quot;</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">False</span>
		<span class="k">if</span> <span class="n">sync_on_init</span><span class="p">:</span>
			<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">True</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;`sync_on_init` is True. Performing index synchronization...&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># Optional: Could add a check here if Qdrant collection is empty</span>
			<span class="c1"># requires another call to qdrant_manager, e.g., get_count()</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Skipping sync on init as requested.&quot;</span><span class="p">)</span>
			<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">False</span>

		<span class="c1"># Set initialized flag *before* potentially long sync operation</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ProcessingPipeline async core components initialized.&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">needs_sync</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_databases</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>
			<span class="c1"># sync_databases handles final progress update on success/failure</span>
		<span class="k">elif</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
			<span class="c1"># Update progress if sync was skipped</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
				<span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[green]✓[/green] Pipeline initialized (sync skipped).&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span>
			<span class="p">)</span>

	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed during async initialization&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[red]Error:[/red] Init failed&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
		<span class="c1"># Optionally re-raise or handle specific exceptions</span>
		<span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="codemap.processor.ProcessingPipeline.stop" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">stop</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">stop</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Stops the pipeline and releases resources, including closing Qdrant connection.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Stops the pipeline and releases resources, including closing Qdrant connection.&quot;&quot;&quot;</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping ProcessingPipeline asynchronously...&quot;</span><span class="p">)</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore[assignment]</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Qdrant Manager already None during stop.&quot;</span><span class="p">)</span>

	<span class="c1"># Stop the watcher if it&#39;s running</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping file watcher...&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span>  <span class="c1"># Allow cancellation to propagate</span>
		<span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher task cancelled.&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher stopped.&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="c1"># Cleanup database client</span>
	<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;db_client&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="p">:</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Database client cleaned up.&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error during database client cleanup&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">ConnectionError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Connection error during database client cleanup&quot;</span><span class="p">)</span>

	<span class="c1"># Other cleanup if needed</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">False</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ProcessingPipeline stopped.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="codemap.processor.ProcessingPipeline.sync_databases" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">sync_databases</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sync_databases</span><span class="p">(</span>
	<span class="n">progress</span><span class="p">:</span> <span class="n"><span title="rich.progress.Progress">Progress</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">task_id</span><span class="p">:</span> <span class="n"><span title="rich.progress.TaskID">TaskID</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Asynchronously synchronize the Qdrant index with the Git repository state.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>progress</code>
            </td>
            <td>
                  <code><span title="rich.progress.Progress">Progress</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rich Progress instance for status updates.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>task_id</code>
            </td>
            <td>
                  <code><span title="rich.progress.TaskID">TaskID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rich TaskID for the main sync task.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sync_databases</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="n">Progress</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="p">:</span> <span class="n">TaskID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Asynchronously synchronize the Qdrant index with the Git repository state.</span>

<span class="sd">	Args:</span>
<span class="sd">	    progress: Optional rich Progress instance for status updates.</span>
<span class="sd">	    task_id: Optional rich TaskID for the main sync task.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot sync databases, async initialization not complete.&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[red]Error:[/red] Not initialized&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="c1"># Acquire lock only if not already held (for watcher calls)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="o">.</span><span class="n">locked</span><span class="p">():</span>
		<span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting vector index synchronization using VectorSynchronizer...&quot;</span><span class="p">)</span>
			<span class="c1"># VectorSynchronizer handles its own progress updates internally now</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span><span class="o">.</span><span class="n">sync_index</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>
			<span class="c1"># Final status message/logging is handled by sync_index</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="c1"># If lock is already held (likely by watcher call), just run it</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting vector index synchronization (lock already held)...&quot;</span><span class="p">)</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span><span class="o">.</span><span class="n">sync_index</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="codemap.processor.ProcessingPipeline.initialize_watcher" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">initialize_watcher</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">initialize_watcher</span><span class="p">(</span><span class="n">debounce_delay</span><span class="p">:</span> <span class="n"><span title="float">float</span></span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the file watcher.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>debounce_delay</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Delay in seconds before triggering sync after a file change.</p>
              </div>
            </td>
            <td>
                  <code>2.0</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_watcher</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debounce_delay</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Initialize the file watcher.</span>

<span class="sd">	Args:</span>
<span class="sd">	    debounce_delay: Delay in seconds before triggering sync after a file change.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot initialize watcher without a repository path.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Watcher already initialized.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initializing file watcher for path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="n">Watcher</span><span class="p">(</span>
			<span class="n">path_to_watch</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">,</span>
			<span class="n">on_change_callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sync_callback_wrapper</span><span class="p">,</span>  <span class="c1"># Use the lock wrapper</span>
			<span class="n">debounce_delay</span><span class="o">=</span><span class="n">debounce_delay</span><span class="p">,</span>
		<span class="p">)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher initialized.&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to initialize watcher&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unexpected error initializing watcher.&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="codemap.processor.ProcessingPipeline.start_watcher" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">start_watcher</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">start_watcher</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Start the file watcher in the background.</p>
<p><code>initialize_watcher</code> must be called first.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_watcher</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Start the file watcher in the background.</span>

<span class="sd">	`initialize_watcher` must be called first.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Watcher not initialized. Call initialize_watcher() first.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Watcher task is already running.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting file watcher task in the background...&quot;</span><span class="p">)</span>
	<span class="c1"># Create a task to run the watcher&#39;s start method asynchronously</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="o">.</span><span class="n">start</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="codemap.processor.ProcessingPipeline.semantic_search" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">semantic_search</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">semantic_search</span><span class="p">(</span>
	<span class="n">query</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">k</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">filter_params</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Perform semantic search for code chunks similar to the query using Qdrant.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The search query string.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>k</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of top similar results to retrieve.</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter_params</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional dictionary for filtering results. Supports:
- exact match: {"field": "value"} or {"match": {"field": "value"}}
- multiple values: {"match_any": {"field": ["value1", "value2"]}}
- range: {"range": {"field": {"gt": value, "lt": value}}}
- complex: {"must": [...], "should": [...], "must_not": [...]}</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of search result dictionaries (Qdrant ScoredPoint converted to dict),</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>or None if an error occurs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">semantic_search</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
	<span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">filter_params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Perform semantic search for code chunks similar to the query using Qdrant.</span>

<span class="sd">	Args:</span>
<span class="sd">	    query: The search query string.</span>
<span class="sd">	    k: The number of top similar results to retrieve.</span>
<span class="sd">	    filter_params: Optional dictionary for filtering results. Supports:</span>
<span class="sd">	        - exact match: {&quot;field&quot;: &quot;value&quot;} or {&quot;match&quot;: {&quot;field&quot;: &quot;value&quot;}}</span>
<span class="sd">	        - multiple values: {&quot;match_any&quot;: {&quot;field&quot;: [&quot;value1&quot;, &quot;value2&quot;]}}</span>
<span class="sd">	        - range: {&quot;range&quot;: {&quot;field&quot;: {&quot;gt&quot;: value, &quot;lt&quot;: value}}}</span>
<span class="sd">	        - complex: {&quot;must&quot;: [...], &quot;should&quot;: [...], &quot;must_not&quot;: [...]}</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A list of search result dictionaries (Qdrant ScoredPoint converted to dict),</span>
<span class="sd">	    or None if an error occurs.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;QdrantManager not available for semantic search.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Performing semantic search for query: &#39;</span><span class="si">%s</span><span class="s2">&#39;, k=</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="c1"># 1. Generate query embedding (must be async)</span>
		<span class="n">query_embedding</span> <span class="o">=</span> <span class="k">await</span> <span class="n">generate_embedding</span><span class="p">(</span>
			<span class="n">query</span><span class="p">,</span>
			<span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">,</span>
			<span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to generate_embedding</span>
		<span class="p">)</span>
		<span class="k">if</span> <span class="n">query_embedding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to generate embedding for query.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span>

		<span class="c1"># Convert to numpy array if needed by Qdrant client, though list is often fine</span>
		<span class="c1"># query_vector = np.array(query_embedding, dtype=np.float32)</span>
		<span class="n">query_vector</span> <span class="o">=</span> <span class="n">query_embedding</span>  <span class="c1"># Qdrant client typically accepts list[float]</span>

		<span class="c1"># 2. Process filter parameters to Qdrant filter format</span>
		<span class="n">query_filter</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="k">if</span> <span class="n">filter_params</span><span class="p">:</span>
			<span class="n">query_filter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_qdrant_filter</span><span class="p">(</span><span class="n">filter_params</span><span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using filter for search: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query_filter</span><span class="p">)</span>

		<span class="c1"># 3. Query Qdrant index (must be async)</span>
		<span class="n">search_results</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">ScoredPoint</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
			<span class="n">query_vector</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">query_filter</span><span class="o">=</span><span class="n">query_filter</span>
		<span class="p">)</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">search_results</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Qdrant search returned no results.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="p">[]</span>

		<span class="c1"># 4. Format results (convert ScoredPoint to dictionary)</span>
		<span class="n">formatted_results</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">scored_point</span> <span class="ow">in</span> <span class="n">search_results</span><span class="p">:</span>
			<span class="c1"># Convert Qdrant model to dict for consistent output</span>
			<span class="c1"># Include score (similarity) and payload</span>
			<span class="n">result_dict</span> <span class="o">=</span> <span class="p">{</span>
				<span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">scored_point</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>  <span class="c1"># Ensure ID is string</span>
				<span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="n">scored_point</span><span class="o">.</span><span class="n">score</span><span class="p">,</span>
				<span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="n">scored_point</span><span class="o">.</span><span class="n">payload</span><span class="p">,</span>
				<span class="c1"># Optionally include version if needed</span>
				<span class="c1"># &quot;version&quot;: scored_point.version,</span>
			<span class="p">}</span>
			<span class="n">formatted_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_dict</span><span class="p">)</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Semantic search found </span><span class="si">%d</span><span class="s2"> results.&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">formatted_results</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">formatted_results</span>

	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error during semantic search.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="codemap.processor.ProcessingPipeline.__aenter__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__aenter__</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__aenter__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nf"><span title="typing.Self">Self</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return self for use as async context manager.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Return self for use as async context manager.&quot;&quot;&quot;</span>
	<span class="c1"># Basic initialization is sync, async init must be called separately</span>
	<span class="c1"># Consider if automatic async_init here is desired, or keep it explicit</span>
	<span class="c1"># await self.async_init() # Example if auto-init is desired</span>
	<span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h4 id="codemap.processor.ProcessingPipeline.__aexit__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__aexit__</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__aexit__</span><span class="p">(</span>
	<span class="nf">exc_type</span><span class="p">:</span> <span class="n"><span title="type">type</span></span><span class="p">[</span><span class="n"><span title="BaseException">BaseException</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">exc_val</span><span class="p">:</span> <span class="n"><span title="BaseException">BaseException</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">exc_tb</span><span class="p">:</span> <span class="n"><span title="types.TracebackType">TracebackType</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Clean up resources when exiting the async context manager.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aexit__</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Clean up resources when exiting the async context manager.&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>










<div class="doc doc-object doc-module">



<h3 id="codemap.processor.lod" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">lod</span>


</h3>

    <div class="doc doc-contents ">

        <p>Level of Detail (LOD) implementation for code analysis.</p>
<p>This module provides functionality for generating different levels of detail
from source code using tree-sitter analysis. The LOD approach provides a hierarchical
view of code, from high-level entity names to detailed implementations.</p>
<p>LOD levels:
- LOD1: Just entity names and types in files (classes, functions, etc.)
- LOD2: Entity names with docstrings
- LOD3: Entity names, docstrings, and signatures
- LOD4: Complete entity implementations</p>









  <div class="doc doc-children">



















































<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.lod.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-class">



<h4 id="codemap.processor.lod.LODLevel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LODLevel</span>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Enumeration of Level of Detail levels.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/lod.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LODLevel</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Enumeration of Level of Detail levels.&quot;&quot;&quot;</span>

	<span class="n">SIGNATURES</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># Top-level entity names, docstrings, and signatures</span>
	<span class="n">STRUCTURE</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># All entity signatures, indented structure</span>
	<span class="n">DOCS</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># Level 2 + Docstrings for all entities</span>
	<span class="n">FULL</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c1"># Level 3 + Full implementation content</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODLevel.SIGNATURES" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">SIGNATURES</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">SIGNATURES</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODLevel.STRUCTURE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">STRUCTURE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">STRUCTURE</span> <span class="o">=</span> <span class="mi">2</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODLevel.DOCS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">DOCS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">DOCS</span> <span class="o">=</span> <span class="mi">3</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODLevel.FULL" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">FULL</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">FULL</span> <span class="o">=</span> <span class="mi">4</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h4 id="codemap.processor.lod.LODEntity" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LODEntity</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">


        <p>Represents a code entity at a specific level of detail.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/lod.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">LODEntity</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Represents a code entity at a specific level of detail.&quot;&quot;&quot;</span>

	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Name of the entity.&quot;&quot;&quot;</span>

	<span class="n">entity_type</span><span class="p">:</span> <span class="n">EntityType</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Type of entity (class, function, etc.).&quot;&quot;&quot;</span>

	<span class="n">start_line</span><span class="p">:</span> <span class="nb">int</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Starting line number (1-indexed).&quot;&quot;&quot;</span>

	<span class="n">end_line</span><span class="p">:</span> <span class="nb">int</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Ending line number (1-indexed).&quot;&quot;&quot;</span>

	<span class="n">docstring</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Entity docstring, if available.&quot;&quot;&quot;</span>

	<span class="n">signature</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Entity signature (e.g., function parameters), if available.&quot;&quot;&quot;</span>

	<span class="n">content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Complete entity content/implementation.&quot;&quot;&quot;</span>

	<span class="n">children</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">LODEntity</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Child entities contained within this entity.&quot;&quot;&quot;</span>

	<span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Programming language of the entity.&quot;&quot;&quot;</span>

	<span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Additional metadata about the entity.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h5 id="codemap.processor.lod.LODEntity.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
	<span class="nf">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">entity_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span><span class="p">,</span>
	<span class="n">start_line</span><span class="p">:</span> <span class="n"><span title="int">int</span></span><span class="p">,</span>
	<span class="n">end_line</span><span class="p">:</span> <span class="n"><span title="int">int</span></span><span class="p">,</span>
	<span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
	<span class="n">signature</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
	<span class="n">content</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
	<span class="n">children</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODEntity&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODEntity&lt;/code&gt;)" href="#codemap.processor.lod.LODEntity">LODEntity</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="list">list</span></span><span class="p">(),</span>
	<span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
	<span class="n">metadata</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="dict">dict</span></span><span class="p">(),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">


    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODEntity.name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Name of the entity.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODEntity.entity_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">entity_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">entity_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Type of entity (class, function, etc.).</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODEntity.start_line" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">start_line</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">start_line</span><span class="p">:</span> <span class="n"><span title="int">int</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Starting line number (1-indexed).</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODEntity.end_line" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">end_line</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">end_line</span><span class="p">:</span> <span class="n"><span title="int">int</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Ending line number (1-indexed).</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODEntity.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Entity docstring, if available.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODEntity.signature" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">signature</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">signature</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Entity signature (e.g., function parameters), if available.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODEntity.content" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">content</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">content</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Complete entity content/implementation.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODEntity.children" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">children</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">children</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODEntity&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODEntity&lt;/code&gt;)" href="#codemap.processor.lod.LODEntity">LODEntity</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="dataclasses.field">field</span></span><span class="p">(</span><span class="n"><span title="dataclasses.field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><span title="list">list</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Child entities contained within this entity.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODEntity.language" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">language</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Programming language of the entity.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODEntity.metadata" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">metadata</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">metadata</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="dataclasses.field">field</span></span><span class="p">(</span><span class="n"><span title="dataclasses.field(default_factory)">default_factory</span></span><span class="o">=</span><span class="n"><span title="dict">dict</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Additional metadata about the entity.</p>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h4 id="codemap.processor.lod.LODGenerator" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LODGenerator</span>


</h4>


    <div class="doc doc-contents ">


        <p>Generates different levels of detail from source code.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/lod.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LODGenerator</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Generates different levels of detail from source code.&quot;&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Initialize the LOD generator.&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">TreeSitterAnalyzer</span><span class="p">()</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">generate_lod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">LODLevel</span> <span class="o">=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LODEntity</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Generate LOD representation for a file.</span>

<span class="sd">		Args:</span>
<span class="sd">		    file_path: Path to the file to analyze</span>
<span class="sd">		    level: Level of detail to generate (default changed to STRUCTURE)</span>

<span class="sd">		Returns:</span>
<span class="sd">		    LODEntity representing the file, or None if analysis failed</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Read file content</span>
		<span class="n">content</span> <span class="o">=</span> <span class="n">read_file_content</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">content</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not read content from </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span>

		<span class="c1"># Analyze file with tree-sitter</span>
		<span class="n">analysis_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">analyze_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">analysis_result</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to analyze </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span>

		<span class="c1"># Convert analysis result to LOD, passing the file_path</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_to_lod</span><span class="p">(</span><span class="n">analysis_result</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_convert_to_lod</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span> <span class="n">analysis_result</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">level</span><span class="p">:</span> <span class="n">LODLevel</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LODEntity</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Convert tree-sitter analysis to LOD format.</span>

<span class="sd">		Args:</span>
<span class="sd">		    analysis_result: Tree-sitter analysis result</span>
<span class="sd">		    level: Level of detail to generate</span>
<span class="sd">		    file_path: Path to the file being analyzed</span>

<span class="sd">		Returns:</span>
<span class="sd">		    LODEntity representation</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">entity_type_str</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;UNKNOWN&quot;</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">entity_type</span> <span class="o">=</span> <span class="n">EntityType</span><span class="p">[</span><span class="n">entity_type_str</span><span class="p">]</span>
		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
			<span class="n">entity_type</span> <span class="o">=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span>

		<span class="n">location</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;location&quot;</span><span class="p">,</span> <span class="p">{})</span>
		<span class="n">start_line</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start_line&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">end_line</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;end_line&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

		<span class="c1"># Create the entity with appropriate level of detail</span>
		<span class="n">entity</span> <span class="o">=</span> <span class="n">LODEntity</span><span class="p">(</span>
			<span class="n">name</span><span class="o">=</span><span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
			<span class="n">entity_type</span><span class="o">=</span><span class="n">entity_type</span><span class="p">,</span>
			<span class="n">start_line</span><span class="o">=</span><span class="n">start_line</span><span class="p">,</span>
			<span class="n">end_line</span><span class="o">=</span><span class="n">end_line</span><span class="p">,</span>
			<span class="n">language</span><span class="o">=</span><span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
		<span class="p">)</span>

		<span class="c1"># Add file_path to metadata for top-level entities</span>
		<span class="k">if</span> <span class="n">file_path</span><span class="p">:</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;file_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

		<span class="c1"># Add details based on LOD level (updated comparisons)</span>
		<span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">DOCS</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">docstring</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docstring&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

		<span class="c1"># Signature is needed for SIGNATURES (1), STRUCTURE (2), DOCS (3), FULL (4)</span>
		<span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">SIGNATURES</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
			<span class="c1"># Extract signature from content if available</span>
			<span class="n">content</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_signature</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">entity_type</span><span class="p">,</span> <span class="n">entity</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>

		<span class="c1"># Content is needed for FULL (4)</span>
		<span class="k">if</span> <span class="n">level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="o">.</span><span class="n">value</span> <span class="ow">or</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">COMMENT</span><span class="p">:</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

		<span class="c1"># Process children recursively (without passing file_path)</span>
		<span class="n">children</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;children&quot;</span><span class="p">,</span> <span class="p">[])</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children</span><span class="p">:</span>
			<span class="n">child_entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_to_lod</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_entity</span><span class="p">)</span>

		<span class="c1"># Add any additional metadata</span>
		<span class="k">if</span> <span class="s2">&quot;dependencies&quot;</span> <span class="ow">in</span> <span class="n">analysis_result</span><span class="p">:</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;dependencies&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="p">[</span><span class="s2">&quot;dependencies&quot;</span><span class="p">]</span>
		<span class="k">if</span> <span class="s2">&quot;calls&quot;</span> <span class="ow">in</span> <span class="n">analysis_result</span><span class="p">:</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;calls&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">analysis_result</span><span class="p">[</span><span class="s2">&quot;calls&quot;</span><span class="p">]</span>

		<span class="k">return</span> <span class="n">entity</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_extract_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">entity_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">,</span> <span class="n">_language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract function/method signature from content.</span>

<span class="sd">		This is a simple implementation; ideally, the language-specific handlers</span>
<span class="sd">		should provide this functionality.</span>

<span class="sd">		Args:</span>
<span class="sd">		    content: Full entity content</span>
<span class="sd">		    entity_type: Type of entity</span>
<span class="sd">		    _language: Programming language (unused currently)</span>

<span class="sd">		Returns:</span>
<span class="sd">		    Signature string</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">content</span><span class="p">:</span>
			<span class="k">return</span> <span class="s2">&quot;&quot;</span>

		<span class="c1"># For functions and methods, extract the first line (declaration)</span>
		<span class="k">if</span> <span class="n">entity_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">INTERFACE</span><span class="p">]:</span>
			<span class="n">lines</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">lines</span><span class="p">:</span>
				<span class="c1"># Return first line without trailing characters</span>
				<span class="k">return</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;:{&quot;</span><span class="p">)</span>

		<span class="k">return</span> <span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h5 id="codemap.processor.lod.LODGenerator.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the LOD generator.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Initialize the LOD generator.&quot;&quot;&quot;</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">TreeSitterAnalyzer</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.lod.LODGenerator.analyzer" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">analyzer</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">analyzer</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TreeSitterAnalyzer&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer&lt;/code&gt;)" href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer">TreeSitterAnalyzer</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.lod.LODGenerator.generate_lod" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">generate_lod</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_lod</span><span class="p">(</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODLevel&lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel">LODLevel</a></span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-attribute-name&quot;&gt;STRUCTURE&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
      &lt;small class=&quot;doc doc-label doc-label-instance-attribute&quot;&gt;&lt;code&gt;instance-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel.STRUCTURE&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel.STRUCTURE">STRUCTURE</a></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODEntity&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODEntity&lt;/code&gt;)" href="#codemap.processor.lod.LODEntity">LODEntity</a></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generate LOD representation for a file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the file to analyze</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>level</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODLevel&lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel">LODLevel</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Level of detail to generate (default changed to STRUCTURE)</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-attribute-name&quot;&gt;STRUCTURE&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
      &lt;small class=&quot;doc doc-label doc-label-instance-attribute&quot;&gt;&lt;code&gt;instance-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel.STRUCTURE&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel.STRUCTURE">STRUCTURE</a></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODEntity&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODEntity&lt;/code&gt;)" href="#codemap.processor.lod.LODEntity">LODEntity</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>LODEntity representing the file, or None if analysis failed</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_lod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">LODLevel</span> <span class="o">=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">STRUCTURE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LODEntity</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Generate LOD representation for a file.</span>

<span class="sd">	Args:</span>
<span class="sd">	    file_path: Path to the file to analyze</span>
<span class="sd">	    level: Level of detail to generate (default changed to STRUCTURE)</span>

<span class="sd">	Returns:</span>
<span class="sd">	    LODEntity representing the file, or None if analysis failed</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Read file content</span>
	<span class="n">content</span> <span class="o">=</span> <span class="n">read_file_content</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">content</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not read content from </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="c1"># Analyze file with tree-sitter</span>
	<span class="n">analysis_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">analyze_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">analysis_result</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to analyze </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="c1"># Convert analysis result to LOD, passing the file_path</span>
	<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_to_lod</span><span class="p">(</span><span class="n">analysis_result</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="codemap.processor.pipeline" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">pipeline</span>


</h3>

    <div class="doc doc-contents ">

        <p>Unified pipeline for CodeMap data processing, synchronization, and retrieval.</p>
<p>This module defines the <code>ProcessingPipeline</code>, which acts as the central orchestrator
for managing and interacting with the HNSW vector database. It handles initialization,
synchronization with the Git repository, and provides semantic search capabilities.</p>









  <div class="doc doc-children">































































































<div class="doc doc-object doc-attribute">



<h4 id="codemap.processor.pipeline.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-class">



<h4 id="codemap.processor.pipeline.ProcessingPipeline" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ProcessingPipeline</span>


</h4>


    <div class="doc doc-contents ">


        <p>Orchestrates data processing, synchronization, and retrieval for CodeMap using Qdrant.</p>
<p>Manages connections and interactions with the Qdrant vector database,
ensuring it is synchronized with the Git repository state. Provides
methods for semantic search. Uses asyncio for database and embedding
operations.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ProcessingPipeline</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Orchestrates data processing, synchronization, and retrieval for CodeMap using Qdrant.</span>

<span class="sd">	Manages connections and interactions with the Qdrant vector database,</span>
<span class="sd">	ensuring it is synchronized with the Git repository state. Provides</span>
<span class="sd">	methods for semantic search. Uses asyncio for database and embedding</span>
<span class="sd">	operations.</span>

<span class="sd">	&quot;&quot;&quot;</span>

	<span class="c1"># Note: __init__ cannot be async directly. Initialization happens in an async method.</span>
	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">repo_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize the processing pipeline synchronously.</span>

<span class="sd">		Core async initialization is done via `async_init`.</span>

<span class="sd">		Args:</span>
<span class="sd">		    repo_path: Path to the repository root. If None, it will be determined.</span>
<span class="sd">		    config_loader: Application configuration loader. If None, a default one is created.</span>
<span class="sd">		    _progress: Progress bar instance for initialization tracking.</span>
<span class="sd">		    _task_id: Task ID for the progress bar.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_path</span> <span class="ow">or</span> <span class="n">find_project_root</span><span class="p">()</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Repository path could not be determined.&quot;</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span> <span class="o">=</span> <span class="n">config_loader</span> <span class="ow">or</span> <span class="n">ConfigLoader</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Config loading failed or returned unexpected type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Failed to load a valid Config object.&quot;</span>
			<span class="k">raise</span> <span class="n">ConfigError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="c1"># --- Initialize Shared Components (Synchronous) --- #</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">TreeSitterAnalyzer</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">chunker</span> <span class="o">=</span> <span class="n">TreeSitterChunker</span><span class="p">(</span><span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">db_client</span> <span class="o">=</span> <span class="n">DatabaseClient</span><span class="p">()</span>

		<span class="c1"># --- Load Configuration --- #</span>
		<span class="c1"># Get embedding configuration</span>
		<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
		<span class="n">embedding_model</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model_name&quot;</span><span class="p">)</span>
		<span class="n">qdrant_dimension</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension&quot;</span><span class="p">)</span>
		<span class="n">distance_metric</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension_metric&quot;</span><span class="p">,</span> <span class="s2">&quot;cosine&quot;</span><span class="p">)</span>

		<span class="c1"># Make sure embedding_model_name is always a string</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;voyage-code-3&quot;</span>  <span class="c1"># Default</span>
		<span class="k">if</span> <span class="n">embedding_model</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embedding_model</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span> <span class="o">=</span> <span class="n">embedding_model</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">qdrant_dimension</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Missing qdrant dimension in configuration, using default 1024&quot;</span><span class="p">)</span>
			<span class="n">qdrant_dimension</span> <span class="o">=</span> <span class="mi">1024</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using embedding model: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="si">}</span><span class="s2"> with dimension: </span><span class="si">{</span><span class="n">qdrant_dimension</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

		<span class="c1"># Get Qdrant configuration</span>
		<span class="n">vector_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
		<span class="n">qdrant_location</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_location&quot;</span><span class="p">)</span>
		<span class="n">qdrant_collection</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_collection_name&quot;</span><span class="p">,</span> <span class="s2">&quot;codemap_vectors&quot;</span><span class="p">)</span>
		<span class="n">qdrant_url</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
		<span class="n">qdrant_api_key</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;api_key&quot;</span><span class="p">)</span>

		<span class="c1"># Convert distance metric string to enum</span>
		<span class="n">distance_enum</span> <span class="o">=</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Distance</span><span class="o">.</span><span class="n">COSINE</span>
		<span class="k">if</span> <span class="n">distance_metric</span> <span class="ow">and</span> <span class="n">distance_metric</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;COSINE&quot;</span><span class="p">,</span> <span class="s2">&quot;EUCLID&quot;</span><span class="p">,</span> <span class="s2">&quot;DOT&quot;</span><span class="p">]:</span>
			<span class="n">distance_enum</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">Distance</span><span class="p">,</span> <span class="n">distance_metric</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>

		<span class="c1"># Use URL if provided, otherwise use location (defaults to :memory: in QdrantManager)</span>
		<span class="n">qdrant_init_args</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s2">&quot;config_loader&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to QdrantManager</span>
			<span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="n">qdrant_collection</span><span class="p">,</span>
			<span class="s2">&quot;dim&quot;</span><span class="p">:</span> <span class="n">qdrant_dimension</span><span class="p">,</span>
			<span class="s2">&quot;distance&quot;</span><span class="p">:</span> <span class="n">distance_enum</span><span class="p">,</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="n">qdrant_url</span><span class="p">:</span>
			<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_url</span>
			<span class="k">if</span> <span class="n">qdrant_api_key</span><span class="p">:</span>
				<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;api_key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_api_key</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring Qdrant client for URL: </span><span class="si">{</span><span class="n">qdrant_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">qdrant_location</span><span class="p">:</span>
			<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_location</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring Qdrant client for local path/memory: </span><span class="si">{</span><span class="n">qdrant_location</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># Let QdrantManager use its default (:memory:)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Configuring Qdrant client for default location (:memory:)&quot;</span><span class="p">)</span>

		<span class="c1"># --- Initialize Managers (Synchronous) --- #</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="n">QdrantManager</span><span class="p">(</span><span class="o">**</span><span class="n">qdrant_init_args</span><span class="p">)</span>

		<span class="c1"># Initialize VectorSynchronizer with the embedding model name and config_loader</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span> <span class="o">=</span> <span class="n">VectorSynchronizer</span><span class="p">(</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">chunker</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="p">,</span>
			<span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to VectorSynchronizer</span>
		<span class="p">)</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ProcessingPipeline synchronous initialization complete for repo: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">False</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span> <span class="n">Watcher</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_init</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span> <span class="n">sync_on_init</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="n">Progress</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="p">:</span> <span class="n">TaskID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Perform asynchronous initialization steps, including Qdrant connection and initial sync.</span>

<span class="sd">		Args:</span>
<span class="sd">		    sync_on_init: If True, run database synchronization during initialization.</span>
<span class="sd">		    progress: Optional rich Progress instance for unified status display.</span>
<span class="sd">		    task_id: Optional rich TaskID for the main initialization/sync task.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Pipeline already async initialized.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="n">init_description</span> <span class="o">=</span> <span class="s2">&quot;Initializing pipeline components...&quot;</span>
		<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">init_description</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># Get embedding configuration for Qdrant URL</span>
			<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
			<span class="n">qdrant_url</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>

			<span class="c1"># Check for Docker containers</span>
			<span class="k">if</span> <span class="n">qdrant_url</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Checking Docker containers...&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

				<span class="c1"># Only check Docker if we&#39;re using a URL that looks like localhost/127.0.0.1</span>
				<span class="k">if</span> <span class="s2">&quot;localhost&quot;</span> <span class="ow">in</span> <span class="n">qdrant_url</span> <span class="ow">or</span> <span class="s2">&quot;127.0.0.1&quot;</span> <span class="ow">in</span> <span class="n">qdrant_url</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Ensuring Qdrant container is running&quot;</span><span class="p">)</span>
					<span class="n">success</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ensure_qdrant_running</span><span class="p">(</span><span class="n">wait_for_health</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">qdrant_url</span><span class="o">=</span><span class="n">qdrant_url</span><span class="p">)</span>

					<span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docker check failed: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
						<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
							<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
								<span class="n">task_id</span><span class="p">,</span>
								<span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[yellow]Warning:[/yellow] </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">. Continuing anyway...&quot;</span><span class="p">,</span>
								<span class="n">completed</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
							<span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docker container check: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
						<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
							<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Docker containers ready.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

			<span class="c1"># Initialize the database client asynchronously</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Initializing database client...&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

			<span class="k">try</span><span class="p">:</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Database client initialized successfully.&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Database initialized.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
					<span class="sa">f</span><span class="s2">&quot;Database initialization failed (RuntimeError): </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Some features may not work properly.&quot;</span>
				<span class="p">)</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
						<span class="n">task_id</span><span class="p">,</span>
						<span class="n">description</span><span class="o">=</span><span class="s2">&quot;[yellow]Warning:[/yellow] Database initialization failed. Continuing anyway...&quot;</span><span class="p">,</span>
						<span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
					<span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">ConnectionError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database connection failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Some features may not work properly.&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
						<span class="n">task_id</span><span class="p">,</span>
						<span class="n">description</span><span class="o">=</span><span class="s2">&quot;[yellow]Warning:[/yellow] Database connection failed. Continuing anyway...&quot;</span><span class="p">,</span>
						<span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
					<span class="p">)</span>

			<span class="c1"># Initialize Qdrant client (connects, creates collection if needed)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Qdrant manager initialized asynchronously.&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Qdrant connected.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># This case should theoretically not happen if __init__ succeeded</span>
				<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;QdrantManager was not initialized in __init__.&quot;</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
				<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

			<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">False</span>
			<span class="k">if</span> <span class="n">sync_on_init</span><span class="p">:</span>
				<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">True</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;`sync_on_init` is True. Performing index synchronization...&quot;</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># Optional: Could add a check here if Qdrant collection is empty</span>
				<span class="c1"># requires another call to qdrant_manager, e.g., get_count()</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Skipping sync on init as requested.&quot;</span><span class="p">)</span>
				<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">False</span>

			<span class="c1"># Set initialized flag *before* potentially long sync operation</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">True</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ProcessingPipeline async core components initialized.&quot;</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">needs_sync</span><span class="p">:</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_databases</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>
				<span class="c1"># sync_databases handles final progress update on success/failure</span>
			<span class="k">elif</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="c1"># Update progress if sync was skipped</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
					<span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[green]✓[/green] Pipeline initialized (sync skipped).&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span>
				<span class="p">)</span>

		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed during async initialization&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[red]Error:[/red] Init failed&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
			<span class="c1"># Optionally re-raise or handle specific exceptions</span>
			<span class="k">raise</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Stops the pipeline and releases resources, including closing Qdrant connection.&quot;&quot;&quot;</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping ProcessingPipeline asynchronously...&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore[assignment]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Qdrant Manager already None during stop.&quot;</span><span class="p">)</span>

		<span class="c1"># Stop the watcher if it&#39;s running</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping file watcher...&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span>  <span class="c1"># Allow cancellation to propagate</span>
			<span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher task cancelled.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher stopped.&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="o">=</span> <span class="kc">None</span>

		<span class="c1"># Cleanup database client</span>
		<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;db_client&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Database client cleaned up.&quot;</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error during database client cleanup&quot;</span><span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">ConnectionError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Connection error during database client cleanup&quot;</span><span class="p">)</span>

		<span class="c1"># Other cleanup if needed</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">False</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ProcessingPipeline stopped.&quot;</span><span class="p">)</span>

	<span class="c1"># --- Synchronization --- #</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_sync_callback_wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Async wrapper for the sync callback to handle locking.&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="o">.</span><span class="n">locked</span><span class="p">():</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Sync already in progress, skipping watcher-triggered sync.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Watcher triggered sync starting...&quot;</span><span class="p">)</span>
			<span class="c1"># Run sync without progress bars from watcher</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_databases</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Watcher triggered sync finished.&quot;</span><span class="p">)</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sync_databases</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="n">Progress</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="p">:</span> <span class="n">TaskID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Asynchronously synchronize the Qdrant index with the Git repository state.</span>

<span class="sd">		Args:</span>
<span class="sd">		    progress: Optional rich Progress instance for status updates.</span>
<span class="sd">		    task_id: Optional rich TaskID for the main sync task.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot sync databases, async initialization not complete.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[red]Error:[/red] Not initialized&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="c1"># Acquire lock only if not already held (for watcher calls)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="o">.</span><span class="n">locked</span><span class="p">():</span>
			<span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting vector index synchronization using VectorSynchronizer...&quot;</span><span class="p">)</span>
				<span class="c1"># VectorSynchronizer handles its own progress updates internally now</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span><span class="o">.</span><span class="n">sync_index</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>
				<span class="c1"># Final status message/logging is handled by sync_index</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># If lock is already held (likely by watcher call), just run it</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting vector index synchronization (lock already held)...&quot;</span><span class="p">)</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span><span class="o">.</span><span class="n">sync_index</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>

	<span class="c1"># --- Watcher Methods --- #</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">initialize_watcher</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debounce_delay</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize the file watcher.</span>

<span class="sd">		Args:</span>
<span class="sd">		    debounce_delay: Delay in seconds before triggering sync after a file change.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot initialize watcher without a repository path.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Watcher already initialized.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initializing file watcher for path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="n">Watcher</span><span class="p">(</span>
				<span class="n">path_to_watch</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">,</span>
				<span class="n">on_change_callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sync_callback_wrapper</span><span class="p">,</span>  <span class="c1"># Use the lock wrapper</span>
				<span class="n">debounce_delay</span><span class="o">=</span><span class="n">debounce_delay</span><span class="p">,</span>
			<span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher initialized.&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to initialize watcher&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unexpected error initializing watcher.&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_watcher</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Start the file watcher in the background.</span>

<span class="sd">		`initialize_watcher` must be called first.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Watcher not initialized. Call initialize_watcher() first.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Watcher task is already running.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting file watcher task in the background...&quot;</span><span class="p">)</span>
		<span class="c1"># Create a task to run the watcher&#39;s start method asynchronously</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="o">.</span><span class="n">start</span><span class="p">())</span>
		<span class="c1"># We don&#39;t await the task here; it runs independently.</span>
		<span class="c1"># Error handling within the watcher&#39;s start method logs issues.</span>

	<span class="c1"># --- Retrieval Methods --- #</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">semantic_search</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
		<span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="n">filter_params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Perform semantic search for code chunks similar to the query using Qdrant.</span>

<span class="sd">		Args:</span>
<span class="sd">		    query: The search query string.</span>
<span class="sd">		    k: The number of top similar results to retrieve.</span>
<span class="sd">		    filter_params: Optional dictionary for filtering results. Supports:</span>
<span class="sd">		        - exact match: {&quot;field&quot;: &quot;value&quot;} or {&quot;match&quot;: {&quot;field&quot;: &quot;value&quot;}}</span>
<span class="sd">		        - multiple values: {&quot;match_any&quot;: {&quot;field&quot;: [&quot;value1&quot;, &quot;value2&quot;]}}</span>
<span class="sd">		        - range: {&quot;range&quot;: {&quot;field&quot;: {&quot;gt&quot;: value, &quot;lt&quot;: value}}}</span>
<span class="sd">		        - complex: {&quot;must&quot;: [...], &quot;should&quot;: [...], &quot;must_not&quot;: [...]}</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A list of search result dictionaries (Qdrant ScoredPoint converted to dict),</span>
<span class="sd">		    or None if an error occurs.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;QdrantManager not available for semantic search.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Performing semantic search for query: &#39;</span><span class="si">%s</span><span class="s2">&#39;, k=</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># 1. Generate query embedding (must be async)</span>
			<span class="n">query_embedding</span> <span class="o">=</span> <span class="k">await</span> <span class="n">generate_embedding</span><span class="p">(</span>
				<span class="n">query</span><span class="p">,</span>
				<span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">,</span>
				<span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to generate_embedding</span>
			<span class="p">)</span>
			<span class="k">if</span> <span class="n">query_embedding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to generate embedding for query.&quot;</span><span class="p">)</span>
				<span class="k">return</span> <span class="kc">None</span>

			<span class="c1"># Convert to numpy array if needed by Qdrant client, though list is often fine</span>
			<span class="c1"># query_vector = np.array(query_embedding, dtype=np.float32)</span>
			<span class="n">query_vector</span> <span class="o">=</span> <span class="n">query_embedding</span>  <span class="c1"># Qdrant client typically accepts list[float]</span>

			<span class="c1"># 2. Process filter parameters to Qdrant filter format</span>
			<span class="n">query_filter</span> <span class="o">=</span> <span class="kc">None</span>
			<span class="k">if</span> <span class="n">filter_params</span><span class="p">:</span>
				<span class="n">query_filter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_qdrant_filter</span><span class="p">(</span><span class="n">filter_params</span><span class="p">)</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using filter for search: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query_filter</span><span class="p">)</span>

			<span class="c1"># 3. Query Qdrant index (must be async)</span>
			<span class="n">search_results</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">ScoredPoint</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
				<span class="n">query_vector</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">query_filter</span><span class="o">=</span><span class="n">query_filter</span>
			<span class="p">)</span>

			<span class="k">if</span> <span class="ow">not</span> <span class="n">search_results</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Qdrant search returned no results.&quot;</span><span class="p">)</span>
				<span class="k">return</span> <span class="p">[]</span>

			<span class="c1"># 4. Format results (convert ScoredPoint to dictionary)</span>
			<span class="n">formatted_results</span> <span class="o">=</span> <span class="p">[]</span>
			<span class="k">for</span> <span class="n">scored_point</span> <span class="ow">in</span> <span class="n">search_results</span><span class="p">:</span>
				<span class="c1"># Convert Qdrant model to dict for consistent output</span>
				<span class="c1"># Include score (similarity) and payload</span>
				<span class="n">result_dict</span> <span class="o">=</span> <span class="p">{</span>
					<span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">scored_point</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>  <span class="c1"># Ensure ID is string</span>
					<span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="n">scored_point</span><span class="o">.</span><span class="n">score</span><span class="p">,</span>
					<span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="n">scored_point</span><span class="o">.</span><span class="n">payload</span><span class="p">,</span>
					<span class="c1"># Optionally include version if needed</span>
					<span class="c1"># &quot;version&quot;: scored_point.version,</span>
				<span class="p">}</span>
				<span class="n">formatted_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_dict</span><span class="p">)</span>

			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Semantic search found </span><span class="si">%d</span><span class="s2"> results.&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">formatted_results</span><span class="p">))</span>
			<span class="k">return</span> <span class="n">formatted_results</span>

		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error during semantic search.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_build_qdrant_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Convert filter parameters to Qdrant filter format.</span>

<span class="sd">		Args:</span>
<span class="sd">		    filter_params: Dictionary of filter parameters</span>

<span class="sd">		Returns:</span>
<span class="sd">		    Qdrant filter object</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># If already a proper Qdrant filter, return as is</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filter_params</span><span class="p">,</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">):</span>
			<span class="k">return</span> <span class="n">filter_params</span>

		<span class="c1"># Check for clause-based filter (must, should, must_not)</span>
		<span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="n">filter_params</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;must&quot;</span><span class="p">,</span> <span class="s2">&quot;should&quot;</span><span class="p">,</span> <span class="s2">&quot;must_not&quot;</span><span class="p">]):</span>
			<span class="n">filter_obj</span> <span class="o">=</span> <span class="p">{}</span>

			<span class="c1"># Process must conditions (AND)</span>
			<span class="k">if</span> <span class="s2">&quot;must&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
				<span class="n">filter_obj</span><span class="p">[</span><span class="s2">&quot;must&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_build_qdrant_filter</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span> <span class="k">for</span> <span class="n">cond</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;must&quot;</span><span class="p">]]</span>

			<span class="c1"># Process should conditions (OR)</span>
			<span class="k">if</span> <span class="s2">&quot;should&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
				<span class="n">filter_obj</span><span class="p">[</span><span class="s2">&quot;should&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_build_qdrant_filter</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span> <span class="k">for</span> <span class="n">cond</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;should&quot;</span><span class="p">]]</span>

			<span class="c1"># Process must_not conditions (NOT)</span>
			<span class="k">if</span> <span class="s2">&quot;must_not&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
				<span class="n">filter_obj</span><span class="p">[</span><span class="s2">&quot;must_not&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_build_qdrant_filter</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span> <span class="k">for</span> <span class="n">cond</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;must_not&quot;</span><span class="p">]]</span>

			<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span><span class="o">**</span><span class="n">filter_obj</span><span class="p">)</span>

		<span class="c1"># Check for condition-based filter (match, range, etc.)</span>
		<span class="k">if</span> <span class="s2">&quot;match&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
			<span class="n">field</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;match&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
			<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span>
				<span class="n">must</span><span class="o">=</span><span class="p">[</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">FieldCondition</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">MatchValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">))]</span>
			<span class="p">)</span>

		<span class="k">if</span> <span class="s2">&quot;match_any&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
			<span class="n">field</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;match_any&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
			<span class="c1"># For string values</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">values</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">values</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))):</span>
				<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span>
					<span class="n">should</span><span class="o">=</span><span class="p">[</span>
						<span class="n">qdrant_models</span><span class="o">.</span><span class="n">FieldCondition</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">MatchValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">))</span>
						<span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span>
					<span class="p">]</span>
				<span class="p">)</span>
			<span class="c1"># Default case</span>
			<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span>
				<span class="n">should</span><span class="o">=</span><span class="p">[</span>
					<span class="n">qdrant_models</span><span class="o">.</span><span class="n">FieldCondition</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">MatchValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">))</span>
					<span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span>
				<span class="p">]</span>
			<span class="p">)</span>

		<span class="k">if</span> <span class="s2">&quot;range&quot;</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="p">:</span>
			<span class="n">field</span><span class="p">,</span> <span class="n">range_values</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">filter_params</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
			<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span>
				<span class="n">must</span><span class="o">=</span><span class="p">[</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">FieldCondition</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">Range</span><span class="p">(</span><span class="o">**</span><span class="n">range_values</span><span class="p">))]</span>
			<span class="p">)</span>

		<span class="c1"># Default: treat as simple field-value pairs (exact match)</span>
		<span class="n">must_conditions</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="n">must_conditions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">FieldCondition</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">MatchValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)))</span>

		<span class="k">return</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Filter</span><span class="p">(</span><span class="n">must</span><span class="o">=</span><span class="n">must_conditions</span><span class="p">)</span>

	<span class="c1"># Context manager support for async operations</span>
	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Return self for use as async context manager.&quot;&quot;&quot;</span>
		<span class="c1"># Basic initialization is sync, async init must be called separately</span>
		<span class="c1"># Consider if automatic async_init here is desired, or keep it explicit</span>
		<span class="c1"># await self.async_init() # Example if auto-init is desired</span>
		<span class="k">return</span> <span class="bp">self</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aexit__</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Clean up resources when exiting the async context manager.&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h5 id="codemap.processor.pipeline.ProcessingPipeline.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
	<span class="nf">repo_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">config_loader</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the processing pipeline synchronously.</p>
<p>Core async initialization is done via <code>async_init</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>repo_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the repository root. If None, it will be determined.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config_loader</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Application configuration loader. If None, a default one is created.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>_progress</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Progress bar instance for initialization tracking.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>_task_id</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Task ID for the progress bar.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">repo_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Initialize the processing pipeline synchronously.</span>

<span class="sd">	Core async initialization is done via `async_init`.</span>

<span class="sd">	Args:</span>
<span class="sd">	    repo_path: Path to the repository root. If None, it will be determined.</span>
<span class="sd">	    config_loader: Application configuration loader. If None, a default one is created.</span>
<span class="sd">	    _progress: Progress bar instance for initialization tracking.</span>
<span class="sd">	    _task_id: Task ID for the progress bar.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_path</span> <span class="ow">or</span> <span class="n">find_project_root</span><span class="p">()</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">:</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Repository path could not be determined.&quot;</span>
		<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

	<span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span> <span class="o">=</span> <span class="n">config_loader</span> <span class="ow">or</span> <span class="n">ConfigLoader</span><span class="p">()</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Config loading failed or returned unexpected type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Failed to load a valid Config object.&quot;</span>
		<span class="k">raise</span> <span class="n">ConfigError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

	<span class="c1"># --- Initialize Shared Components (Synchronous) --- #</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">TreeSitterAnalyzer</span><span class="p">()</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">chunker</span> <span class="o">=</span> <span class="n">TreeSitterChunker</span><span class="p">(</span><span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">)</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">db_client</span> <span class="o">=</span> <span class="n">DatabaseClient</span><span class="p">()</span>

	<span class="c1"># --- Load Configuration --- #</span>
	<span class="c1"># Get embedding configuration</span>
	<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
	<span class="n">embedding_model</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model_name&quot;</span><span class="p">)</span>
	<span class="n">qdrant_dimension</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension&quot;</span><span class="p">)</span>
	<span class="n">distance_metric</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension_metric&quot;</span><span class="p">,</span> <span class="s2">&quot;cosine&quot;</span><span class="p">)</span>

	<span class="c1"># Make sure embedding_model_name is always a string</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;voyage-code-3&quot;</span>  <span class="c1"># Default</span>
	<span class="k">if</span> <span class="n">embedding_model</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">embedding_model</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span> <span class="o">=</span> <span class="n">embedding_model</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">qdrant_dimension</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Missing qdrant dimension in configuration, using default 1024&quot;</span><span class="p">)</span>
		<span class="n">qdrant_dimension</span> <span class="o">=</span> <span class="mi">1024</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using embedding model: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="si">}</span><span class="s2"> with dimension: </span><span class="si">{</span><span class="n">qdrant_dimension</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

	<span class="c1"># Get Qdrant configuration</span>
	<span class="n">vector_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
	<span class="n">qdrant_location</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_location&quot;</span><span class="p">)</span>
	<span class="n">qdrant_collection</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_collection_name&quot;</span><span class="p">,</span> <span class="s2">&quot;codemap_vectors&quot;</span><span class="p">)</span>
	<span class="n">qdrant_url</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
	<span class="n">qdrant_api_key</span> <span class="o">=</span> <span class="n">vector_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;api_key&quot;</span><span class="p">)</span>

	<span class="c1"># Convert distance metric string to enum</span>
	<span class="n">distance_enum</span> <span class="o">=</span> <span class="n">qdrant_models</span><span class="o">.</span><span class="n">Distance</span><span class="o">.</span><span class="n">COSINE</span>
	<span class="k">if</span> <span class="n">distance_metric</span> <span class="ow">and</span> <span class="n">distance_metric</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;COSINE&quot;</span><span class="p">,</span> <span class="s2">&quot;EUCLID&quot;</span><span class="p">,</span> <span class="s2">&quot;DOT&quot;</span><span class="p">]:</span>
		<span class="n">distance_enum</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">Distance</span><span class="p">,</span> <span class="n">distance_metric</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>

	<span class="c1"># Use URL if provided, otherwise use location (defaults to :memory: in QdrantManager)</span>
	<span class="n">qdrant_init_args</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s2">&quot;config_loader&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to QdrantManager</span>
		<span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="n">qdrant_collection</span><span class="p">,</span>
		<span class="s2">&quot;dim&quot;</span><span class="p">:</span> <span class="n">qdrant_dimension</span><span class="p">,</span>
		<span class="s2">&quot;distance&quot;</span><span class="p">:</span> <span class="n">distance_enum</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="n">qdrant_url</span><span class="p">:</span>
		<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_url</span>
		<span class="k">if</span> <span class="n">qdrant_api_key</span><span class="p">:</span>
			<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;api_key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_api_key</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring Qdrant client for URL: </span><span class="si">{</span><span class="n">qdrant_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">qdrant_location</span><span class="p">:</span>
		<span class="n">qdrant_init_args</span><span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qdrant_location</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuring Qdrant client for local path/memory: </span><span class="si">{</span><span class="n">qdrant_location</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="c1"># Let QdrantManager use its default (:memory:)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Configuring Qdrant client for default location (:memory:)&quot;</span><span class="p">)</span>

	<span class="c1"># --- Initialize Managers (Synchronous) --- #</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="n">QdrantManager</span><span class="p">(</span><span class="o">**</span><span class="n">qdrant_init_args</span><span class="p">)</span>

	<span class="c1"># Initialize VectorSynchronizer with the embedding model name and config_loader</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span> <span class="o">=</span> <span class="n">VectorSynchronizer</span><span class="p">(</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">,</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">,</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">chunker</span><span class="p">,</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">,</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="p">,</span>
		<span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to VectorSynchronizer</span>
	<span class="p">)</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ProcessingPipeline synchronous initialization complete for repo: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">False</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span> <span class="n">Watcher</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.pipeline.ProcessingPipeline.repo_path" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">repo_path</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">repo_path</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(repo_path)">repo_path</span></span> <span class="ow">or</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-function-name&quot;&gt;find_project_root&lt;/span&gt; (&lt;code&gt;codemap.utils.path_utils.find_project_root&lt;/code&gt;)" href="../utils/#codemap.utils.path_utils.find_project_root">find_project_root</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.pipeline.ProcessingPipeline.config_loader" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_loader</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config_loader</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(config_loader)">config_loader</span></span> <span class="ow">or</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.pipeline.ProcessingPipeline.config" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).config_loader.load_config">load_config</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.pipeline.ProcessingPipeline.analyzer" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">analyzer</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">analyzer</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TreeSitterAnalyzer&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.TreeSitterAnalyzer&lt;/code&gt;)" href="#codemap.processor.tree_sitter.TreeSitterAnalyzer">TreeSitterAnalyzer</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.pipeline.ProcessingPipeline.chunker" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">chunker</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">chunker</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TreeSitterChunker&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.chunking.TreeSitterChunker&lt;/code&gt;)" href="#codemap.processor.vector.chunking.TreeSitterChunker">TreeSitterChunker</a></span><span class="p">(</span><span class="n"><span title="codemap.processor.vector.chunking.TreeSitterChunker(config_loader)">config_loader</span></span><span class="o">=</span><span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).config_loader">config_loader</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.pipeline.ProcessingPipeline.db_client" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">db_client</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">db_client</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;DatabaseClient&lt;/span&gt; (&lt;code&gt;codemap.db.client.DatabaseClient&lt;/code&gt;)" href="../db/#codemap.db.client.DatabaseClient">DatabaseClient</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.pipeline.ProcessingPipeline.embedding_model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">embedding_model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">embedding_model_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;voyage-code-3&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.pipeline.ProcessingPipeline.qdrant_manager" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">qdrant_manager</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;QdrantManager&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.qdrant_manager.QdrantManager&lt;/code&gt;)" href="#codemap.processor.vector.qdrant_manager.QdrantManager">QdrantManager</a></span><span class="p">(</span><span class="o">**</span><span class="n"><span title="qdrant_init_args">qdrant_init_args</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.pipeline.ProcessingPipeline.vector_synchronizer" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">vector_synchronizer</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">vector_synchronizer</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;VectorSynchronizer&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.synchronizer.VectorSynchronizer&lt;/code&gt;)" href="#codemap.processor.vector.synchronizer.VectorSynchronizer">VectorSynchronizer</a></span><span class="p">(</span>
	<span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).repo_path">repo_path</span></span><span class="p">,</span>
	<span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).qdrant_manager">qdrant_manager</span></span><span class="p">,</span>
	<span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).chunker">chunker</span></span><span class="p">,</span>
	<span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).embedding_model_name">embedding_model_name</span></span><span class="p">,</span>
	<span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).analyzer">analyzer</span></span><span class="p">,</span>
	<span class="n"><span title="codemap.processor.vector.synchronizer.VectorSynchronizer(config_loader)">config_loader</span></span><span class="o">=</span><span class="n"><span title="codemap.processor.pipeline.ProcessingPipeline(self).config_loader">config_loader</span></span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.pipeline.ProcessingPipeline.is_async_initialized" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">is_async_initialized</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.pipeline.ProcessingPipeline.watcher" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">watcher</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">watcher</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;Watcher&lt;/span&gt; (&lt;code&gt;codemap.watcher.file_watcher.Watcher&lt;/code&gt;)" href="../watcher/#codemap.watcher.file_watcher.Watcher">Watcher</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.pipeline.ProcessingPipeline.async_init" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">async_init</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">async_init</span><span class="p">(</span>
	<span class="n">sync_on_init</span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
	<span class="n">progress</span><span class="p">:</span> <span class="n"><span title="rich.progress.Progress">Progress</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">task_id</span><span class="p">:</span> <span class="n"><span title="rich.progress.TaskID">TaskID</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Perform asynchronous initialization steps, including Qdrant connection and initial sync.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sync_on_init</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, run database synchronization during initialization.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>progress</code>
            </td>
            <td>
                  <code><span title="rich.progress.Progress">Progress</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rich Progress instance for unified status display.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>task_id</code>
            </td>
            <td>
                  <code><span title="rich.progress.TaskID">TaskID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rich TaskID for the main initialization/sync task.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_init</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span> <span class="n">sync_on_init</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="n">Progress</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="p">:</span> <span class="n">TaskID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Perform asynchronous initialization steps, including Qdrant connection and initial sync.</span>

<span class="sd">	Args:</span>
<span class="sd">	    sync_on_init: If True, run database synchronization during initialization.</span>
<span class="sd">	    progress: Optional rich Progress instance for unified status display.</span>
<span class="sd">	    task_id: Optional rich TaskID for the main initialization/sync task.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Pipeline already async initialized.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="n">init_description</span> <span class="o">=</span> <span class="s2">&quot;Initializing pipeline components...&quot;</span>
	<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
		<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">init_description</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="c1"># Get embedding configuration for Qdrant URL</span>
		<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
		<span class="n">qdrant_url</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>

		<span class="c1"># Check for Docker containers</span>
		<span class="k">if</span> <span class="n">qdrant_url</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Checking Docker containers...&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

			<span class="c1"># Only check Docker if we&#39;re using a URL that looks like localhost/127.0.0.1</span>
			<span class="k">if</span> <span class="s2">&quot;localhost&quot;</span> <span class="ow">in</span> <span class="n">qdrant_url</span> <span class="ow">or</span> <span class="s2">&quot;127.0.0.1&quot;</span> <span class="ow">in</span> <span class="n">qdrant_url</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Ensuring Qdrant container is running&quot;</span><span class="p">)</span>
				<span class="n">success</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ensure_qdrant_running</span><span class="p">(</span><span class="n">wait_for_health</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">qdrant_url</span><span class="o">=</span><span class="n">qdrant_url</span><span class="p">)</span>

				<span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docker check failed: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
						<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
							<span class="n">task_id</span><span class="p">,</span>
							<span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[yellow]Warning:[/yellow] </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">. Continuing anyway...&quot;</span><span class="p">,</span>
							<span class="n">completed</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
						<span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docker container check: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
						<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Docker containers ready.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

		<span class="c1"># Initialize the database client asynchronously</span>
		<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Initializing database client...&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Database client initialized successfully.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Database initialized.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
				<span class="sa">f</span><span class="s2">&quot;Database initialization failed (RuntimeError): </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Some features may not work properly.&quot;</span>
			<span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
					<span class="n">task_id</span><span class="p">,</span>
					<span class="n">description</span><span class="o">=</span><span class="s2">&quot;[yellow]Warning:[/yellow] Database initialization failed. Continuing anyway...&quot;</span><span class="p">,</span>
					<span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
				<span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">ConnectionError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database connection failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Some features may not work properly.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
					<span class="n">task_id</span><span class="p">,</span>
					<span class="n">description</span><span class="o">=</span><span class="s2">&quot;[yellow]Warning:[/yellow] Database connection failed. Continuing anyway...&quot;</span><span class="p">,</span>
					<span class="n">completed</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
				<span class="p">)</span>

		<span class="c1"># Initialize Qdrant client (connects, creates collection if needed)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Qdrant manager initialized asynchronously.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Qdrant connected.&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># This case should theoretically not happen if __init__ succeeded</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;QdrantManager was not initialized in __init__.&quot;</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">False</span>
		<span class="k">if</span> <span class="n">sync_on_init</span><span class="p">:</span>
			<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">True</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;`sync_on_init` is True. Performing index synchronization...&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># Optional: Could add a check here if Qdrant collection is empty</span>
			<span class="c1"># requires another call to qdrant_manager, e.g., get_count()</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Skipping sync on init as requested.&quot;</span><span class="p">)</span>
			<span class="n">needs_sync</span> <span class="o">=</span> <span class="kc">False</span>

		<span class="c1"># Set initialized flag *before* potentially long sync operation</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ProcessingPipeline async core components initialized.&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">needs_sync</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_databases</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>
			<span class="c1"># sync_databases handles final progress update on success/failure</span>
		<span class="k">elif</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
			<span class="c1"># Update progress if sync was skipped</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
				<span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[green]✓[/green] Pipeline initialized (sync skipped).&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span>
			<span class="p">)</span>

	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed during async initialization&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[red]Error:[/red] Init failed&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
		<span class="c1"># Optionally re-raise or handle specific exceptions</span>
		<span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.pipeline.ProcessingPipeline.stop" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">stop</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">stop</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Stops the pipeline and releases resources, including closing Qdrant connection.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Stops the pipeline and releases resources, including closing Qdrant connection.&quot;&quot;&quot;</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping ProcessingPipeline asynchronously...&quot;</span><span class="p">)</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore[assignment]</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Qdrant Manager already None during stop.&quot;</span><span class="p">)</span>

	<span class="c1"># Stop the watcher if it&#39;s running</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Stopping file watcher...&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span>  <span class="c1"># Allow cancellation to propagate</span>
		<span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher task cancelled.&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher stopped.&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="c1"># Cleanup database client</span>
	<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;db_client&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="p">:</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_client</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Database client cleaned up.&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error during database client cleanup&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">ConnectionError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Connection error during database client cleanup&quot;</span><span class="p">)</span>

	<span class="c1"># Other cleanup if needed</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="o">=</span> <span class="kc">False</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ProcessingPipeline stopped.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.pipeline.ProcessingPipeline.sync_databases" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">sync_databases</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sync_databases</span><span class="p">(</span>
	<span class="n">progress</span><span class="p">:</span> <span class="n"><span title="rich.progress.Progress">Progress</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">task_id</span><span class="p">:</span> <span class="n"><span title="rich.progress.TaskID">TaskID</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Asynchronously synchronize the Qdrant index with the Git repository state.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>progress</code>
            </td>
            <td>
                  <code><span title="rich.progress.Progress">Progress</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rich Progress instance for status updates.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>task_id</code>
            </td>
            <td>
                  <code><span title="rich.progress.TaskID">TaskID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rich TaskID for the main sync task.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sync_databases</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="n">Progress</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="p">:</span> <span class="n">TaskID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Asynchronously synchronize the Qdrant index with the Git repository state.</span>

<span class="sd">	Args:</span>
<span class="sd">	    progress: Optional rich Progress instance for status updates.</span>
<span class="sd">	    task_id: Optional rich TaskID for the main sync task.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot sync databases, async initialization not complete.&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;[red]Error:[/red] Not initialized&quot;</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="c1"># Acquire lock only if not already held (for watcher calls)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="o">.</span><span class="n">locked</span><span class="p">():</span>
		<span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sync_lock</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting vector index synchronization using VectorSynchronizer...&quot;</span><span class="p">)</span>
			<span class="c1"># VectorSynchronizer handles its own progress updates internally now</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span><span class="o">.</span><span class="n">sync_index</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>
			<span class="c1"># Final status message/logging is handled by sync_index</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="c1"># If lock is already held (likely by watcher call), just run it</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting vector index synchronization (lock already held)...&quot;</span><span class="p">)</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_synchronizer</span><span class="o">.</span><span class="n">sync_index</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.pipeline.ProcessingPipeline.initialize_watcher" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">initialize_watcher</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">initialize_watcher</span><span class="p">(</span><span class="n">debounce_delay</span><span class="p">:</span> <span class="n"><span title="float">float</span></span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the file watcher.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>debounce_delay</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Delay in seconds before triggering sync after a file change.</p>
              </div>
            </td>
            <td>
                  <code>2.0</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_watcher</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debounce_delay</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Initialize the file watcher.</span>

<span class="sd">	Args:</span>
<span class="sd">	    debounce_delay: Delay in seconds before triggering sync after a file change.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot initialize watcher without a repository path.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Watcher already initialized.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Initializing file watcher for path: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="n">Watcher</span><span class="p">(</span>
			<span class="n">path_to_watch</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">,</span>
			<span class="n">on_change_callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sync_callback_wrapper</span><span class="p">,</span>  <span class="c1"># Use the lock wrapper</span>
			<span class="n">debounce_delay</span><span class="o">=</span><span class="n">debounce_delay</span><span class="p">,</span>
		<span class="p">)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;File watcher initialized.&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to initialize watcher&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Unexpected error initializing watcher.&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">watcher</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.pipeline.ProcessingPipeline.start_watcher" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">start_watcher</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">start_watcher</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Start the file watcher in the background.</p>
<p><code>initialize_watcher</code> must be called first.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start_watcher</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Start the file watcher in the background.</span>

<span class="sd">	`initialize_watcher` must be called first.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Watcher not initialized. Call initialize_watcher() first.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Watcher task is already running.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting file watcher task in the background...&quot;</span><span class="p">)</span>
	<span class="c1"># Create a task to run the watcher&#39;s start method asynchronously</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_watcher_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">watcher</span><span class="o">.</span><span class="n">start</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.pipeline.ProcessingPipeline.semantic_search" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">semantic_search</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">semantic_search</span><span class="p">(</span>
	<span class="n">query</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">k</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">filter_params</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Perform semantic search for code chunks similar to the query using Qdrant.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The search query string.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>k</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of top similar results to retrieve.</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter_params</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional dictionary for filtering results. Supports:
- exact match: {"field": "value"} or {"match": {"field": "value"}}
- multiple values: {"match_any": {"field": ["value1", "value2"]}}
- range: {"range": {"field": {"gt": value, "lt": value}}}
- complex: {"must": [...], "should": [...], "must_not": [...]}</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of search result dictionaries (Qdrant ScoredPoint converted to dict),</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>or None if an error occurs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">semantic_search</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
	<span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">filter_params</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Perform semantic search for code chunks similar to the query using Qdrant.</span>

<span class="sd">	Args:</span>
<span class="sd">	    query: The search query string.</span>
<span class="sd">	    k: The number of top similar results to retrieve.</span>
<span class="sd">	    filter_params: Optional dictionary for filtering results. Supports:</span>
<span class="sd">	        - exact match: {&quot;field&quot;: &quot;value&quot;} or {&quot;match&quot;: {&quot;field&quot;: &quot;value&quot;}}</span>
<span class="sd">	        - multiple values: {&quot;match_any&quot;: {&quot;field&quot;: [&quot;value1&quot;, &quot;value2&quot;]}}</span>
<span class="sd">	        - range: {&quot;range&quot;: {&quot;field&quot;: {&quot;gt&quot;: value, &quot;lt&quot;: value}}}</span>
<span class="sd">	        - complex: {&quot;must&quot;: [...], &quot;should&quot;: [...], &quot;must_not&quot;: [...]}</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A list of search result dictionaries (Qdrant ScoredPoint converted to dict),</span>
<span class="sd">	    or None if an error occurs.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_async_initialized</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;QdrantManager not available for semantic search.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Performing semantic search for query: &#39;</span><span class="si">%s</span><span class="s2">&#39;, k=</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="c1"># 1. Generate query embedding (must be async)</span>
		<span class="n">query_embedding</span> <span class="o">=</span> <span class="k">await</span> <span class="n">generate_embedding</span><span class="p">(</span>
			<span class="n">query</span><span class="p">,</span>
			<span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">,</span>
			<span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="p">,</span>  <span class="c1"># Pass ConfigLoader to generate_embedding</span>
		<span class="p">)</span>
		<span class="k">if</span> <span class="n">query_embedding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to generate embedding for query.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span>

		<span class="c1"># Convert to numpy array if needed by Qdrant client, though list is often fine</span>
		<span class="c1"># query_vector = np.array(query_embedding, dtype=np.float32)</span>
		<span class="n">query_vector</span> <span class="o">=</span> <span class="n">query_embedding</span>  <span class="c1"># Qdrant client typically accepts list[float]</span>

		<span class="c1"># 2. Process filter parameters to Qdrant filter format</span>
		<span class="n">query_filter</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="k">if</span> <span class="n">filter_params</span><span class="p">:</span>
			<span class="n">query_filter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_qdrant_filter</span><span class="p">(</span><span class="n">filter_params</span><span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Using filter for search: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">query_filter</span><span class="p">)</span>

		<span class="c1"># 3. Query Qdrant index (must be async)</span>
		<span class="n">search_results</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">qdrant_models</span><span class="o">.</span><span class="n">ScoredPoint</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
			<span class="n">query_vector</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">query_filter</span><span class="o">=</span><span class="n">query_filter</span>
		<span class="p">)</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">search_results</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Qdrant search returned no results.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="p">[]</span>

		<span class="c1"># 4. Format results (convert ScoredPoint to dictionary)</span>
		<span class="n">formatted_results</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">scored_point</span> <span class="ow">in</span> <span class="n">search_results</span><span class="p">:</span>
			<span class="c1"># Convert Qdrant model to dict for consistent output</span>
			<span class="c1"># Include score (similarity) and payload</span>
			<span class="n">result_dict</span> <span class="o">=</span> <span class="p">{</span>
				<span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">scored_point</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>  <span class="c1"># Ensure ID is string</span>
				<span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="n">scored_point</span><span class="o">.</span><span class="n">score</span><span class="p">,</span>
				<span class="s2">&quot;payload&quot;</span><span class="p">:</span> <span class="n">scored_point</span><span class="o">.</span><span class="n">payload</span><span class="p">,</span>
				<span class="c1"># Optionally include version if needed</span>
				<span class="c1"># &quot;version&quot;: scored_point.version,</span>
			<span class="p">}</span>
			<span class="n">formatted_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result_dict</span><span class="p">)</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Semantic search found </span><span class="si">%d</span><span class="s2"> results.&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">formatted_results</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">formatted_results</span>

	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error during semantic search.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.pipeline.ProcessingPipeline.__aenter__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__aenter__</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__aenter__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nf"><span title="typing.Self">Self</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return self for use as async context manager.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Return self for use as async context manager.&quot;&quot;&quot;</span>
	<span class="c1"># Basic initialization is sync, async init must be called separately</span>
	<span class="c1"># Consider if automatic async_init here is desired, or keep it explicit</span>
	<span class="c1"># await self.async_init() # Example if auto-init is desired</span>
	<span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.pipeline.ProcessingPipeline.__aexit__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__aexit__</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__aexit__</span><span class="p">(</span>
	<span class="nf">exc_type</span><span class="p">:</span> <span class="n"><span title="type">type</span></span><span class="p">[</span><span class="n"><span title="BaseException">BaseException</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">exc_val</span><span class="p">:</span> <span class="n"><span title="BaseException">BaseException</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">exc_tb</span><span class="p">:</span> <span class="n"><span title="types.TracebackType">TracebackType</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Clean up resources when exiting the async context manager.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/pipeline.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aexit__</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Clean up resources when exiting the async context manager.&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="codemap.processor.utils" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">utils</span>


</h3>

    <div class="doc doc-contents ">

        <p>Processor Utilities Package.</p>









  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h4 id="codemap.processor.utils.git_utils" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">git_utils</span>


</h4>

    <div class="doc doc-contents ">

        <p>Utilities for interacting with Git.</p>









  <div class="doc doc-children">



























<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.utils.git_utils.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.utils.git_utils.MIN_GIT_LS_FILES_PARTS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">MIN_GIT_LS_FILES_PARTS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">MIN_GIT_LS_FILES_PARTS</span> <span class="o">=</span> <span class="mi">4</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.utils.git_utils.SHA1_HASH_LENGTH" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">SHA1_HASH_LENGTH</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">SHA1_HASH_LENGTH</span> <span class="o">=</span> <span class="mi">40</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.utils.git_utils.get_git_tracked_files" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_git_tracked_files</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_git_tracked_files</span><span class="p">(</span>
	<span class="n">repo_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get all tracked files in the Git repository with their blob hashes.</p>
<p>Uses 'git ls-files -s' which shows staged files with mode, hash, stage, path.
Respects .gitignore rules by using --exclude-standard flag.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>repo_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the root of the Git repository.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dict[str, str] | None: A dictionary mapping file paths (relative to repo_path)
                  to their Git blob hashes. Returns None on failure.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/utils/git_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_git_tracked_files</span><span class="p">(</span><span class="n">repo_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get all tracked files in the Git repository with their blob hashes.</span>

<span class="sd">	Uses &#39;git ls-files -s&#39; which shows staged files with mode, hash, stage, path.</span>
<span class="sd">	Respects .gitignore rules by using --exclude-standard flag.</span>

<span class="sd">	Args:</span>
<span class="sd">	    repo_path (Path): The path to the root of the Git repository.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    dict[str, str] | None: A dictionary mapping file paths (relative to repo_path)</span>
<span class="sd">	                          to their Git blob hashes. Returns None on failure.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">command</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;ls-files&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="s2">&quot;--full-name&quot;</span><span class="p">,</span> <span class="s2">&quot;--exclude-standard&quot;</span><span class="p">]</span>
	<span class="n">stdout</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">returncode</span> <span class="o">=</span> <span class="n">_run_git_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">repo_path</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;git ls-files -s&#39; failed in </span><span class="si">{</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="n">tracked_files</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
	<span class="n">lines</span> <span class="o">=</span> <span class="n">stdout</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
			<span class="k">continue</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">parts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">MIN_GIT_LS_FILES_PARTS</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skipping malformed line in git ls-files output: </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="k">continue</span>

			<span class="c1"># Extract mode, hash, stage, and path</span>
			<span class="n">_mode</span><span class="p">,</span> <span class="n">blob_hash</span><span class="p">,</span> <span class="n">stage_str</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
			<span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span>  <span class="c1"># Handle spaces in filenames</span>

			<span class="c1"># Unquote path if necessary (git ls-files quotes paths with special chars)</span>
			<span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">):</span>
				<span class="n">file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;latin-1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;unicode_escape&quot;</span><span class="p">)</span>

			<span class="n">stage</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">stage_str</span><span class="p">)</span>

			<span class="c1"># We are interested in committed files (stage 0)</span>
			<span class="k">if</span> <span class="n">stage</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">_should_exclude_path</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
				<span class="n">tracked_files</span><span class="p">[</span><span class="n">file_path</span><span class="p">]</span> <span class="o">=</span> <span class="n">blob_hash</span>
		<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not parse line: </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index error parsing line: </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">tracked_files</span><span class="p">)</span><span class="si">}</span><span class="s2"> tracked files in Git repository: </span><span class="si">{</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">tracked_files</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.utils.git_utils.get_file_git_hash" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_file_git_hash</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_file_git_hash</span><span class="p">(</span>
	<span class="n">repo_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the Git hash (blob ID) for a specific tracked file.</p>
<p>Uses 'git hash-object' which computes the hash of the file content as it is
on the filesystem currently. This matches the behavior needed for comparing
against potentially modified files before staging.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>repo_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the root of the Git repository.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the file relative to the repository root.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str | None: The Git blob hash of the file, or None if an error occurs
        or the file is not found/tracked.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/utils/git_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_file_git_hash</span><span class="p">(</span><span class="n">repo_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the Git hash (blob ID) for a specific tracked file.</span>

<span class="sd">	Uses &#39;git hash-object&#39; which computes the hash of the file content as it is</span>
<span class="sd">	on the filesystem currently. This matches the behavior needed for comparing</span>
<span class="sd">	against potentially modified files before staging.</span>

<span class="sd">	Args:</span>
<span class="sd">	    repo_path (Path): The path to the root of the Git repository.</span>
<span class="sd">	    file_path (str): The path to the file relative to the repository root.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    str | None: The Git blob hash of the file, or None if an error occurs</span>
<span class="sd">	                or the file is not found/tracked.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">full_file_path</span> <span class="o">=</span> <span class="n">repo_path</span> <span class="o">/</span> <span class="n">file_path</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">full_file_path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot get git hash: File not found or is not a regular file: </span><span class="si">{</span><span class="n">full_file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="n">command</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;hash-object&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">full_file_path</span><span class="p">)]</span>
	<span class="n">stdout</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">returncode</span> <span class="o">=</span> <span class="n">_run_git_command</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">repo_path</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;git hash-object </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&#39; failed in </span><span class="si">{</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="c1"># stdout should contain just the hash</span>
	<span class="n">git_hash</span> <span class="o">=</span> <span class="n">stdout</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">git_hash</span><span class="p">)</span> <span class="o">==</span> <span class="n">SHA1_HASH_LENGTH</span><span class="p">:</span>  <span class="c1"># Use constant</span>
		<span class="k">return</span> <span class="n">git_hash</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected output from &#39;git hash-object </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">stdout</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="codemap.processor.utils.embedding_utils" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">embedding_utils</span>


</h4>

    <div class="doc doc-contents ">

        <p>Utilities for generating text embeddings.</p>









  <div class="doc doc-children">



























<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.utils.embedding_utils.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.utils.embedding_utils.get_retry_settings" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_retry_settings</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_retry_settings</span><span class="p">(</span>
	<span class="n">config_loader</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="int">int</span></span><span class="p">,</span> <span class="n"><span title="int">int</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get retry settings from config.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/utils/embedding_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_retry_settings</span><span class="p">(</span><span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Get retry settings from config.&quot;&quot;&quot;</span>
	<span class="n">embedding_config</span> <span class="o">=</span> <span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
	<span class="c1"># Use max_retries directly for voyageai.Client</span>
	<span class="n">max_retries</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_retries&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
	<span class="c1"># retry_delay is handled internally by voyageai client&#39;s exponential backoff</span>
	<span class="c1"># We can still keep the config value if needed elsewhere, but timeout is more relevant here.</span>
	<span class="c1"># Increased default timeout</span>
	<span class="n">timeout</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timeout&quot;</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>  <span class="c1"># Default timeout for requests (increased from 60)</span>
	<span class="k">return</span> <span class="n">max_retries</span><span class="p">,</span> <span class="n">timeout</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.utils.embedding_utils.generate_embeddings_batch" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">generate_embeddings_batch</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_embeddings_batch</span><span class="p">(</span>
	<span class="n">texts</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">],</span>
	<span class="n">model</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">config_loader</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="float">float</span></span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generates embeddings for a batch of texts using the Voyage AI async client.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>texts</code>
            </td>
            <td>
                  <code><span title="List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of text strings to embed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The embedding model to use (defaults to config value).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config_loader</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration loader instance.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="list">list</span>[<span title="float">float</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[List[List[float]]]: A list of embedding vectors,
                         or None if embedding fails after retries.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/utils/embedding_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">generate_embeddings_batch</span><span class="p">(</span>
	<span class="n">texts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">model</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Generates embeddings for a batch of texts using the Voyage AI async client.</span>

<span class="sd">	Args:</span>
<span class="sd">	    texts (List[str]): A list of text strings to embed.</span>
<span class="sd">	    model (str): The embedding model to use (defaults to config value).</span>
<span class="sd">	    config_loader: Configuration loader instance.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    Optional[List[List[float]]]: A list of embedding vectors,</span>
<span class="sd">	                                 or None if embedding fails after retries.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">texts</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;generate_embeddings_batch called with empty list.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="p">[]</span>

	<span class="c1"># Create ConfigLoader if not provided</span>
	<span class="k">if</span> <span class="n">config_loader</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">config_loader</span> <span class="o">=</span> <span class="n">ConfigLoader</span><span class="p">()</span>

	<span class="n">embedding_config</span> <span class="o">=</span> <span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>

	<span class="c1"># Use model from parameter or fallback to config</span>
	<span class="n">embedding_model</span> <span class="o">=</span> <span class="n">model</span> <span class="ow">or</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model_name&quot;</span><span class="p">,</span> <span class="s2">&quot;voyage-code-3&quot;</span><span class="p">)</span>

	<span class="c1"># Get retry and timeout settings from config</span>
	<span class="n">max_retries</span><span class="p">,</span> <span class="n">timeout</span> <span class="o">=</span> <span class="n">get_retry_settings</span><span class="p">(</span><span class="n">config_loader</span><span class="p">)</span>

	<span class="c1"># Ensure VOYAGE_API_KEY is available (voyageai client checks this, but explicit check is good)</span>
	<span class="k">if</span> <span class="s2">&quot;voyage&quot;</span> <span class="ow">in</span> <span class="n">embedding_model</span> <span class="ow">and</span> <span class="s2">&quot;VOYAGE_API_KEY&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;VOYAGE_API_KEY environment variable not set, but required for model &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">embedding_model</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating embeddings for </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span><span class="si">}</span><span class="s2"> texts using model: </span><span class="si">{</span><span class="n">embedding_model</span><span class="si">}</span><span class="s2"> via voyageai client&quot;</span><span class="p">)</span>

		<span class="c1"># Instantiate the async client with retry and timeout settings</span>
		<span class="c1"># API key is automatically picked up from VOYAGE_API_KEY env var by default</span>
		<span class="c1"># Explicitly reference voyageai.AsyncClient</span>
		<span class="c1"># type: ignore because linter incorrectly flags AsyncClient as not exported</span>
		<span class="n">vo</span> <span class="o">=</span> <span class="n">voyageai</span><span class="o">.</span><span class="n">AsyncClient</span><span class="p">(</span><span class="n">max_retries</span><span class="o">=</span><span class="n">max_retries</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>

		<span class="c1"># Call the voyageai embed method</span>
		<span class="c1"># Use keyword argument &#39;texts=&#39; for clarity and future compatibility</span>
		<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">vo</span><span class="o">.</span><span class="n">embed</span><span class="p">(</span><span class="n">texts</span><span class="o">=</span><span class="n">texts</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">embedding_model</span><span class="p">)</span>

		<span class="c1"># Check response structure (based on typical patterns, might need adjustment)</span>
		<span class="c1"># Assuming result has an &#39;embeddings&#39; attribute which is a list of lists of floats</span>
		<span class="k">if</span> <span class="n">result</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s2">&quot;embeddings&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">embeddings</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
			<span class="n">embeddings</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">embeddings</span>
			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">texts</span><span class="p">):</span>
				<span class="c1"># Check if embeddings are valid lists of floats</span>
				<span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">emb</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">emb</span><span class="p">)</span> <span class="k">for</span> <span class="n">emb</span> <span class="ow">in</span> <span class="n">embeddings</span><span class="p">):</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully generated </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span><span class="si">}</span><span class="s2"> embeddings.&quot;</span><span class="p">)</span>
					<span class="c1"># Use cast to assure the type checker</span>
					<span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;list[list[float]]&quot;</span><span class="p">,</span> <span class="n">embeddings</span><span class="p">)</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Generated embeddings list contains non-float or non-list items.&quot;</span><span class="p">)</span>
				<span class="k">return</span> <span class="kc">None</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
				<span class="s2">&quot;Mismatch between input texts (</span><span class="si">%d</span><span class="s2">) and generated embeddings (</span><span class="si">%d</span><span class="s2">).&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">texts</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span>
			<span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Indicate partial failure</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Unexpected response structure from voyageai.embed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Indicate unexpected response</span>

	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="c1"># Catch specific Voyage AI errors (includes API errors, rate limits, etc.)</span>
		<span class="c1"># Catch any unexpected errors during the API call</span>
		<span class="c1"># Use logger.exception without redundant variable (per TRY401)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error during voyageai embedding generation&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.utils.embedding_utils.generate_embedding" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">generate_embedding</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_embedding</span><span class="p">(</span>
	<span class="n">text</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">model</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">config_loader</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="float">float</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generates an embedding for a single text using the Voyage AI client.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>text</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text to embed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The embedding model to use.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config_loader</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration loader instance.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="float">float</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[List[float]]: The embedding vector, or None if embedding fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/utils/embedding_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">generate_embedding</span><span class="p">(</span>
	<span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Generates an embedding for a single text using the Voyage AI client.</span>

<span class="sd">	Args:</span>
<span class="sd">	    text (str): The text to embed.</span>
<span class="sd">	    model (str): The embedding model to use.</span>
<span class="sd">	    config_loader: Configuration loader instance.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    Optional[List[float]]: The embedding vector, or None if embedding fails.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">text</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;generate_embedding called with empty string.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="c1"># Await the async batch function (now using voyageai client)</span>
	<span class="n">embeddings_batch</span> <span class="o">=</span> <span class="k">await</span> <span class="n">generate_embeddings_batch</span><span class="p">(</span><span class="n">texts</span><span class="o">=</span><span class="p">[</span><span class="n">text</span><span class="p">],</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">config_loader</span><span class="o">=</span><span class="n">config_loader</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">embeddings_batch</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">embeddings_batch</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">embeddings_batch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

	<span class="c1"># Error logging is now handled within generate_embeddings_batch</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to generate embedding for single text using voyageai client.&quot;</span><span class="p">)</span>
	<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="codemap.processor.utils.sync_utils" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">sync_utils</span>


</h4>

    <div class="doc doc-contents ">

        <p>Utilities for synchronization logic.</p>









  <div class="doc doc-children">















<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.utils.sync_utils.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.utils.sync_utils.compare_states" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">compare_states</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">compare_states</span><span class="p">(</span>
	<span class="n">current_files</span><span class="p">:</span> <span class="n"><span title="collections.abc.Mapping">Mapping</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="str">str</span></span><span class="p">],</span>
	<span class="n">db_files</span><span class="p">:</span> <span class="n"><span title="collections.abc.Mapping">Mapping</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="n"><span title="set">set</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="set">set</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">],</span> <span class="n"><span title="set">set</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">],</span> <span class="n"><span title="set">set</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Compare current file state with database state to find differences.</p>
<p>Handles cases where the database might store multiple hashes per file path
(e.g., if different chunks of the same file have different source hashes,
although typically it should be one hash per file path in the DB state dict).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>current_files</code>
            </td>
            <td>
                  <code><span title="collections.abc.Mapping">Mapping</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary mapping file paths to their
                             current hash (e.g., from Git).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>db_files</code>
            </td>
            <td>
                  <code><span title="collections.abc.Mapping">Mapping</span>[<span title="str">str</span>, <span title="str">str</span> | <span title="set">set</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary mapping file paths to their
                                   hash(es) stored in the database.
                                   Values can be single hashes (str) or
                                   sets of hashes (set[str]).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="set">set</span>[<span title="str">str</span>], <span title="set">set</span>[<span title="str">str</span>], <span title="set">set</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[set[str], set[str], set[str]]: A tuple containing:
- files_to_add: Set of file paths present in current_files but not db_files.
- files_to_update: Set of file paths present in both, but with different hashes.
- files_to_delete: Set of file paths present in db_files but not current_files.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/utils/sync_utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compare_states</span><span class="p">(</span>
	<span class="n">current_files</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
	<span class="n">db_files</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Compare current file state with database state to find differences.</span>

<span class="sd">	Handles cases where the database might store multiple hashes per file path</span>
<span class="sd">	(e.g., if different chunks of the same file have different source hashes,</span>
<span class="sd">	although typically it should be one hash per file path in the DB state dict).</span>

<span class="sd">	Args:</span>
<span class="sd">	    current_files (Mapping[str, str]): Dictionary mapping file paths to their</span>
<span class="sd">	                                     current hash (e.g., from Git).</span>
<span class="sd">	    db_files (Mapping[str, str | set[str]]): Dictionary mapping file paths to their</span>
<span class="sd">	                                           hash(es) stored in the database.</span>
<span class="sd">	                                           Values can be single hashes (str) or</span>
<span class="sd">	                                           sets of hashes (set[str]).</span>

<span class="sd">	Returns:</span>
<span class="sd">	    tuple[set[str], set[str], set[str]]: A tuple containing:</span>
<span class="sd">	        - files_to_add: Set of file paths present in current_files but not db_files.</span>
<span class="sd">	        - files_to_update: Set of file paths present in both, but with different hashes.</span>
<span class="sd">	        - files_to_delete: Set of file paths present in db_files but not current_files.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">current_paths</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">current_files</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
	<span class="n">db_paths</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">db_files</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

	<span class="c1"># Files in current state but not in DB -&gt; Add</span>
	<span class="n">files_to_add</span> <span class="o">=</span> <span class="n">current_paths</span> <span class="o">-</span> <span class="n">db_paths</span>

	<span class="c1"># Files in DB but not in current state -&gt; Delete</span>
	<span class="n">files_to_delete</span> <span class="o">=</span> <span class="n">db_paths</span> <span class="o">-</span> <span class="n">current_paths</span>

	<span class="c1"># Files in both -&gt; Check hash for updates</span>
	<span class="n">files_to_update</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
	<span class="n">common_paths</span> <span class="o">=</span> <span class="n">current_paths</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">db_paths</span><span class="p">)</span>

	<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">common_paths</span><span class="p">:</span>
		<span class="n">current_hash</span> <span class="o">=</span> <span class="n">current_files</span><span class="p">[</span><span class="n">path</span><span class="p">]</span>
		<span class="n">db_hash_or_hashes</span> <span class="o">=</span> <span class="n">db_files</span><span class="p">[</span><span class="n">path</span><span class="p">]</span>

		<span class="n">needs_update</span> <span class="o">=</span> <span class="kc">False</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">db_hash_or_hashes</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
			<span class="c1"># DB stores a single hash for the file</span>
			<span class="k">if</span> <span class="n">current_hash</span> <span class="o">!=</span> <span class="n">db_hash_or_hashes</span><span class="p">:</span>
				<span class="n">needs_update</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">db_hash_or_hashes</span><span class="p">,</span> <span class="nb">set</span><span class="p">):</span>
			<span class="c1"># DB stores multiple hashes (e.g., different versions/chunks)</span>
			<span class="c1"># Update if the current hash is not among the DB hashes</span>
			<span class="k">if</span> <span class="n">current_hash</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">db_hash_or_hashes</span><span class="p">:</span>
				<span class="n">needs_update</span> <span class="o">=</span> <span class="kc">True</span>
			<span class="c1"># Optional: Consider updating if the set doesn&#39;t *exactly* match</span>
			<span class="c1"># (e.g., if DB has extra hashes not in current state -&gt; cleanup?)</span>
			<span class="c1"># For now, just check if the current hash exists.</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected hash type in db_files for path &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">db_hash_or_hashes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="c1"># Treat as needing update to be safe</span>
			<span class="n">needs_update</span> <span class="o">=</span> <span class="kc">True</span>

		<span class="k">if</span> <span class="n">needs_update</span><span class="p">:</span>
			<span class="n">files_to_update</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
		<span class="sa">f</span><span class="s2">&quot;State comparison results: Add: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files_to_add</span><span class="p">)</span><span class="si">}</span><span class="s2">, &quot;</span>
		<span class="sa">f</span><span class="s2">&quot;Update: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files_to_update</span><span class="p">)</span><span class="si">}</span><span class="s2">, Delete: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files_to_delete</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
	<span class="p">)</span>
	<span class="k">return</span> <span class="n">files_to_add</span><span class="p">,</span> <span class="n">files_to_update</span><span class="p">,</span> <span class="n">files_to_delete</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="codemap.processor.vector" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">vector</span>


</h3>

    <div class="doc doc-contents ">

        <p>Vector processing package for CodeMap.</p>
<p>Handles chunking, embedding, indexing (using HNSW), and synchronization
for vector search.</p>









  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h4 id="codemap.processor.vector.synchronizer" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">synchronizer</span>


</h4>

    <div class="doc doc-contents ">

        <p>Module for synchronizing HNSW index with Git state.</p>









  <div class="doc doc-children">











































































<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.vector.synchronizer.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.vector.synchronizer.DEFAULT_VOYAGE_TOKEN_LIMIT" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">DEFAULT_VOYAGE_TOKEN_LIMIT</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">DEFAULT_VOYAGE_TOKEN_LIMIT</span> <span class="o">=</span> <span class="mi">80000</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-class">



<h5 id="codemap.processor.vector.synchronizer.VectorSynchronizer" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VectorSynchronizer</span>


</h5>


    <div class="doc doc-contents ">


        <p>Handles asynchronous synchronization between Git repository and Qdrant vector index.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/vector/synchronizer.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">VectorSynchronizer</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Handles asynchronous synchronization between Git repository and Qdrant vector index.&quot;&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">repo_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
		<span class="n">qdrant_manager</span><span class="p">:</span> <span class="n">QdrantManager</span><span class="p">,</span>
		<span class="n">chunker</span><span class="p">:</span> <span class="n">TreeSitterChunker</span><span class="p">,</span>
		<span class="n">embedding_model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
		<span class="n">analyzer</span><span class="p">:</span> <span class="n">TreeSitterAnalyzer</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize the vector synchronizer.</span>

<span class="sd">		Args:</span>
<span class="sd">		    repo_path: Path to the git repository root.</span>
<span class="sd">		    qdrant_manager: Instance of QdrantManager to handle vector storage.</span>
<span class="sd">		    chunker: Instance of chunker used to create code chunks.</span>
<span class="sd">		    embedding_model_name: Name of the embedding model to use.</span>
<span class="sd">		    analyzer: Optional TreeSitterAnalyzer instance.</span>
<span class="sd">		    config_loader: Configuration loader instance.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_path</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="n">qdrant_manager</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">chunker</span> <span class="o">=</span> <span class="n">chunker</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span> <span class="o">=</span> <span class="n">embedding_model_name</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">analyzer</span> <span class="ow">or</span> <span class="n">TreeSitterAnalyzer</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span> <span class="o">=</span> <span class="n">config_loader</span> <span class="ow">or</span> <span class="n">ConfigLoader</span><span class="p">()</span>

		<span class="c1"># Get configuration values</span>
		<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;batch_size&quot;</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_batch_size</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_batch_size&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">voyage_token_limit</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;voyage_token_limit&quot;</span><span class="p">,</span> <span class="n">DEFAULT_VOYAGE_TOKEN_LIMIT</span><span class="p">)</span>

		<span class="c1"># Instantiate synchronous VoyageAI client for token counting</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># API key is picked up from environment automatically</span>
			<span class="c1"># type: ignore for linter error on Client export</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">voyage_client</span> <span class="o">=</span> <span class="n">voyageai</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>  <span class="c1"># type: ignore[arg-type]</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;VoyageAI client initialized for token counting.&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to initialize VoyageAI client for token counting. Ensure VOYAGE_API_KEY is set.&quot;</span><span class="p">)</span>
			<span class="c1"># Depending on requirements, might want to raise here or handle gracefully</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">voyage_client</span> <span class="o">=</span> <span class="kc">None</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
			<span class="sa">f</span><span class="s2">&quot;VectorSynchronizer initialized for repo: </span><span class="si">{</span><span class="n">repo_path</span><span class="si">}</span><span class="s2"> &quot;</span>
			<span class="sa">f</span><span class="s2">&quot;using Qdrant collection: &#39;</span><span class="si">{</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
			<span class="sa">f</span><span class="s2">&quot;and embedding model: </span><span class="si">{</span><span class="n">embedding_model_name</span><span class="si">}</span><span class="s2">&quot;</span>
		<span class="p">)</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_get_qdrant_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Retrieves the current state from Qdrant, mapping file paths to sets of (chunk_id, git_hash).</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A dictionary where keys are file paths relative to the repo root,</span>
<span class="sd">		    and values are sets containing tuples of (chunk_id, git_hash)</span>
<span class="sd">		    for each chunk associated with that file path.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Retrieving current state from Qdrant collection...&quot;</span><span class="p">)</span>
		<span class="n">qdrant_state</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
		<span class="n">all_ids</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">get_all_point_ids_with_filter</span><span class="p">()</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[State Check] Retrieved </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">all_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> point IDs from Qdrant.&quot;</span><span class="p">)</span>

		<span class="c1"># Fetch payloads in batches to avoid overloading retrieve</span>
		<span class="n">payloads</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="k">if</span> <span class="n">all_ids</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_ids</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_batch_size</span><span class="p">):</span>
				<span class="n">batch_ids</span> <span class="o">=</span> <span class="n">all_ids</span><span class="p">[</span><span class="n">i</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_batch_size</span><span class="p">]</span>
				<span class="n">batch_payloads</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">get_payloads_by_ids</span><span class="p">(</span><span class="n">batch_ids</span><span class="p">)</span>
				<span class="n">payloads</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">batch_payloads</span><span class="p">)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[State Check] Retrieved </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">payloads</span><span class="p">)</span><span class="si">}</span><span class="s2"> payloads from Qdrant.&quot;</span><span class="p">)</span>

		<span class="n">processed_count</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="k">for</span> <span class="n">point_id</span><span class="p">,</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">payloads</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">payload</span> <span class="ow">and</span> <span class="s2">&quot;file_path&quot;</span> <span class="ow">in</span> <span class="n">payload</span> <span class="ow">and</span> <span class="s2">&quot;git_hash&quot;</span> <span class="ow">in</span> <span class="n">payload</span><span class="p">:</span>
				<span class="n">file_path</span> <span class="o">=</span> <span class="n">payload</span><span class="p">[</span><span class="s2">&quot;file_path&quot;</span><span class="p">]</span>
				<span class="n">git_hash</span> <span class="o">=</span> <span class="n">payload</span><span class="p">[</span><span class="s2">&quot;git_hash&quot;</span><span class="p">]</span>
				<span class="c1"># Store chunk_id as string, as Qdrant might return UUID objects</span>
				<span class="n">qdrant_state</span><span class="p">[</span><span class="n">file_path</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="n">point_id</span><span class="p">),</span> <span class="n">git_hash</span><span class="p">))</span>
				<span class="n">processed_count</span> <span class="o">+=</span> <span class="mi">1</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Point ID </span><span class="si">{</span><span class="n">point_id</span><span class="si">}</span><span class="s2"> is missing file_path or git_hash in payload.&quot;</span><span class="p">)</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved state for </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">qdrant_state</span><span class="p">)</span><span class="si">}</span><span class="s2"> files (</span><span class="si">{</span><span class="n">processed_count</span><span class="si">}</span><span class="s2"> chunks) from Qdrant.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">qdrant_state</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_compare_states</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">current_git_files</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
		<span class="n">qdrant_state</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]],</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare current Git state with Qdrant state to find differences.</span>

<span class="sd">		Args:</span>
<span class="sd">		    current_git_files: Dictionary mapping file paths to their current Git hash.</span>
<span class="sd">		    qdrant_state: Dictionary mapping file paths to sets of (chunk_id, git_hash).</span>

<span class="sd">		Returns:</span>
<span class="sd">		    tuple[set[str], set[str], set[str]]: A tuple containing:</span>
<span class="sd">		        - files_to_process: Files that are new or have changed hash.</span>
<span class="sd">		        - files_to_delete_chunks_for: Files that no longer exist in Git.</span>
<span class="sd">		        - chunks_to_delete: Specific chunk IDs to delete (e.g., from updated files).</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># current_git_files uses RELATIVE paths</span>
		<span class="c1"># qdrant_state uses ABSOLUTE paths as keys (based on stored metadata)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
			<span class="sa">f</span><span class="s2">&quot;[Compare Check] Comparing </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">current_git_files</span><span class="p">)</span><span class="si">}</span><span class="s2"> Git files with &quot;</span>
			<span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">qdrant_state</span><span class="p">)</span><span class="si">}</span><span class="s2"> files in Qdrant state.&quot;</span>
		<span class="p">)</span>

		<span class="n">git_relative_paths</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">current_git_files</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
		<span class="c1"># qdrant_absolute_paths = set(qdrant_state.keys()) # Removed unused variable F841</span>

		<span class="n">files_to_process</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># Store RELATIVE paths</span>
		<span class="n">chunks_to_delete</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
		<span class="n">processed_relative_paths</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># Keep track of relative paths found in Qdrant</span>

		<span class="c1"># Iterate through Qdrant state (absolute paths)</span>
		<span class="k">for</span> <span class="n">abs_path_str</span><span class="p">,</span> <span class="n">qdrant_chunks_set</span> <span class="ow">in</span> <span class="n">qdrant_state</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="n">relative_path_str</span> <span class="o">=</span> <span class="n">abs_path_str</span>  <span class="c1"># Default if conversion fails</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">abs_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">abs_path_str</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">():</span>
					<span class="n">relative_path</span> <span class="o">=</span> <span class="n">abs_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">)</span>
					<span class="n">relative_path_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">relative_path</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="c1"># If it&#39;s somehow already relative, log a warning but use it</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
						<span class="sa">f</span><span class="s2">&quot;[Compare Check] Could not make Qdrant path </span><span class="si">{</span><span class="n">abs_path_str</span><span class="si">}</span><span class="s2"> &quot;</span>
						<span class="sa">f</span><span class="s2">&quot;relative to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">. Skipping comparison for this path.&quot;</span>
					<span class="p">)</span>
					<span class="k">continue</span>  <span class="c1"># Skip to next item in qdrant_state</span>

			<span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
					<span class="sa">f</span><span class="s2">&quot;[Compare Check] Could not make Qdrant path </span><span class="si">{</span><span class="n">abs_path_str</span><span class="si">}</span><span class="s2"> &quot;</span>
					<span class="sa">f</span><span class="s2">&quot;relative to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">. Skipping comparison for this path.&quot;</span>
				<span class="p">)</span>
				<span class="k">continue</span>  <span class="c1"># Skip to next item in qdrant_state</span>

			<span class="n">processed_relative_paths</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">relative_path_str</span><span class="p">)</span>

			<span class="c1"># Check if this RELATIVE path exists in the current Git state</span>
			<span class="k">if</span> <span class="n">relative_path_str</span> <span class="ow">in</span> <span class="n">git_relative_paths</span><span class="p">:</span>
				<span class="c1"># File exists in both: Compare Hashes</span>
				<span class="n">current_hash</span> <span class="o">=</span> <span class="n">current_git_files</span><span class="p">[</span><span class="n">relative_path_str</span><span class="p">]</span>
				<span class="n">db_hashes</span> <span class="o">=</span> <span class="p">{</span><span class="n">git_hash</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">git_hash</span> <span class="ow">in</span> <span class="n">qdrant_chunks_set</span><span class="p">}</span>
				<span class="n">db_chunk_ids</span> <span class="o">=</span> <span class="p">{</span><span class="n">chunk_id</span> <span class="k">for</span> <span class="n">chunk_id</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">qdrant_chunks_set</span><span class="p">}</span>

				<span class="k">if</span> <span class="n">current_hash</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">db_hashes</span><span class="p">:</span>
					<span class="c1"># File content changed</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
						<span class="sa">f</span><span class="s2">&quot;[Compare Hash] Mismatch for </span><span class="si">{</span><span class="n">relative_path_str</span><span class="si">}</span><span class="s2">. &quot;</span>
						<span class="sa">f</span><span class="s2">&quot;Current: </span><span class="si">{</span><span class="n">current_hash</span><span class="si">}</span><span class="s2">, DB: </span><span class="si">{</span><span class="n">db_hashes</span><span class="si">}</span><span class="s2">. Marking for reprocessing and deletion.&quot;</span>
					<span class="p">)</span>
					<span class="n">files_to_process</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">relative_path_str</span><span class="p">)</span>
					<span class="n">chunks_to_delete</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">db_chunk_ids</span><span class="p">)</span>
				<span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">db_hashes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
					<span class="c1"># File hash matches, but stale entries exist</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
						<span class="sa">f</span><span class="s2">&quot;[Compare Hash] File &#39;</span><span class="si">{</span><span class="n">relative_path_str</span><span class="si">}</span><span class="s2">&#39; has matching hash &#39;</span><span class="si">{</span><span class="n">current_hash</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
						<span class="sa">f</span><span class="s2">&quot;but also stale entries in Qdrant. Cleaning up.&quot;</span>
					<span class="p">)</span>
					<span class="n">stale_chunk_ids</span> <span class="o">=</span> <span class="p">{</span><span class="n">chunk_id</span> <span class="k">for</span> <span class="n">chunk_id</span><span class="p">,</span> <span class="n">git_hash</span> <span class="ow">in</span> <span class="n">qdrant_chunks_set</span> <span class="k">if</span> <span class="n">git_hash</span> <span class="o">!=</span> <span class="n">current_hash</span><span class="p">}</span>
					<span class="n">chunks_to_delete</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">stale_chunk_ids</span><span class="p">)</span>
				<span class="c1"># Else: Hash matches and no stale entries -&gt; Do nothing for this file</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># File exists in Git but not in Qdrant state (handled below)</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[Compare Check] File deleted from Git: </span><span class="si">{</span><span class="n">relative_path_str</span><span class="si">}</span><span class="s2">. Marking chunks for deletion.&quot;</span><span class="p">)</span>
				<span class="n">chunks_to_delete</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">chunk_id</span> <span class="k">for</span> <span class="n">chunk_id</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">qdrant_chunks_set</span><span class="p">)</span>

		<span class="c1"># Now find files that are ONLY in Git (new files)</span>
		<span class="n">new_git_files</span> <span class="o">=</span> <span class="n">git_relative_paths</span> <span class="o">-</span> <span class="n">processed_relative_paths</span>
		<span class="n">files_to_process</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">new_git_files</span><span class="p">)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[Compare Check] Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">new_git_files</span><span class="p">)</span><span class="si">}</span><span class="s2"> new files in Git to process.&quot;</span><span class="p">)</span>

		<span class="c1"># We don&#39;t use files_to_delete_chunks_for currently, assign to _</span>
		<span class="n">files_to_delete_chunks_for</span> <span class="o">=</span> <span class="p">{</span><span class="n">rp</span> <span class="k">for</span> <span class="n">rp</span> <span class="ow">in</span> <span class="n">processed_relative_paths</span> <span class="k">if</span> <span class="n">rp</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">git_relative_paths</span><span class="p">}</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
			<span class="sa">f</span><span class="s2">&quot;[Compare Check] Result: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files_to_process</span><span class="p">)</span><span class="si">}</span><span class="s2"> relative files to process, &quot;</span>
			<span class="c1"># f&quot;{len(files_to_delete_chunks_for)} files with all chunks to delete, &quot;</span>
			<span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">chunks_to_delete</span><span class="p">)</span><span class="si">}</span><span class="s2"> specific chunks to delete.&quot;</span>
		<span class="p">)</span>
		<span class="c1"># Return relative paths for processing, and chunk IDs to delete</span>
		<span class="k">return</span> <span class="n">files_to_process</span><span class="p">,</span> <span class="n">files_to_delete_chunks_for</span><span class="p">,</span> <span class="n">chunks_to_delete</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_and_upsert_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chunk_batch</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">CodeChunk</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Process a batch of chunks by generating embeddings and upserting to Qdrant.</span>

<span class="sd">		Args:</span>
<span class="sd">		    chunk_batch: List of CodeChunk objects to process. Each chunk contains content</span>
<span class="sd">		        and metadata about a code segment.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    int: Number of points successfully upserted to Qdrant. Returns 0 if:</span>
<span class="sd">		        - Input batch is empty</span>
<span class="sd">		        - Embedding generation fails</span>
<span class="sd">		        - No points are generated from the batch</span>

<span class="sd">		Raises:</span>
<span class="sd">		    RuntimeError: If there&#39;s a mismatch between input chunks and generated embeddings.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">chunk_batch</span><span class="p">:</span>
			<span class="k">return</span> <span class="mi">0</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing batch of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">chunk_batch</span><span class="p">)</span><span class="si">}</span><span class="s2"> chunks for embedding and upsert.&quot;</span><span class="p">)</span>
		<span class="n">texts_to_embed</span> <span class="o">=</span> <span class="p">[</span><span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunk_batch</span><span class="p">]</span>
		<span class="n">embeddings</span> <span class="o">=</span> <span class="k">await</span> <span class="n">generate_embeddings_batch</span><span class="p">(</span>
			<span class="n">texts_to_embed</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span><span class="p">,</span> <span class="n">config_loader</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span>
		<span class="p">)</span>

		<span class="k">if</span> <span class="n">embeddings</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">chunk_batch</span><span class="p">):</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
				<span class="s2">&quot;Embed batch failed: &quot;</span>
				<span class="sa">f</span><span class="s2">&quot;got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">embeddings</span><span class="p">)</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">embeddings</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="mi">0</span><span class="si">}</span><span class="s2">, &quot;</span>
				<span class="sa">f</span><span class="s2">&quot;expected </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">chunk_batch</span><span class="p">)</span><span class="si">}</span><span class="s2">. Skipping.&quot;</span>
			<span class="p">)</span>
			<span class="c1"># Log details of the failed batch chunks if possible</span>
			<span class="n">failed_files</span> <span class="o">=</span> <span class="p">{</span><span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file_path&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunk_batch</span><span class="p">}</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed batch involved files: </span><span class="si">{</span><span class="n">failed_files</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="mi">0</span>

		<span class="n">points_to_upsert</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">embedding</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">chunk_batch</span><span class="p">,</span> <span class="n">embeddings</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>  <span class="c1"># Use strict=True</span>
			<span class="c1"># Get the original file path from metadata (likely absolute)</span>
			<span class="n">original_file_path_str</span> <span class="o">=</span> <span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file_path&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">)</span>

			<span class="c1"># No longer converting to relative path here. Let the original path be stored.</span>
			<span class="c1"># relative_path_str = original_file_path_str ...</span>

			<span class="n">chunk_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
			<span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">][</span><span class="s2">&quot;chunk_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">chunk_id</span>
			<span class="c1"># Ensure the file_path in metadata remains as it came from the chunker</span>
			<span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">][</span><span class="s2">&quot;file_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">original_file_path_str</span>
			<span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;dict[str, Any]&quot;</span><span class="p">,</span> <span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">])</span>
			<span class="n">point</span> <span class="o">=</span> <span class="n">create_qdrant_point</span><span class="p">(</span><span class="n">chunk_id</span><span class="p">,</span> <span class="n">embedding</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
			<span class="n">points_to_upsert</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">points_to_upsert</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">upsert_points</span><span class="p">(</span><span class="n">points_to_upsert</span><span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully upserted </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">points_to_upsert</span><span class="p">)</span><span class="si">}</span><span class="s2"> points from batch.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">points_to_upsert</span><span class="p">)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No points generated from batch to upsert.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">0</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sync_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="n">Progress</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="p">:</span> <span class="n">TaskID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Asynchronously synchronize the Qdrant index with the current repository state.</span>

<span class="sd">		Args:</span>
<span class="sd">		    progress: Optional rich Progress instance for UI updates.</span>
<span class="sd">		    task_id: Optional rich TaskID for progress tracking.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    True if synchronization completed successfully, False otherwise.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">sync_success</span> <span class="o">=</span> <span class="kc">False</span>
		<span class="n">final_message</span> <span class="o">=</span> <span class="s2">&quot;[red]Error:[/red] Index sync failed (initialization error).&quot;</span>
		<span class="n">total_steps</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># Git state, Qdrant state, Compare, Delete, Process</span>
		<span class="n">current_step</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">processed_chunk_count</span> <span class="o">=</span> <span class="mi">0</span>

		<span class="k">def</span><span class="w"> </span><span class="nf">update_progress</span><span class="p">(</span><span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">step_increment</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">processed_chunks</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">			</span><span class="sd">&quot;&quot;&quot;Updates the progress bar with current synchronization status.</span>

<span class="sd">			Args:</span>
<span class="sd">				description: Main description text to display in progress bar.</span>
<span class="sd">				step_increment: Number of steps to increment progress by. Defaults to 1.</span>
<span class="sd">				processed_chunks: Number of chunks processed in this update. Defaults to 0.</span>
<span class="sd">					If greater than 0, will be appended to description in parentheses.</span>

<span class="sd">			Returns:</span>
<span class="sd">				None</span>
<span class="sd">			&quot;&quot;&quot;</span>
			<span class="k">nonlocal</span> <span class="n">current_step</span><span class="p">,</span> <span class="n">processed_chunk_count</span>
			<span class="n">current_step</span> <span class="o">+=</span> <span class="n">step_increment</span>
			<span class="n">processed_chunk_count</span> <span class="o">+=</span> <span class="n">processed_chunks</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
				<span class="c1"># Add processed chunk count to description if relevant</span>
				<span class="n">desc_with_count</span> <span class="o">=</span> <span class="n">description</span>
				<span class="k">if</span> <span class="n">processed_chunk_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
					<span class="n">desc_with_count</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="n">processed_chunk_count</span><span class="si">}</span><span class="s2"> chunks processed)&quot;</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
					<span class="n">task_id</span><span class="p">,</span>
					<span class="n">description</span><span class="o">=</span><span class="n">desc_with_count</span><span class="p">,</span>
					<span class="n">completed</span><span class="o">=</span><span class="p">(</span><span class="n">current_step</span> <span class="o">/</span> <span class="n">total_steps</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
				<span class="p">)</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

			<span class="c1"># Ensure VoyageAI client for token counting is ready</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">voyage_client</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;VoyageAI client for token counting is not initialized. Cannot proceed.&quot;</span><span class="p">)</span>
				<span class="n">final_message</span> <span class="o">=</span> <span class="s2">&quot;[red]Error:[/red] VoyageAI client init failed.&quot;</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">final_message</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
				<span class="k">return</span> <span class="kc">False</span>

			<span class="c1"># 1. Get current Git state (tracked files and hashes)</span>
			<span class="n">update_progress</span><span class="p">(</span><span class="s2">&quot;[1/5] Reading Git tracked files...&quot;</span><span class="p">,</span> <span class="n">step_increment</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
			<span class="n">git_files_raw</span> <span class="o">=</span> <span class="n">get_git_tracked_files</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">git_files_raw</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to retrieve Git tracked files.&quot;</span><span class="p">)</span>
				<span class="c1"># Use the initialized final_message</span>
				<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
					<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">final_message</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
				<span class="k">return</span> <span class="kc">False</span>

			<span class="c1"># Filter out excluded files</span>
			<span class="n">git_files</span> <span class="o">=</span> <span class="p">{</span><span class="n">fp</span><span class="p">:</span> <span class="n">h</span> <span class="k">for</span> <span class="n">fp</span><span class="p">,</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">git_files_raw</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">_should_exclude_path</span><span class="p">(</span><span class="n">fp</span><span class="p">)}</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">git_files</span><span class="p">)</span><span class="si">}</span><span class="s2"> tracked files in Git (after exclusion).&quot;</span><span class="p">)</span>
			<span class="n">update_progress</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[1/5] Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">git_files</span><span class="p">)</span><span class="si">}</span><span class="s2"> tracked files.&quot;</span><span class="p">)</span>

			<span class="c1"># 2. Get current Qdrant state (file paths -&gt; chunk IDs and hashes)</span>
			<span class="n">update_progress</span><span class="p">(</span><span class="s2">&quot;[2/5] Retrieving existing vector state...&quot;</span><span class="p">)</span>
			<span class="n">qdrant_state</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_qdrant_state</span><span class="p">()</span>

			<span class="c1"># 3. Compare states</span>
			<span class="n">update_progress</span><span class="p">(</span><span class="s2">&quot;[3/5] Comparing Git state with vector state...&quot;</span><span class="p">)</span>
			<span class="c1"># Use _ for the unused &#39;files_to_delete_chunks_for&#39; variable</span>
			<span class="n">files_to_process</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">chunks_to_delete</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compare_states</span><span class="p">(</span><span class="n">git_files</span><span class="p">,</span> <span class="n">qdrant_state</span><span class="p">)</span>

			<span class="c1"># 4. Delete outdated chunks</span>
			<span class="n">update_progress</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[4/5] Deleting </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">chunks_to_delete</span><span class="p">)</span><span class="si">}</span><span class="s2"> outdated vectors...&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">chunks_to_delete</span><span class="p">:</span>
				<span class="c1"># Delete in batches</span>
				<span class="n">delete_ids_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">chunks_to_delete</span><span class="p">)</span>
				<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">delete_ids_list</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_batch_size</span><span class="p">):</span>
					<span class="n">batch_ids</span> <span class="o">=</span> <span class="n">delete_ids_list</span><span class="p">[</span><span class="n">i</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_batch_size</span><span class="p">]</span>
					<span class="c1"># Use cast to handle type checking</span>
					<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">delete_points</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;list[str | int | uuid.UUID]&quot;</span><span class="p">,</span> <span class="n">batch_ids</span><span class="p">))</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleted batch of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">batch_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> vectors.&quot;</span><span class="p">)</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Finished deleting </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">chunks_to_delete</span><span class="p">)</span><span class="si">}</span><span class="s2"> vectors.&quot;</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;No vectors to delete.&quot;</span><span class="p">)</span>

			<span class="c1"># 5. Process new/updated files - **REFACTORED BATCHING LOGIC**</span>
			<span class="n">update_progress</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[5/5] Processing </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files_to_process</span><span class="p">)</span><span class="si">}</span><span class="s2"> new/updated files...&quot;</span><span class="p">)</span>
			<span class="n">files_processed_count</span> <span class="o">=</span> <span class="mi">0</span>

			<span class="c1"># Batching variables</span>
			<span class="n">current_chunk_batch</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">CodeChunk</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
			<span class="n">current_batch_token_count</span> <span class="o">=</span> <span class="mi">0</span>

			<span class="k">for</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">files_to_process</span><span class="p">:</span>
				<span class="n">git_hash</span> <span class="o">=</span> <span class="n">git_files</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">git_hash</span><span class="p">:</span>
					<span class="n">absolute_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span> <span class="o">/</span> <span class="n">file_path</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Chunking file: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
						<span class="c1"># Use iter_chunk_file if available, otherwise list()</span>
						<span class="n">file_chunks</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chunker</span><span class="o">.</span><span class="n">chunk_file</span><span class="p">(</span><span class="n">absolute_path</span><span class="p">,</span> <span class="n">git_hash</span><span class="p">))</span>

						<span class="k">if</span> <span class="ow">not</span> <span class="n">file_chunks</span><span class="p">:</span>
							<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No chunks generated for file: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
							<span class="k">continue</span>  <span class="c1"># Skip to next file</span>

						<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">file_chunks</span><span class="p">:</span>
							<span class="c1"># Estimate token count for the chunk content</span>
							<span class="n">chunk_text</span> <span class="o">=</span> <span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
							<span class="k">try</span><span class="p">:</span>
								<span class="c1"># Note: count_tokens expects a list</span>
								<span class="n">chunk_token_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">voyage_client</span><span class="o">.</span><span class="n">count_tokens</span><span class="p">(</span>
									<span class="p">[</span><span class="n">chunk_text</span><span class="p">],</span> <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span>
								<span class="p">)</span>
							<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
								<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to count tokens for chunk in </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">. Skipping chunk.&quot;</span><span class="p">)</span>
								<span class="k">continue</span>  <span class="c1"># Skip this chunk</span>

							<span class="c1"># Check if adding this chunk exceeds the limit</span>
							<span class="k">if</span> <span class="p">(</span>
								<span class="n">current_batch_token_count</span> <span class="o">+</span> <span class="n">chunk_token_count</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">voyage_token_limit</span>
								<span class="ow">and</span> <span class="n">current_chunk_batch</span>
							<span class="p">):</span>
								<span class="c1"># Process the current batch before adding the new chunk</span>
								<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
									<span class="sa">f</span><span class="s2">&quot;Token limit (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">voyage_token_limit</span><span class="si">}</span><span class="s2">) reached. &quot;</span>
									<span class="sa">f</span><span class="s2">&quot;Processing batch (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">current_chunk_batch</span><span class="p">)</span><span class="si">}</span><span class="s2"> chunks).&quot;</span>
								<span class="p">)</span>
								<span class="n">upserted_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_and_upsert_batch</span><span class="p">(</span><span class="n">current_chunk_batch</span><span class="p">)</span>
								<span class="n">update_progress</span><span class="p">(</span>
									<span class="sa">f</span><span class="s2">&quot;[5/5] Processing </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files_to_process</span><span class="p">)</span><span class="si">}</span><span class="s2"> files...&quot;</span><span class="p">,</span>
									<span class="n">step_increment</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
									<span class="n">processed_chunks</span><span class="o">=</span><span class="n">upserted_count</span><span class="p">,</span>
								<span class="p">)</span>

								<span class="c1"># Reset batch</span>
								<span class="n">current_chunk_batch</span> <span class="o">=</span> <span class="p">[]</span>
								<span class="n">current_batch_token_count</span> <span class="o">=</span> <span class="mi">0</span>

							<span class="c1"># Add the current chunk to the (potentially new) batch</span>
							<span class="c1"># Ensure chunk_token_count itself isn&#39;t over the limit (handle large chunks)</span>
							<span class="k">if</span> <span class="n">chunk_token_count</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">voyage_token_limit</span><span class="p">:</span>
								<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
									<span class="sa">f</span><span class="s2">&quot;Chunk in </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">chunk</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;start_line&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">-...) &quot;</span>
									<span class="sa">f</span><span class="s2">&quot;exceeds token limit (</span><span class="si">{</span><span class="n">chunk_token_count</span><span class="si">}</span><span class="s2"> &gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">voyage_token_limit</span><span class="si">}</span><span class="s2">). Skipping.&quot;</span>
								<span class="p">)</span>
								<span class="k">continue</span>  <span class="c1"># Skip this large chunk</span>

							<span class="n">current_chunk_batch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
							<span class="n">current_batch_token_count</span> <span class="o">+=</span> <span class="n">chunk_token_count</span>

					<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error processing file </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2"> during sync&quot;</span><span class="p">)</span>
						<span class="c1"># Decide if we should continue with other files or stop</span>
						<span class="k">continue</span>  <span class="c1"># Continue processing other files</span>

				<span class="n">files_processed_count</span> <span class="o">+=</span> <span class="mi">1</span>

			<span class="c1"># Process any remaining chunks in the last batch</span>
			<span class="k">if</span> <span class="n">current_chunk_batch</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
					<span class="sa">f</span><span class="s2">&quot;Processing final batch of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">current_chunk_batch</span><span class="p">)</span><span class="si">}</span><span class="s2"> chunks (</span><span class="si">{</span><span class="n">current_batch_token_count</span><span class="si">}</span><span class="s2"> tokens).&quot;</span>
				<span class="p">)</span>
				<span class="n">upserted_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_and_upsert_batch</span><span class="p">(</span><span class="n">current_chunk_batch</span><span class="p">)</span>
				<span class="n">update_progress</span><span class="p">(</span><span class="s2">&quot;[5/5] Final batch processed...&quot;</span><span class="p">,</span> <span class="n">step_increment</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">processed_chunks</span><span class="o">=</span><span class="n">upserted_count</span><span class="p">)</span>

			<span class="n">sync_success</span> <span class="o">=</span> <span class="kc">True</span>
			<span class="n">final_message</span> <span class="o">=</span> <span class="p">(</span>
				<span class="sa">f</span><span class="s2">&quot;[green]✓[/green] Vector index synchronized. </span><span class="si">{</span><span class="n">processed_chunk_count</span><span class="si">}</span><span class="s2"> chunks processed/upserted.&quot;</span>
			<span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Vector index synchronization completed successfully.&quot;</span><span class="p">)</span>

		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;An unexpected error occurred during index synchronization&quot;</span><span class="p">)</span>
			<span class="n">final_message</span> <span class="o">=</span> <span class="s2">&quot;[red]Error:[/red] Index sync failed unexpectedly.&quot;</span>
			<span class="n">sync_success</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Ensure success is False on exception</span>
		<span class="k">finally</span><span class="p">:</span>
			<span class="c1"># Final progress update</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">final_message</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">sync_success</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
	<span class="nf">repo_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span>
	<span class="n">qdrant_manager</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;QdrantManager&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.qdrant_manager.QdrantManager&lt;/code&gt;)" href="#codemap.processor.vector.qdrant_manager.QdrantManager">QdrantManager</a></span><span class="p">,</span>
	<span class="n">chunker</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TreeSitterChunker&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.chunking.TreeSitterChunker&lt;/code&gt;)" href="#codemap.processor.vector.chunking.TreeSitterChunker">TreeSitterChunker</a></span><span class="p">,</span>
	<span class="n">embedding_model_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">analyzer</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TreeSitterAnalyzer&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer&lt;/code&gt;)" href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer">TreeSitterAnalyzer</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">config_loader</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the vector synchronizer.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>repo_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the git repository root.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>qdrant_manager</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;QdrantManager&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.qdrant_manager.QdrantManager&lt;/code&gt;)" href="#codemap.processor.vector.qdrant_manager.QdrantManager">QdrantManager</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Instance of QdrantManager to handle vector storage.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>chunker</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TreeSitterChunker&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.chunking.TreeSitterChunker&lt;/code&gt;)" href="#codemap.processor.vector.chunking.TreeSitterChunker">TreeSitterChunker</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Instance of chunker used to create code chunks.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>embedding_model_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the embedding model to use.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>analyzer</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TreeSitterAnalyzer&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer&lt;/code&gt;)" href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer">TreeSitterAnalyzer</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional TreeSitterAnalyzer instance.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config_loader</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration loader instance.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/synchronizer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">repo_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
	<span class="n">qdrant_manager</span><span class="p">:</span> <span class="n">QdrantManager</span><span class="p">,</span>
	<span class="n">chunker</span><span class="p">:</span> <span class="n">TreeSitterChunker</span><span class="p">,</span>
	<span class="n">embedding_model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
	<span class="n">analyzer</span><span class="p">:</span> <span class="n">TreeSitterAnalyzer</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Initialize the vector synchronizer.</span>

<span class="sd">	Args:</span>
<span class="sd">	    repo_path: Path to the git repository root.</span>
<span class="sd">	    qdrant_manager: Instance of QdrantManager to handle vector storage.</span>
<span class="sd">	    chunker: Instance of chunker used to create code chunks.</span>
<span class="sd">	    embedding_model_name: Name of the embedding model to use.</span>
<span class="sd">	    analyzer: Optional TreeSitterAnalyzer instance.</span>
<span class="sd">	    config_loader: Configuration loader instance.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span> <span class="o">=</span> <span class="n">repo_path</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="n">qdrant_manager</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">chunker</span> <span class="o">=</span> <span class="n">chunker</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span> <span class="o">=</span> <span class="n">embedding_model_name</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">analyzer</span> <span class="ow">or</span> <span class="n">TreeSitterAnalyzer</span><span class="p">()</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span> <span class="o">=</span> <span class="n">config_loader</span> <span class="ow">or</span> <span class="n">ConfigLoader</span><span class="p">()</span>

	<span class="c1"># Get configuration values</span>
	<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;batch_size&quot;</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">qdrant_batch_size</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_batch_size&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">voyage_token_limit</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;voyage_token_limit&quot;</span><span class="p">,</span> <span class="n">DEFAULT_VOYAGE_TOKEN_LIMIT</span><span class="p">)</span>

	<span class="c1"># Instantiate synchronous VoyageAI client for token counting</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="c1"># API key is picked up from environment automatically</span>
		<span class="c1"># type: ignore for linter error on Client export</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">voyage_client</span> <span class="o">=</span> <span class="n">voyageai</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>  <span class="c1"># type: ignore[arg-type]</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;VoyageAI client initialized for token counting.&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to initialize VoyageAI client for token counting. Ensure VOYAGE_API_KEY is set.&quot;</span><span class="p">)</span>
		<span class="c1"># Depending on requirements, might want to raise here or handle gracefully</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">voyage_client</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
		<span class="sa">f</span><span class="s2">&quot;VectorSynchronizer initialized for repo: </span><span class="si">{</span><span class="n">repo_path</span><span class="si">}</span><span class="s2"> &quot;</span>
		<span class="sa">f</span><span class="s2">&quot;using Qdrant collection: &#39;</span><span class="si">{</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
		<span class="sa">f</span><span class="s2">&quot;and embedding model: </span><span class="si">{</span><span class="n">embedding_model_name</span><span class="si">}</span><span class="s2">&quot;</span>
	<span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.repo_path" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">repo_path</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">repo_path</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.synchronizer.VectorSynchronizer(repo_path)">repo_path</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.qdrant_manager" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">qdrant_manager</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">qdrant_manager</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.synchronizer.VectorSynchronizer(qdrant_manager)">qdrant_manager</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.chunker" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">chunker</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">chunker</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.synchronizer.VectorSynchronizer(chunker)">chunker</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.embedding_model_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">embedding_model_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">embedding_model_name</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.synchronizer.VectorSynchronizer(embedding_model_name)">embedding_model_name</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.analyzer" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">analyzer</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">analyzer</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.synchronizer.VectorSynchronizer(analyzer)">analyzer</span></span> <span class="ow">or</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TreeSitterAnalyzer&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer&lt;/code&gt;)" href="#codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer">TreeSitterAnalyzer</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.config_loader" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_loader</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config_loader</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.synchronizer.VectorSynchronizer(config_loader)">config_loader</span></span> <span class="ow">or</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.batch_size" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">batch_size</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">batch_size</span> <span class="o">=</span> <span class="n"><span title="embedding_config.get">get</span></span><span class="p">(</span><span class="s1">&#39;batch_size&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.qdrant_batch_size" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">qdrant_batch_size</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">qdrant_batch_size</span> <span class="o">=</span> <span class="n"><span title="embedding_config.get">get</span></span><span class="p">(</span><span class="s1">&#39;qdrant_batch_size&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.voyage_token_limit" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">voyage_token_limit</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">voyage_token_limit</span> <span class="o">=</span> <span class="n"><span title="embedding_config.get">get</span></span><span class="p">(</span>
	<span class="s2">&quot;voyage_token_limit&quot;</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-attribute-name&quot;&gt;DEFAULT_VOYAGE_TOKEN_LIMIT&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.vector.synchronizer.DEFAULT_VOYAGE_TOKEN_LIMIT&lt;/code&gt;)" href="#codemap.processor.vector.synchronizer.DEFAULT_VOYAGE_TOKEN_LIMIT">DEFAULT_VOYAGE_TOKEN_LIMIT</a></span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.voyage_client" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">voyage_client</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">voyage_client</span> <span class="o">=</span> <span class="n"><span title="voyageai.Client">Client</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.synchronizer.VectorSynchronizer.sync_index" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">sync_index</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sync_index</span><span class="p">(</span>
	<span class="n">progress</span><span class="p">:</span> <span class="n"><span title="rich.progress.Progress">Progress</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">task_id</span><span class="p">:</span> <span class="n"><span title="rich.progress.TaskID">TaskID</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="bool">bool</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Asynchronously synchronize the Qdrant index with the current repository state.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>progress</code>
            </td>
            <td>
                  <code><span title="rich.progress.Progress">Progress</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rich Progress instance for UI updates.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>task_id</code>
            </td>
            <td>
                  <code><span title="rich.progress.TaskID">TaskID</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional rich TaskID for progress tracking.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if synchronization completed successfully, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/synchronizer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">sync_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="n">Progress</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">task_id</span><span class="p">:</span> <span class="n">TaskID</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Asynchronously synchronize the Qdrant index with the current repository state.</span>

<span class="sd">	Args:</span>
<span class="sd">	    progress: Optional rich Progress instance for UI updates.</span>
<span class="sd">	    task_id: Optional rich TaskID for progress tracking.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    True if synchronization completed successfully, False otherwise.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">sync_success</span> <span class="o">=</span> <span class="kc">False</span>
	<span class="n">final_message</span> <span class="o">=</span> <span class="s2">&quot;[red]Error:[/red] Index sync failed (initialization error).&quot;</span>
	<span class="n">total_steps</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># Git state, Qdrant state, Compare, Delete, Process</span>
	<span class="n">current_step</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">processed_chunk_count</span> <span class="o">=</span> <span class="mi">0</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">update_progress</span><span class="p">(</span><span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">step_increment</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">processed_chunks</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Updates the progress bar with current synchronization status.</span>

<span class="sd">		Args:</span>
<span class="sd">			description: Main description text to display in progress bar.</span>
<span class="sd">			step_increment: Number of steps to increment progress by. Defaults to 1.</span>
<span class="sd">			processed_chunks: Number of chunks processed in this update. Defaults to 0.</span>
<span class="sd">				If greater than 0, will be appended to description in parentheses.</span>

<span class="sd">		Returns:</span>
<span class="sd">			None</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">nonlocal</span> <span class="n">current_step</span><span class="p">,</span> <span class="n">processed_chunk_count</span>
		<span class="n">current_step</span> <span class="o">+=</span> <span class="n">step_increment</span>
		<span class="n">processed_chunk_count</span> <span class="o">+=</span> <span class="n">processed_chunks</span>
		<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="c1"># Add processed chunk count to description if relevant</span>
			<span class="n">desc_with_count</span> <span class="o">=</span> <span class="n">description</span>
			<span class="k">if</span> <span class="n">processed_chunk_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
				<span class="n">desc_with_count</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="n">processed_chunk_count</span><span class="si">}</span><span class="s2"> chunks processed)&quot;</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
				<span class="n">task_id</span><span class="p">,</span>
				<span class="n">description</span><span class="o">=</span><span class="n">desc_with_count</span><span class="p">,</span>
				<span class="n">completed</span><span class="o">=</span><span class="p">(</span><span class="n">current_step</span> <span class="o">/</span> <span class="n">total_steps</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
			<span class="p">)</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

		<span class="c1"># Ensure VoyageAI client for token counting is ready</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">voyage_client</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;VoyageAI client for token counting is not initialized. Cannot proceed.&quot;</span><span class="p">)</span>
			<span class="n">final_message</span> <span class="o">=</span> <span class="s2">&quot;[red]Error:[/red] VoyageAI client init failed.&quot;</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">final_message</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">False</span>

		<span class="c1"># 1. Get current Git state (tracked files and hashes)</span>
		<span class="n">update_progress</span><span class="p">(</span><span class="s2">&quot;[1/5] Reading Git tracked files...&quot;</span><span class="p">,</span> <span class="n">step_increment</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">git_files_raw</span> <span class="o">=</span> <span class="n">get_git_tracked_files</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">git_files_raw</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to retrieve Git tracked files.&quot;</span><span class="p">)</span>
			<span class="c1"># Use the initialized final_message</span>
			<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span><span class="p">:</span>
				<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">final_message</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">False</span>

		<span class="c1"># Filter out excluded files</span>
		<span class="n">git_files</span> <span class="o">=</span> <span class="p">{</span><span class="n">fp</span><span class="p">:</span> <span class="n">h</span> <span class="k">for</span> <span class="n">fp</span><span class="p">,</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">git_files_raw</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">_should_exclude_path</span><span class="p">(</span><span class="n">fp</span><span class="p">)}</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">git_files</span><span class="p">)</span><span class="si">}</span><span class="s2"> tracked files in Git (after exclusion).&quot;</span><span class="p">)</span>
		<span class="n">update_progress</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[1/5] Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">git_files</span><span class="p">)</span><span class="si">}</span><span class="s2"> tracked files.&quot;</span><span class="p">)</span>

		<span class="c1"># 2. Get current Qdrant state (file paths -&gt; chunk IDs and hashes)</span>
		<span class="n">update_progress</span><span class="p">(</span><span class="s2">&quot;[2/5] Retrieving existing vector state...&quot;</span><span class="p">)</span>
		<span class="n">qdrant_state</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_qdrant_state</span><span class="p">()</span>

		<span class="c1"># 3. Compare states</span>
		<span class="n">update_progress</span><span class="p">(</span><span class="s2">&quot;[3/5] Comparing Git state with vector state...&quot;</span><span class="p">)</span>
		<span class="c1"># Use _ for the unused &#39;files_to_delete_chunks_for&#39; variable</span>
		<span class="n">files_to_process</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">chunks_to_delete</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compare_states</span><span class="p">(</span><span class="n">git_files</span><span class="p">,</span> <span class="n">qdrant_state</span><span class="p">)</span>

		<span class="c1"># 4. Delete outdated chunks</span>
		<span class="n">update_progress</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[4/5] Deleting </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">chunks_to_delete</span><span class="p">)</span><span class="si">}</span><span class="s2"> outdated vectors...&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">chunks_to_delete</span><span class="p">:</span>
			<span class="c1"># Delete in batches</span>
			<span class="n">delete_ids_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">chunks_to_delete</span><span class="p">)</span>
			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">delete_ids_list</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_batch_size</span><span class="p">):</span>
				<span class="n">batch_ids</span> <span class="o">=</span> <span class="n">delete_ids_list</span><span class="p">[</span><span class="n">i</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_batch_size</span><span class="p">]</span>
				<span class="c1"># Use cast to handle type checking</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">qdrant_manager</span><span class="o">.</span><span class="n">delete_points</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;list[str | int | uuid.UUID]&quot;</span><span class="p">,</span> <span class="n">batch_ids</span><span class="p">))</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleted batch of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">batch_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> vectors.&quot;</span><span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Finished deleting </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">chunks_to_delete</span><span class="p">)</span><span class="si">}</span><span class="s2"> vectors.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;No vectors to delete.&quot;</span><span class="p">)</span>

		<span class="c1"># 5. Process new/updated files - **REFACTORED BATCHING LOGIC**</span>
		<span class="n">update_progress</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[5/5] Processing </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files_to_process</span><span class="p">)</span><span class="si">}</span><span class="s2"> new/updated files...&quot;</span><span class="p">)</span>
		<span class="n">files_processed_count</span> <span class="o">=</span> <span class="mi">0</span>

		<span class="c1"># Batching variables</span>
		<span class="n">current_chunk_batch</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">CodeChunk</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">current_batch_token_count</span> <span class="o">=</span> <span class="mi">0</span>

		<span class="k">for</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="n">files_to_process</span><span class="p">:</span>
			<span class="n">git_hash</span> <span class="o">=</span> <span class="n">git_files</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">git_hash</span><span class="p">:</span>
				<span class="n">absolute_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo_path</span> <span class="o">/</span> <span class="n">file_path</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Chunking file: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="c1"># Use iter_chunk_file if available, otherwise list()</span>
					<span class="n">file_chunks</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chunker</span><span class="o">.</span><span class="n">chunk_file</span><span class="p">(</span><span class="n">absolute_path</span><span class="p">,</span> <span class="n">git_hash</span><span class="p">))</span>

					<span class="k">if</span> <span class="ow">not</span> <span class="n">file_chunks</span><span class="p">:</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No chunks generated for file: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
						<span class="k">continue</span>  <span class="c1"># Skip to next file</span>

					<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">file_chunks</span><span class="p">:</span>
						<span class="c1"># Estimate token count for the chunk content</span>
						<span class="n">chunk_text</span> <span class="o">=</span> <span class="n">chunk</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
						<span class="k">try</span><span class="p">:</span>
							<span class="c1"># Note: count_tokens expects a list</span>
							<span class="n">chunk_token_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">voyage_client</span><span class="o">.</span><span class="n">count_tokens</span><span class="p">(</span>
								<span class="p">[</span><span class="n">chunk_text</span><span class="p">],</span> <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">embedding_model_name</span>
							<span class="p">)</span>
						<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
							<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to count tokens for chunk in </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">. Skipping chunk.&quot;</span><span class="p">)</span>
							<span class="k">continue</span>  <span class="c1"># Skip this chunk</span>

						<span class="c1"># Check if adding this chunk exceeds the limit</span>
						<span class="k">if</span> <span class="p">(</span>
							<span class="n">current_batch_token_count</span> <span class="o">+</span> <span class="n">chunk_token_count</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">voyage_token_limit</span>
							<span class="ow">and</span> <span class="n">current_chunk_batch</span>
						<span class="p">):</span>
							<span class="c1"># Process the current batch before adding the new chunk</span>
							<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
								<span class="sa">f</span><span class="s2">&quot;Token limit (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">voyage_token_limit</span><span class="si">}</span><span class="s2">) reached. &quot;</span>
								<span class="sa">f</span><span class="s2">&quot;Processing batch (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">current_chunk_batch</span><span class="p">)</span><span class="si">}</span><span class="s2"> chunks).&quot;</span>
							<span class="p">)</span>
							<span class="n">upserted_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_and_upsert_batch</span><span class="p">(</span><span class="n">current_chunk_batch</span><span class="p">)</span>
							<span class="n">update_progress</span><span class="p">(</span>
								<span class="sa">f</span><span class="s2">&quot;[5/5] Processing </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files_to_process</span><span class="p">)</span><span class="si">}</span><span class="s2"> files...&quot;</span><span class="p">,</span>
								<span class="n">step_increment</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
								<span class="n">processed_chunks</span><span class="o">=</span><span class="n">upserted_count</span><span class="p">,</span>
							<span class="p">)</span>

							<span class="c1"># Reset batch</span>
							<span class="n">current_chunk_batch</span> <span class="o">=</span> <span class="p">[]</span>
							<span class="n">current_batch_token_count</span> <span class="o">=</span> <span class="mi">0</span>

						<span class="c1"># Add the current chunk to the (potentially new) batch</span>
						<span class="c1"># Ensure chunk_token_count itself isn&#39;t over the limit (handle large chunks)</span>
						<span class="k">if</span> <span class="n">chunk_token_count</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">voyage_token_limit</span><span class="p">:</span>
							<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
								<span class="sa">f</span><span class="s2">&quot;Chunk in </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">chunk</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;start_line&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">-...) &quot;</span>
								<span class="sa">f</span><span class="s2">&quot;exceeds token limit (</span><span class="si">{</span><span class="n">chunk_token_count</span><span class="si">}</span><span class="s2"> &gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">voyage_token_limit</span><span class="si">}</span><span class="s2">). Skipping.&quot;</span>
							<span class="p">)</span>
							<span class="k">continue</span>  <span class="c1"># Skip this large chunk</span>

						<span class="n">current_chunk_batch</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
						<span class="n">current_batch_token_count</span> <span class="o">+=</span> <span class="n">chunk_token_count</span>

				<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error processing file </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2"> during sync&quot;</span><span class="p">)</span>
					<span class="c1"># Decide if we should continue with other files or stop</span>
					<span class="k">continue</span>  <span class="c1"># Continue processing other files</span>

			<span class="n">files_processed_count</span> <span class="o">+=</span> <span class="mi">1</span>

		<span class="c1"># Process any remaining chunks in the last batch</span>
		<span class="k">if</span> <span class="n">current_chunk_batch</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
				<span class="sa">f</span><span class="s2">&quot;Processing final batch of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">current_chunk_batch</span><span class="p">)</span><span class="si">}</span><span class="s2"> chunks (</span><span class="si">{</span><span class="n">current_batch_token_count</span><span class="si">}</span><span class="s2"> tokens).&quot;</span>
			<span class="p">)</span>
			<span class="n">upserted_count</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_and_upsert_batch</span><span class="p">(</span><span class="n">current_chunk_batch</span><span class="p">)</span>
			<span class="n">update_progress</span><span class="p">(</span><span class="s2">&quot;[5/5] Final batch processed...&quot;</span><span class="p">,</span> <span class="n">step_increment</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">processed_chunks</span><span class="o">=</span><span class="n">upserted_count</span><span class="p">)</span>

		<span class="n">sync_success</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="n">final_message</span> <span class="o">=</span> <span class="p">(</span>
			<span class="sa">f</span><span class="s2">&quot;[green]✓[/green] Vector index synchronized. </span><span class="si">{</span><span class="n">processed_chunk_count</span><span class="si">}</span><span class="s2"> chunks processed/upserted.&quot;</span>
		<span class="p">)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Vector index synchronization completed successfully.&quot;</span><span class="p">)</span>

	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;An unexpected error occurred during index synchronization&quot;</span><span class="p">)</span>
		<span class="n">final_message</span> <span class="o">=</span> <span class="s2">&quot;[red]Error:[/red] Index sync failed unexpectedly.&quot;</span>
		<span class="n">sync_success</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Ensure success is False on exception</span>
	<span class="k">finally</span><span class="p">:</span>
		<span class="c1"># Final progress update</span>
		<span class="k">if</span> <span class="n">progress</span> <span class="ow">and</span> <span class="n">task_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">progress</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">final_message</span><span class="p">,</span> <span class="n">completed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

	<span class="k">return</span> <span class="n">sync_success</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="codemap.processor.vector.chunking" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">chunking</span>


</h4>

    <div class="doc doc-contents ">

        <p>Module for chunking source code files using LODGenerator.</p>









  <div class="doc doc-children">



















































<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.vector.chunking.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-class">



<h5 id="codemap.processor.vector.chunking.ChunkMetadata" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ChunkMetadata</span>


</h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.TypedDict">TypedDict</span></code></p>


        <p>Metadata associated with a code chunk.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/vector/chunking.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ChunkMetadata</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Metadata associated with a code chunk.&quot;&quot;&quot;</span>

	<span class="n">chunk_id</span><span class="p">:</span> <span class="nb">str</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span>
	<span class="n">start_line</span><span class="p">:</span> <span class="nb">int</span>
	<span class="n">end_line</span><span class="p">:</span> <span class="nb">int</span>
	<span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># Name of the EntityType enum</span>
	<span class="n">entity_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>
	<span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>
	<span class="n">git_hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>
	<span class="n">hierarchy_path</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># Full path in the code hierarchy</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.ChunkMetadata.chunk_id" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">chunk_id</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">chunk_id</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.ChunkMetadata.file_path" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">file_path</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.ChunkMetadata.start_line" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">start_line</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">start_line</span><span class="p">:</span> <span class="n"><span title="int">int</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.ChunkMetadata.end_line" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">end_line</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">end_line</span><span class="p">:</span> <span class="n"><span title="int">int</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.ChunkMetadata.entity_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">entity_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">entity_type</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.ChunkMetadata.entity_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">entity_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">entity_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.ChunkMetadata.language" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">language</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.ChunkMetadata.git_hash" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">git_hash</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">git_hash</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.ChunkMetadata.hierarchy_path" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">hierarchy_path</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">hierarchy_path</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h5 id="codemap.processor.vector.chunking.CodeChunk" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">CodeChunk</span>


</h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.TypedDict">TypedDict</span></code></p>


        <p>Represents a chunk of code with its metadata.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/vector/chunking.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CodeChunk</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Represents a chunk of code with its metadata.&quot;&quot;&quot;</span>

	<span class="n">content</span><span class="p">:</span> <span class="nb">str</span>
	<span class="n">metadata</span><span class="p">:</span> <span class="n">ChunkMetadata</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.CodeChunk.content" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">content</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">content</span><span class="p">:</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.CodeChunk.metadata" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">metadata</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">metadata</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ChunkMetadata&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.chunking.ChunkMetadata&lt;/code&gt;)" href="#codemap.processor.vector.chunking.ChunkMetadata">ChunkMetadata</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h5 id="codemap.processor.vector.chunking.TreeSitterChunker" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TreeSitterChunker</span>


</h5>


    <div class="doc doc-contents ">


        <p>Chunks code files based on LODEntity structure generated by LODGenerator.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/vector/chunking.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TreeSitterChunker</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Chunks code files based on LODEntity structure generated by LODGenerator.&quot;&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lod_generator</span><span class="p">:</span> <span class="n">LODGenerator</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize the chunker.</span>

<span class="sd">		Args:</span>
<span class="sd">		    lod_generator: An instance of LODGenerator. If None, creates a new one.</span>
<span class="sd">		    config_loader: Configuration loader instance.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">lod_generator</span> <span class="o">=</span> <span class="n">lod_generator</span> <span class="ow">or</span> <span class="n">LODGenerator</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span> <span class="o">=</span> <span class="n">config_loader</span> <span class="ow">or</span> <span class="n">ConfigLoader</span><span class="p">()</span>

		<span class="c1"># Load configuration values</span>
		<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
		<span class="n">chunking_config</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;chunking&quot;</span><span class="p">,</span> <span class="p">{})</span>

		<span class="c1"># Set constants from config with fallbacks</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">max_hierarchy_depth</span> <span class="o">=</span> <span class="n">chunking_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_hierarchy_depth&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">max_file_lines</span> <span class="o">=</span> <span class="n">chunking_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_file_lines&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_get_entity_code_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">LODEntity</span><span class="p">,</span> <span class="n">file_lines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Extract the raw code content for an entity using its line numbers.&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">start_line</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">entity</span><span class="o">.</span><span class="n">end_line</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span>

		<span class="n">start_idx</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">start_line</span> <span class="o">-</span> <span class="mi">1</span>
		<span class="n">end_idx</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">end_line</span>
		<span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">start_idx</span> <span class="o">&lt;</span> <span class="n">end_idx</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_lines</span><span class="p">):</span>
			<span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">file_lines</span><span class="p">[</span><span class="n">start_idx</span><span class="p">:</span><span class="n">end_idx</span><span class="p">])</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
			<span class="s2">&quot;Invalid line numbers for entity </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%s</span><span class="s2">: start=</span><span class="si">%s</span><span class="s2">, end=</span><span class="si">%s</span><span class="s2">, total_lines=</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">,</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file_path&quot;</span><span class="p">),</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">start_line</span><span class="p">,</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">end_line</span><span class="p">,</span>
			<span class="nb">len</span><span class="p">(</span><span class="n">file_lines</span><span class="p">),</span>
		<span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_build_hierarchy_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">LODEntity</span><span class="p">,</span> <span class="n">parent_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Build a hierarchical path string representing the entity&#39;s position in the code.</span>

<span class="sd">		Args:</span>
<span class="sd">		        entity: The current entity</span>
<span class="sd">		        parent_path: Path of parent entities</span>

<span class="sd">		Returns:</span>
<span class="sd">		        String representation of the hierarchy path</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">entity_name</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">parent_path</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">entity_name</span>
		<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">parent_path</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">entity_name</span><span class="si">}</span><span class="s2">&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_extract_nested_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">:</span> <span class="n">LODEntity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract information about nested entities to enhance chunk context.</span>

<span class="sd">		Args:</span>
<span class="sd">		        entity: The current entity</span>

<span class="sd">		Returns:</span>
<span class="sd">		        List of dictionaries containing info about nested entities</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">nested_info</span> <span class="o">=</span> <span class="p">[]</span>

		<span class="k">def</span><span class="w"> </span><span class="nf">process_nested</span><span class="p">(</span><span class="n">nested_entity</span><span class="p">:</span> <span class="n">LODEntity</span><span class="p">,</span> <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">			</span><span class="sd">&quot;&quot;&quot;Process a nested entity and its children recursively to extract information.</span>

<span class="sd">			Args:</span>
<span class="sd">				nested_entity: The nested entity to process</span>
<span class="sd">				depth: Current depth in the hierarchy (default: 1)</span>

<span class="sd">			Returns:</span>
<span class="sd">				None: Modifies nested_info in place by appending entity information</span>
<span class="sd">			&quot;&quot;&quot;</span>
			<span class="c1"># Skip UNKNOWN entities</span>
			<span class="k">if</span> <span class="n">nested_entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
				<span class="k">return</span>

			<span class="n">entity_info</span> <span class="o">=</span> <span class="p">{</span>
				<span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">nested_entity</span><span class="o">.</span><span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
				<span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">nested_entity</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="n">nested_entity</span><span class="o">.</span><span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&gt;&quot;</span><span class="p">,</span>
				<span class="s2">&quot;signature&quot;</span><span class="p">:</span> <span class="n">nested_entity</span><span class="o">.</span><span class="n">signature</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
				<span class="s2">&quot;depth&quot;</span><span class="p">:</span> <span class="n">depth</span><span class="p">,</span>
				<span class="s2">&quot;line_range&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nested_entity</span><span class="o">.</span><span class="n">start_line</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">nested_entity</span><span class="o">.</span><span class="n">end_line</span><span class="si">}</span><span class="s2">&quot;</span>
				<span class="k">if</span> <span class="n">nested_entity</span><span class="o">.</span><span class="n">start_line</span> <span class="ow">and</span> <span class="n">nested_entity</span><span class="o">.</span><span class="n">end_line</span>
				<span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
			<span class="p">}</span>
			<span class="n">nested_info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity_info</span><span class="p">)</span>

			<span class="c1"># Process children (limited by configured max hierarchy depth)</span>
			<span class="k">if</span> <span class="n">depth</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_hierarchy_depth</span><span class="p">:</span>
				<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">nested_entity</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
					<span class="n">process_nested</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

		<span class="c1"># Process all direct children</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="n">process_nested</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">nested_info</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_chunk_entity_recursive</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">entity</span><span class="p">:</span> <span class="n">LODEntity</span><span class="p">,</span>
		<span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
		<span class="n">file_lines</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
		<span class="n">git_hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
		<span class="n">parent_hierarchy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
		<span class="n">file_entity</span><span class="p">:</span> <span class="n">LODEntity</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">CodeChunk</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Recursive helper to generate chunks from the LODEntity tree with hierarchy context.&quot;&quot;&quot;</span>
		<span class="c1"># Decide which entity types are significant enough to become their own chunk</span>
		<span class="n">primary_chunkable_types</span> <span class="o">=</span> <span class="p">(</span>
			<span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">,</span>
			<span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">,</span>
			<span class="n">EntityType</span><span class="o">.</span><span class="n">INTERFACE</span><span class="p">,</span>
			<span class="n">EntityType</span><span class="o">.</span><span class="n">STRUCT</span><span class="p">,</span>
		<span class="p">)</span>

		<span class="n">secondary_chunkable_types</span> <span class="o">=</span> <span class="p">(</span>
			<span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span>
			<span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">,</span>
		<span class="p">)</span>

		<span class="c1"># Skip UNKNOWN entities entirely</span>
		<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
			<span class="k">return</span>

		<span class="c1"># Build hierarchy path for this entity</span>
		<span class="n">entity_hierarchy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_hierarchy_path</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">parent_hierarchy</span><span class="p">)</span>

		<span class="c1"># For primary entities (modules, classes), create full chunks with all their content</span>
		<span class="k">if</span> <span class="p">(</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="n">primary_chunkable_types</span>
			<span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">start_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
			<span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">end_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
		<span class="p">):</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="c1"># Get full content including all nested entities</span>
				<span class="n">code_content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_code_content</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">file_lines</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">code_content</span><span class="p">:</span>
					<span class="c1"># Extract information about nested entities to enhance context</span>
					<span class="n">nested_entities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_nested_entities</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

					<span class="c1"># Construct rich chunk content with nested entity information</span>
					<span class="n">content_parts</span> <span class="o">=</span> <span class="p">[]</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Type: </span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Path: </span><span class="si">{</span><span class="n">entity_hierarchy</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
						<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Name: </span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">signature</span><span class="p">:</span>
						<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Signature: </span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">signature</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">docstring</span><span class="p">:</span>
						<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docstring:</span><span class="se">\n</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">docstring</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

					<span class="c1"># Add structure overview</span>
					<span class="k">if</span> <span class="n">nested_entities</span><span class="p">:</span>
						<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Contains:&quot;</span><span class="p">)</span>
						<span class="k">for</span> <span class="n">ne</span> <span class="ow">in</span> <span class="n">nested_entities</span><span class="p">:</span>
							<span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;  &quot;</span> <span class="o">*</span> <span class="n">ne</span><span class="p">[</span><span class="s2">&quot;depth&quot;</span><span class="p">]</span>
							<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
								<span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">- </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (lines </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;line_range&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span>
							<span class="p">)</span>

					<span class="c1"># Add the full code</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Code:</span><span class="se">\n</span><span class="s2">```</span><span class="si">{</span><span class="n">language</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">code_content</span><span class="si">}</span><span class="se">\n</span><span class="s2">```&quot;</span><span class="p">)</span>

					<span class="c1"># Add raw unformatted code at the end</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Raw:</span><span class="se">\n</span><span class="si">{</span><span class="n">code_content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

					<span class="n">chunk_content</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">content_parts</span><span class="p">)</span>

					<span class="c1"># Reverted path logic: use original file_path</span>
					<span class="c1"># Removed relative path calculation</span>
					<span class="n">chunk_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_path</span><span class="si">!s}</span><span class="s2">:</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">start_line</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">end_line</span><span class="si">}</span><span class="s2">&quot;</span>
					<span class="n">metadata</span><span class="p">:</span> <span class="n">ChunkMetadata</span> <span class="o">=</span> <span class="p">{</span>
						<span class="s2">&quot;chunk_id&quot;</span><span class="p">:</span> <span class="n">chunk_id</span><span class="p">,</span>
						<span class="c1"># Store original (likely absolute) path</span>
						<span class="s2">&quot;file_path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
						<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">start_line</span><span class="p">,</span>
						<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">end_line</span><span class="p">,</span>
						<span class="s2">&quot;entity_type&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
						<span class="s2">&quot;entity_name&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
						<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">language</span><span class="p">,</span>
						<span class="s2">&quot;git_hash&quot;</span><span class="p">:</span> <span class="n">git_hash</span><span class="p">,</span>
						<span class="s2">&quot;hierarchy_path&quot;</span><span class="p">:</span> <span class="n">entity_hierarchy</span><span class="p">,</span>
					<span class="p">}</span>
					<span class="k">yield</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">chunk_content</span><span class="p">,</span> <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="n">metadata</span><span class="p">}</span>

			<span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error processing LOD entity </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>

		<span class="c1"># For secondary entities (functions, methods), create individual chunks</span>
		<span class="k">elif</span> <span class="p">(</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="n">secondary_chunkable_types</span>
			<span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">start_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
			<span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">end_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
		<span class="p">):</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">code_content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_code_content</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">file_lines</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">code_content</span><span class="p">:</span>
					<span class="c1"># Use file entity if available (for better context)</span>
					<span class="n">file_context</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
					<span class="k">if</span> <span class="n">file_entity</span> <span class="ow">and</span> <span class="n">file_entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">:</span>
						<span class="n">file_context</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;File: </span><span class="si">{</span><span class="n">file_entity</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">Path</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>

					<span class="c1"># Construct rich chunk content</span>
					<span class="n">content_parts</span> <span class="o">=</span> <span class="p">[]</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_context</span><span class="si">}</span><span class="s2">Type: </span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Path: </span><span class="si">{</span><span class="n">entity_hierarchy</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
						<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Name: </span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">signature</span><span class="p">:</span>
						<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Signature: </span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">signature</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">docstring</span><span class="p">:</span>
						<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docstring:</span><span class="se">\n</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">docstring</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

					<span class="c1"># Add code with any dependencies visible in comments</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Code:</span><span class="se">\n</span><span class="s2">```</span><span class="si">{</span><span class="n">language</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">code_content</span><span class="si">}</span><span class="se">\n</span><span class="s2">```&quot;</span><span class="p">)</span>

					<span class="c1"># Add raw unformatted code at the end</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Raw:</span><span class="se">\n</span><span class="si">{</span><span class="n">code_content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

					<span class="n">chunk_content</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">content_parts</span><span class="p">)</span>

					<span class="c1"># Reverted path logic: use original file_path</span>
					<span class="c1"># Removed relative path calculation</span>
					<span class="n">chunk_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_path</span><span class="si">!s}</span><span class="s2">:</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">start_line</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">end_line</span><span class="si">}</span><span class="s2">&quot;</span>
					<span class="n">metadata</span><span class="p">:</span> <span class="n">ChunkMetadata</span> <span class="o">=</span> <span class="p">{</span>
						<span class="s2">&quot;chunk_id&quot;</span><span class="p">:</span> <span class="n">chunk_id</span><span class="p">,</span>
						<span class="c1"># Store original (likely absolute) path</span>
						<span class="s2">&quot;file_path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
						<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">start_line</span><span class="p">,</span>
						<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">end_line</span><span class="p">,</span>
						<span class="s2">&quot;entity_type&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
						<span class="s2">&quot;entity_name&quot;</span><span class="p">:</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
						<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">language</span><span class="p">,</span>
						<span class="s2">&quot;git_hash&quot;</span><span class="p">:</span> <span class="n">git_hash</span><span class="p">,</span>
						<span class="s2">&quot;hierarchy_path&quot;</span><span class="p">:</span> <span class="n">entity_hierarchy</span><span class="p">,</span>
					<span class="p">}</span>
					<span class="k">yield</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">chunk_content</span><span class="p">,</span> <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="n">metadata</span><span class="p">}</span>

			<span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error processing LOD entity </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>

		<span class="c1"># Recursively process children, remove repo_path pass</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chunk_entity_recursive</span><span class="p">(</span>
				<span class="n">child</span><span class="p">,</span>
				<span class="n">file_path</span><span class="p">,</span>
				<span class="n">file_lines</span><span class="p">,</span>
				<span class="n">git_hash</span><span class="p">,</span>
				<span class="n">language</span><span class="p">,</span>
				<span class="n">entity_hierarchy</span><span class="p">,</span>
				<span class="n">file_entity</span><span class="o">=</span><span class="n">file_entity</span><span class="p">,</span>
			<span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">chunk_file</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
		<span class="n">git_hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">lod_level</span><span class="p">:</span> <span class="n">LODLevel</span> <span class="o">=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="p">,</span>  <span class="c1"># Use FULL for max info, not DETAIL</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">CodeChunk</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Generates code chunks for a given file using LODGenerator.</span>

<span class="sd">		Args:</span>
<span class="sd">		    file_path: The path to the file to chunk.</span>
<span class="sd">		    git_hash: Optional Git hash of the file content.</span>
<span class="sd">		    lod_level: The level of detail to request from LODGenerator.</span>

<span class="sd">		Yields:</span>
<span class="sd">		    CodeChunk dictionaries, each representing a semantically rich code chunk.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">content</span> <span class="o">=</span> <span class="n">read_file_content</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">content</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Skipping file </span><span class="si">%s</span><span class="s2"> - file does not exist or cannot be read&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
				<span class="k">return</span>

			<span class="c1"># Generate the LODEntity tree for the file using the specified level of detail</span>
			<span class="n">root_entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lod_generator</span><span class="o">.</span><span class="n">generate_lod</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">lod_level</span><span class="p">)</span>

			<span class="k">if</span> <span class="ow">not</span> <span class="n">root_entity</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;LODGenerator returned no entity for </span><span class="si">%s</span><span class="s2">, skipping chunking&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
				<span class="k">return</span>

			<span class="c1"># Language should be available in the root entity metadata now</span>
			<span class="n">resolved_language</span> <span class="o">=</span> <span class="n">root_entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">)</span>
			<span class="n">file_lines</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

			<span class="c1"># First, create a chunk for the entire file if it&#39;s small enough</span>
			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_lines</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_file_lines</span><span class="p">:</span>
				<span class="c1"># Create a chunk for the entire file</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">whole_file_content</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">file_lines</span><span class="p">)</span>

					<span class="c1"># Information about the file as a whole</span>
					<span class="n">content_parts</span> <span class="o">=</span> <span class="p">[]</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Type: FILE&quot;</span><span class="p">)</span>
					<span class="n">file_name</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Path: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Name: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

					<span class="c1"># Add docstring if the file has one (module docstring)</span>
					<span class="k">if</span> <span class="n">root_entity</span><span class="o">.</span><span class="n">docstring</span><span class="p">:</span>
						<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docstring:</span><span class="se">\n</span><span class="si">{</span><span class="n">root_entity</span><span class="o">.</span><span class="n">docstring</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

					<span class="c1"># Get structure overview</span>
					<span class="n">nested_entities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_nested_entities</span><span class="p">(</span><span class="n">root_entity</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">nested_entities</span><span class="p">:</span>
						<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Contains:&quot;</span><span class="p">)</span>
						<span class="k">for</span> <span class="n">ne</span> <span class="ow">in</span> <span class="n">nested_entities</span><span class="p">:</span>
							<span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;  &quot;</span> <span class="o">*</span> <span class="n">ne</span><span class="p">[</span><span class="s2">&quot;depth&quot;</span><span class="p">]</span>
							<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
								<span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">- </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (lines </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;line_range&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span>
							<span class="p">)</span>

					<span class="c1"># Add the full code</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Code:</span><span class="se">\n</span><span class="s2">```</span><span class="si">{</span><span class="n">resolved_language</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">whole_file_content</span><span class="si">}</span><span class="se">\n</span><span class="s2">```&quot;</span><span class="p">)</span>

					<span class="c1"># Add raw unformatted code at the end</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Raw:</span><span class="se">\n</span><span class="si">{</span><span class="n">whole_file_content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

					<span class="n">chunk_content</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">content_parts</span><span class="p">)</span>

					<span class="n">chunk_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_path</span><span class="si">!s}</span><span class="s2">:1-</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">file_lines</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
					<span class="n">metadata</span><span class="p">:</span> <span class="n">ChunkMetadata</span> <span class="o">=</span> <span class="p">{</span>
						<span class="s2">&quot;chunk_id&quot;</span><span class="p">:</span> <span class="n">chunk_id</span><span class="p">,</span>
						<span class="s2">&quot;file_path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
						<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
						<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_lines</span><span class="p">),</span>
						<span class="s2">&quot;entity_type&quot;</span><span class="p">:</span> <span class="s2">&quot;FILE&quot;</span><span class="p">,</span>
						<span class="s2">&quot;entity_name&quot;</span><span class="p">:</span> <span class="n">file_name</span><span class="p">,</span>
						<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">resolved_language</span><span class="p">,</span>
						<span class="s2">&quot;git_hash&quot;</span><span class="p">:</span> <span class="n">git_hash</span><span class="p">,</span>
						<span class="s2">&quot;hierarchy_path&quot;</span><span class="p">:</span> <span class="n">file_name</span><span class="p">,</span>
					<span class="p">}</span>
					<span class="k">yield</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">chunk_content</span><span class="p">,</span> <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="n">metadata</span><span class="p">}</span>
				<span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Error creating whole-file chunk for </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

			<span class="c1"># Then create more specific chunks for the individual entities</span>
			<span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chunk_entity_recursive</span><span class="p">(</span>
				<span class="n">root_entity</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">file_lines</span><span class="p">,</span> <span class="n">git_hash</span><span class="p">,</span> <span class="n">resolved_language</span><span class="p">,</span> <span class="n">file_entity</span><span class="o">=</span><span class="n">root_entity</span>
			<span class="p">)</span>

		<span class="k">except</span> <span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to chunk file </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
			<span class="k">return</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.chunking.TreeSitterChunker.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
	<span class="nf">lod_generator</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODGenerator&lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODGenerator&lt;/code&gt;)" href="#codemap.processor.lod.LODGenerator">LODGenerator</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">config_loader</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the chunker.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lod_generator</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODGenerator&lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODGenerator&lt;/code&gt;)" href="#codemap.processor.lod.LODGenerator">LODGenerator</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of LODGenerator. If None, creates a new one.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config_loader</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration loader instance.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/chunking.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lod_generator</span><span class="p">:</span> <span class="n">LODGenerator</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Initialize the chunker.</span>

<span class="sd">	Args:</span>
<span class="sd">	    lod_generator: An instance of LODGenerator. If None, creates a new one.</span>
<span class="sd">	    config_loader: Configuration loader instance.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">lod_generator</span> <span class="o">=</span> <span class="n">lod_generator</span> <span class="ow">or</span> <span class="n">LODGenerator</span><span class="p">()</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span> <span class="o">=</span> <span class="n">config_loader</span> <span class="ow">or</span> <span class="n">ConfigLoader</span><span class="p">()</span>

	<span class="c1"># Load configuration values</span>
	<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>
	<span class="n">chunking_config</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;chunking&quot;</span><span class="p">,</span> <span class="p">{})</span>

	<span class="c1"># Set constants from config with fallbacks</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">max_hierarchy_depth</span> <span class="o">=</span> <span class="n">chunking_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_hierarchy_depth&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">max_file_lines</span> <span class="o">=</span> <span class="n">chunking_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_file_lines&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.TreeSitterChunker.lod_generator" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">lod_generator</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">lod_generator</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.chunking.TreeSitterChunker(lod_generator)">lod_generator</span></span> <span class="ow">or</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODGenerator&lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODGenerator&lt;/code&gt;)" href="#codemap.processor.lod.LODGenerator">LODGenerator</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.TreeSitterChunker.config_loader" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_loader</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config_loader</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.chunking.TreeSitterChunker(config_loader)">config_loader</span></span> <span class="ow">or</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.TreeSitterChunker.max_hierarchy_depth" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">max_hierarchy_depth</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">max_hierarchy_depth</span> <span class="o">=</span> <span class="n"><span title="chunking_config.get">get</span></span><span class="p">(</span><span class="s1">&#39;max_hierarchy_depth&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.chunking.TreeSitterChunker.max_file_lines" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">max_file_lines</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">max_file_lines</span> <span class="o">=</span> <span class="n"><span title="chunking_config.get">get</span></span><span class="p">(</span><span class="s1">&#39;max_file_lines&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.chunking.TreeSitterChunker.chunk_file" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">chunk_file</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">chunk_file</span><span class="p">(</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span>
	<span class="n">git_hash</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">lod_level</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODLevel&lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel">LODLevel</a></span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-attribute-name&quot;&gt;FULL&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
      &lt;small class=&quot;doc doc-label doc-label-instance-attribute&quot;&gt;&lt;code&gt;instance-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel.FULL&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel.FULL">FULL</a></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="collections.abc.Generator">Generator</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;CodeChunk&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.chunking.CodeChunk&lt;/code&gt;)" href="#codemap.processor.vector.chunking.CodeChunk">CodeChunk</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generates code chunks for a given file using LODGenerator.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the file to chunk.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>git_hash</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional Git hash of the file content.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lod_level</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LODLevel&lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel">LODLevel</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The level of detail to request from LODGenerator.</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-attribute-name&quot;&gt;FULL&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-class-attribute&quot;&gt;&lt;code&gt;class-attribute&lt;/code&gt;&lt;/small&gt;
      &lt;small class=&quot;doc doc-label doc-label-instance-attribute&quot;&gt;&lt;code&gt;instance-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODLevel.FULL&lt;/code&gt;)" href="#codemap.processor.lod.LODLevel.FULL">FULL</a></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Yields:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;CodeChunk&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.chunking.CodeChunk&lt;/code&gt;)" href="#codemap.processor.vector.chunking.CodeChunk">CodeChunk</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>CodeChunk dictionaries, each representing a semantically rich code chunk.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/chunking.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">chunk_file</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
	<span class="n">git_hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">lod_level</span><span class="p">:</span> <span class="n">LODLevel</span> <span class="o">=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="p">,</span>  <span class="c1"># Use FULL for max info, not DETAIL</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">CodeChunk</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Generates code chunks for a given file using LODGenerator.</span>

<span class="sd">	Args:</span>
<span class="sd">	    file_path: The path to the file to chunk.</span>
<span class="sd">	    git_hash: Optional Git hash of the file content.</span>
<span class="sd">	    lod_level: The level of detail to request from LODGenerator.</span>

<span class="sd">	Yields:</span>
<span class="sd">	    CodeChunk dictionaries, each representing a semantically rich code chunk.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">content</span> <span class="o">=</span> <span class="n">read_file_content</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">content</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Skipping file </span><span class="si">%s</span><span class="s2"> - file does not exist or cannot be read&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="c1"># Generate the LODEntity tree for the file using the specified level of detail</span>
		<span class="n">root_entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lod_generator</span><span class="o">.</span><span class="n">generate_lod</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">lod_level</span><span class="p">)</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">root_entity</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;LODGenerator returned no entity for </span><span class="si">%s</span><span class="s2">, skipping chunking&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="c1"># Language should be available in the root entity metadata now</span>
		<span class="n">resolved_language</span> <span class="o">=</span> <span class="n">root_entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="s2">&quot;unknown&quot;</span><span class="p">)</span>
		<span class="n">file_lines</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

		<span class="c1"># First, create a chunk for the entire file if it&#39;s small enough</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_lines</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_file_lines</span><span class="p">:</span>
			<span class="c1"># Create a chunk for the entire file</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">whole_file_content</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">file_lines</span><span class="p">)</span>

				<span class="c1"># Information about the file as a whole</span>
				<span class="n">content_parts</span> <span class="o">=</span> <span class="p">[]</span>
				<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Type: FILE&quot;</span><span class="p">)</span>
				<span class="n">file_name</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
				<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Path: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Name: </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

				<span class="c1"># Add docstring if the file has one (module docstring)</span>
				<span class="k">if</span> <span class="n">root_entity</span><span class="o">.</span><span class="n">docstring</span><span class="p">:</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docstring:</span><span class="se">\n</span><span class="si">{</span><span class="n">root_entity</span><span class="o">.</span><span class="n">docstring</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

				<span class="c1"># Get structure overview</span>
				<span class="n">nested_entities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_nested_entities</span><span class="p">(</span><span class="n">root_entity</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">nested_entities</span><span class="p">:</span>
					<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Contains:&quot;</span><span class="p">)</span>
					<span class="k">for</span> <span class="n">ne</span> <span class="ow">in</span> <span class="n">nested_entities</span><span class="p">:</span>
						<span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;  &quot;</span> <span class="o">*</span> <span class="n">ne</span><span class="p">[</span><span class="s2">&quot;depth&quot;</span><span class="p">]</span>
						<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
							<span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">- </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (lines </span><span class="si">{</span><span class="n">ne</span><span class="p">[</span><span class="s1">&#39;line_range&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span>
						<span class="p">)</span>

				<span class="c1"># Add the full code</span>
				<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Code:</span><span class="se">\n</span><span class="s2">```</span><span class="si">{</span><span class="n">resolved_language</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">whole_file_content</span><span class="si">}</span><span class="se">\n</span><span class="s2">```&quot;</span><span class="p">)</span>

				<span class="c1"># Add raw unformatted code at the end</span>
				<span class="n">content_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Raw:</span><span class="se">\n</span><span class="si">{</span><span class="n">whole_file_content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

				<span class="n">chunk_content</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">content_parts</span><span class="p">)</span>

				<span class="n">chunk_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_path</span><span class="si">!s}</span><span class="s2">:1-</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">file_lines</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
				<span class="n">metadata</span><span class="p">:</span> <span class="n">ChunkMetadata</span> <span class="o">=</span> <span class="p">{</span>
					<span class="s2">&quot;chunk_id&quot;</span><span class="p">:</span> <span class="n">chunk_id</span><span class="p">,</span>
					<span class="s2">&quot;file_path&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
					<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
					<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_lines</span><span class="p">),</span>
					<span class="s2">&quot;entity_type&quot;</span><span class="p">:</span> <span class="s2">&quot;FILE&quot;</span><span class="p">,</span>
					<span class="s2">&quot;entity_name&quot;</span><span class="p">:</span> <span class="n">file_name</span><span class="p">,</span>
					<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">resolved_language</span><span class="p">,</span>
					<span class="s2">&quot;git_hash&quot;</span><span class="p">:</span> <span class="n">git_hash</span><span class="p">,</span>
					<span class="s2">&quot;hierarchy_path&quot;</span><span class="p">:</span> <span class="n">file_name</span><span class="p">,</span>
				<span class="p">}</span>
				<span class="k">yield</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">chunk_content</span><span class="p">,</span> <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="n">metadata</span><span class="p">}</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Error creating whole-file chunk for </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

		<span class="c1"># Then create more specific chunks for the individual entities</span>
		<span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chunk_entity_recursive</span><span class="p">(</span>
			<span class="n">root_entity</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">file_lines</span><span class="p">,</span> <span class="n">git_hash</span><span class="p">,</span> <span class="n">resolved_language</span><span class="p">,</span> <span class="n">file_entity</span><span class="o">=</span><span class="n">root_entity</span>
		<span class="p">)</span>

	<span class="k">except</span> <span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to chunk file </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
		<span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="codemap.processor.vector.qdrant_manager" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">qdrant_manager</span>


</h4>

    <div class="doc doc-contents ">

        <p>Module for managing Qdrant vector database collections.</p>









  <div class="doc doc-children">



























































<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.vector.qdrant_manager.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.vector.qdrant_manager.HTTP_NOT_FOUND" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">HTTP_NOT_FOUND</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">HTTP_NOT_FOUND</span> <span class="o">=</span> <span class="mi">404</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-class">



<h5 id="codemap.processor.vector.qdrant_manager.QdrantManager" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">QdrantManager</span>


</h5>


    <div class="doc doc-contents ">


        <p>Manages interactions with a Qdrant vector database collection.</p>
<p>Handles initialization, adding/upserting points (vectors + payload),
searching, and retrieving points based on IDs or filters. Uses an
AsyncQdrantClient for non-blocking operations.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">QdrantManager</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Manages interactions with a Qdrant vector database collection.</span>

<span class="sd">	Handles initialization, adding/upserting points (vectors + payload),</span>
<span class="sd">	searching, and retrieving points based on IDs or filters. Uses an</span>
<span class="sd">	AsyncQdrantClient for non-blocking operations.</span>

<span class="sd">	&quot;&quot;&quot;</span>

	<span class="n">value_error_msg</span> <span class="o">=</span> <span class="s2">&quot;Filter condition cannot be None if point_ids are not provided&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span><span class="p">,</span>
		<span class="n">collection_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">dim</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">distance</span><span class="p">:</span> <span class="n">Distance</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># For Qdrant Cloud</span>
		<span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># For self-hosted or Cloud URL</span>
		<span class="n">prefer_grpc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize the QdrantManager.</span>

<span class="sd">		Args:</span>
<span class="sd">		    config_loader: Configuration loader instance.</span>
<span class="sd">		    location: Path for local storage or &quot;:memory:&quot;. Ignored if url is provided.</span>
<span class="sd">		    collection_name: Name of the Qdrant collection to use.</span>
<span class="sd">		    dim: Dimension of the vectors.</span>
<span class="sd">		    distance: Distance metric for vector comparison.</span>
<span class="sd">		    api_key: API key for Qdrant Cloud authentication.</span>
<span class="sd">		    url: URL for connecting to a remote Qdrant instance (overrides location).</span>
<span class="sd">		    prefer_grpc: Whether to prefer gRPC over REST.</span>
<span class="sd">		    timeout: Connection timeout in seconds.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Get embedding configuration</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span> <span class="o">=</span> <span class="n">config_loader</span>
		<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>

		<span class="c1"># Get distance metric from config or parameter</span>
		<span class="n">distance_metric_str</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension_metric&quot;</span><span class="p">,</span> <span class="s2">&quot;cosine&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
		<span class="n">default_distance</span> <span class="o">=</span> <span class="p">(</span>
			<span class="nb">getattr</span><span class="p">(</span><span class="n">Distance</span><span class="p">,</span> <span class="n">distance_metric_str</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">Distance</span><span class="p">,</span> <span class="n">distance_metric_str</span><span class="p">)</span> <span class="k">else</span> <span class="n">Distance</span><span class="o">.</span><span class="n">COSINE</span>
		<span class="p">)</span>

		<span class="c1"># Load values from parameters or fall back to config</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span> <span class="o">=</span> <span class="n">collection_name</span> <span class="ow">or</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_collection_name&quot;</span><span class="p">,</span> <span class="s2">&quot;codemap_vectors&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">=</span> <span class="n">dim</span> <span class="ow">or</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension&quot;</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">distance</span> <span class="o">=</span> <span class="n">distance</span> <span class="ow">or</span> <span class="n">default_distance</span>

		<span class="c1"># Build client args</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">client_args</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="n">api_key</span> <span class="ow">or</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;api_key&quot;</span><span class="p">),</span>
			<span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span> <span class="ow">or</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">),</span>
			<span class="s2">&quot;prefer_grpc&quot;</span><span class="p">:</span> <span class="n">prefer_grpc</span> <span class="k">if</span> <span class="n">prefer_grpc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;prefer_grpc&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
			<span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="n">timeout</span> <span class="ow">or</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timeout&quot;</span><span class="p">),</span>
		<span class="p">}</span>
		<span class="c1"># Remove None values from args</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">client_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_args</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>

		<span class="c1"># Initialize client later in an async context</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span> <span class="n">AsyncQdrantClient</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span> <span class="o">=</span> <span class="kc">False</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Asynchronously initialize the Qdrant client and ensure the collection exists.&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">:</span>
			<span class="k">return</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initializing Qdrant client with args: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_args</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">AsyncQdrantClient</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">client_args</span><span class="p">)</span>

			<span class="c1"># Check if collection exists</span>
			<span class="n">collections_response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_collections</span><span class="p">()</span>
			<span class="n">collection_names</span> <span class="o">=</span> <span class="p">{</span><span class="n">col</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">collections_response</span><span class="o">.</span><span class="n">collections</span><span class="p">}</span>

			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">collection_names</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Collection &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39; not found. Creating...&quot;</span><span class="p">)</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">create_collection</span><span class="p">(</span>
					<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
					<span class="n">vectors_config</span><span class="o">=</span><span class="n">VectorParams</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dim</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">distance</span><span class="p">),</span>
				<span class="p">)</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Collection &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39; created successfully.&quot;</span><span class="p">)</span>

				<span class="c1"># Create payload indexes for commonly filtered fields</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating payload indexes for collection &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
				<span class="c1"># Common fields used in filters from ChunkMetadata</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_payload_indexes</span><span class="p">()</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using existing Qdrant collection: &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
				<span class="c1"># Check if indexes exist, create if missing</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_payload_indexes</span><span class="p">()</span>

			<span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span> <span class="o">=</span> <span class="kc">True</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;QdrantManager initialized successfully.&quot;</span><span class="p">)</span>

		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to initialize QdrantManager or collection&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Ensure client is None if init fails</span>
			<span class="k">raise</span>  <span class="c1"># Re-raise the exception to signal failure</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_create_payload_indexes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Create payload indexes for commonly used filter fields.&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized before creating indexes&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># Create keyword indexes for string fields commonly used in filters</span>
			<span class="n">index_fields</span> <span class="o">=</span> <span class="p">[</span>
				<span class="p">(</span><span class="s2">&quot;file_path&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">KEYWORD</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;entity_type&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">KEYWORD</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">KEYWORD</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;git_hash&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">KEYWORD</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;hierarchy_path&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">KEYWORD</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;start_line&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">INTEGER</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;end_line&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">INTEGER</span><span class="p">),</span>
			<span class="p">]</span>

			<span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_type</span> <span class="ow">in</span> <span class="n">index_fields</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating index for field: </span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">field_type</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">create_payload_index</span><span class="p">(</span>
					<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span> <span class="n">field_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_schema</span><span class="o">=</span><span class="n">field_type</span>
				<span class="p">)</span>

			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">index_fields</span><span class="p">)</span><span class="si">}</span><span class="s2"> payload indexes successfully&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># noqa: BLE001</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error creating payload indexes: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="c1"># Continue even if index creation fails - collection will still work</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_payload_indexes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Check if payload indexes exist and create any missing ones.&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized before checking indexes&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># Get existing collection info</span>
			<span class="n">collection_info</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_collection</span><span class="p">(</span><span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
			<span class="n">existing_schema</span> <span class="o">=</span> <span class="n">collection_info</span><span class="o">.</span><span class="n">payload_schema</span>

			<span class="c1"># List of fields that should be indexed</span>
			<span class="n">index_fields</span> <span class="o">=</span> <span class="p">[</span>
				<span class="p">(</span><span class="s2">&quot;file_path&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">KEYWORD</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;entity_type&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">KEYWORD</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">KEYWORD</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;git_hash&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">KEYWORD</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;hierarchy_path&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">KEYWORD</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;start_line&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">INTEGER</span><span class="p">),</span>
				<span class="p">(</span><span class="s2">&quot;end_line&quot;</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">PayloadSchemaType</span><span class="o">.</span><span class="n">INTEGER</span><span class="p">),</span>
			<span class="p">]</span>

			<span class="c1"># Create any missing indexes</span>
			<span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_type</span> <span class="ow">in</span> <span class="n">index_fields</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">existing_schema</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating missing index for field: </span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">field_type</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
					<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">create_payload_index</span><span class="p">(</span>
						<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span> <span class="n">field_name</span><span class="o">=</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_schema</span><span class="o">=</span><span class="n">field_type</span>
					<span class="p">)</span>

		<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># noqa: BLE001</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error checking or creating payload indexes: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="c1"># Continue even if index check fails</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Ensure the client is initialized before performing operations.&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
			<span class="c1"># Should not happen if initialize didn&#39;t raise, but check anyway</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Qdrant client is not available after initialization attempt.&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">upsert_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">PointStruct</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Add or update points (vectors and payloads) in the collection.</span>

<span class="sd">		Args:</span>
<span class="sd">		    points: A list of Qdrant PointStruct objects.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">points</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;upsert_points called with an empty list.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Upserting </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="si">}</span><span class="s2"> points into &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">points</span><span class="o">=</span><span class="n">points</span><span class="p">,</span>
				<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Wait for operation to complete</span>
			<span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully upserted </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="si">}</span><span class="s2"> points.&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error upserting points into Qdrant&quot;</span><span class="p">)</span>
			<span class="c1"># Decide if partial failure needs specific handling or re-raising</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Delete points from the collection by their IDs.</span>

<span class="sd">		Args:</span>
<span class="sd">		    point_ids: A list of point IDs to delete.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;delete_points called with an empty list.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">point_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> points from &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
			<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>

			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="c1"># Ignore linter complaint about list type compatibility</span>
				<span class="n">points_selector</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">PointIdsList</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">),</span>  <span class="c1"># type: ignore[arg-type]</span>
				<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
			<span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully deleted </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">point_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> points.&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error deleting points from Qdrant&quot;</span><span class="p">)</span>
			<span class="c1"># Consider error handling strategy</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">search</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">query_vector</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
		<span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="n">query_filter</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">models</span><span class="o">.</span><span class="n">ScoredPoint</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Perform a vector search with optional filtering.</span>

<span class="sd">		Args:</span>
<span class="sd">		    query_vector: The vector to search for.</span>
<span class="sd">		    k: The number of nearest neighbors to return.</span>
<span class="sd">		    query_filter: Optional Qdrant filter conditions.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A list of ScoredPoint objects, including ID, score, and payload.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">query_vector</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Search called with empty query vector.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="p">[]</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">search_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">query_vector</span><span class="o">=</span><span class="n">query_vector</span><span class="p">,</span>
				<span class="n">query_filter</span><span class="o">=</span><span class="n">query_filter</span><span class="p">,</span>
				<span class="n">limit</span><span class="o">=</span><span class="n">k</span><span class="p">,</span>
				<span class="n">with_payload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Always include payload</span>
				<span class="n">with_vectors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Usually not needed in results</span>
			<span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Search returned </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">search_result</span><span class="p">)</span><span class="si">}</span><span class="s2"> results.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">search_result</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error during Qdrant search&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="p">[]</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_all_point_ids_with_filter</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span> <span class="n">query_filter</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Retrieves all point IDs currently in the collection, optionally filtered.</span>

<span class="sd">		Uses scrolling API to handle potentially large collections.</span>

<span class="sd">		Args:</span>
<span class="sd">		    query_filter: Optional Qdrant filter to apply.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A list of all point IDs matching the filter.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
		<span class="n">all_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="c1"># Use Any for offset type hint due to persistent linter issues</span>
		<span class="n">next_offset</span><span class="p">:</span> <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="n">limit_per_scroll</span> <span class="o">=</span> <span class="mi">1000</span>

		<span class="c1"># Add logging for parameters</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
			<span class="sa">f</span><span class="s2">&quot;[QdrantManager Get IDs] Fetching all point IDs from collection &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;%s...&quot;</span><span class="p">,</span>
			<span class="sa">f</span><span class="s2">&quot; with filter: </span><span class="si">{</span><span class="n">query_filter</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">query_filter</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
		<span class="p">)</span>

		<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[QdrantManager Get IDs] Scrolling with offset: </span><span class="si">{</span><span class="n">next_offset</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="n">scroll_response</span><span class="p">,</span> <span class="n">next_offset_id</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span>
					<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
					<span class="n">scroll_filter</span><span class="o">=</span><span class="n">query_filter</span><span class="p">,</span>
					<span class="n">limit</span><span class="o">=</span><span class="n">limit_per_scroll</span><span class="p">,</span>
					<span class="n">offset</span><span class="o">=</span><span class="n">next_offset</span><span class="p">,</span>
					<span class="n">with_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
					<span class="n">with_vectors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
				<span class="p">)</span>
				<span class="n">batch_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">point</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">scroll_response</span><span class="p">]</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[QdrantManager Get IDs] Scroll returned </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">batch_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> IDs in this batch.&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="ow">not</span> <span class="n">batch_ids</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;[QdrantManager Get IDs] No more IDs returned by scroll. Stopping.&quot;</span><span class="p">)</span>
					<span class="k">break</span>
				<span class="n">all_ids</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;str | int | uuid.UUID&quot;</span><span class="p">,</span> <span class="n">point_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">point_id</span> <span class="ow">in</span> <span class="n">batch_ids</span><span class="p">])</span>
				<span class="c1"># Assign the returned offset ID - type is likely PointId but linter struggles</span>
				<span class="n">next_offset</span> <span class="o">=</span> <span class="n">next_offset_id</span>  <span class="c1"># No ignore needed if next_offset is Any</span>
				<span class="k">if</span> <span class="n">next_offset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
					<span class="k">break</span>

			<span class="k">except</span> <span class="n">UnexpectedResponse</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="c1"># Qdrant might return 404 if offset points to non-existent ID after deletions</span>
				<span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="n">HTTP_NOT_FOUND</span> <span class="ow">and</span> <span class="s2">&quot;Point with id&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">content</span><span class="p">):</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
						<span class="sa">f</span><span class="s2">&quot;Scroll encountered potentially deleted point ID at offset: </span><span class="si">{</span><span class="n">next_offset</span><span class="si">}</span><span class="s2">. Stopping scroll.&quot;</span>
					<span class="p">)</span>
					<span class="k">break</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error scrolling through Qdrant points&quot;</span><span class="p">)</span>
				<span class="k">raise</span>  <span class="c1"># Reraise other unexpected errors</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error scrolling through Qdrant points&quot;</span><span class="p">)</span>
				<span class="k">raise</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">all_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> point IDs from collection &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">all_ids</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_payloads_by_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Retrieves payloads for specific point IDs.</span>

<span class="sd">		Args:</span>
<span class="sd">		    point_ids: List of point IDs to fetch payloads for.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A dictionary mapping point IDs (as strings) to their payloads.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">{}</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>
			<span class="n">points_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="c1"># Ignore linter complaint about list type compatibility</span>
				<span class="n">ids</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">,</span>  <span class="c1"># type: ignore[arg-type]</span>
				<span class="n">with_payload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
				<span class="n">with_vectors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
			<span class="p">)</span>
			<span class="n">payloads</span> <span class="o">=</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">id</span><span class="p">):</span> <span class="n">point</span><span class="o">.</span><span class="n">payload</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points_data</span> <span class="k">if</span> <span class="n">point</span><span class="o">.</span><span class="n">payload</span><span class="p">}</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved payloads for </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">payloads</span><span class="p">)</span><span class="si">}</span><span class="s2"> points.&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">payloads</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error retrieving payloads from Qdrant&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="p">{}</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Close the AsyncQdrantClient connection.&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Closing Qdrant client connection.&quot;</span><span class="p">)</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error closing Qdrant client&quot;</span><span class="p">)</span>
			<span class="k">finally</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span> <span class="o">=</span> <span class="kc">False</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QdrantManager&quot;</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Enter the async context manager, initializing the Qdrant client.&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
		<span class="k">return</span> <span class="bp">self</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aexit__</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Exit the async context manager, closing the Qdrant client.&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">set_payload</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">filter_condition</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span><span class="p">,</span>
		<span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
		<span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Set specific payload fields for points without overwriting existing fields.</span>

<span class="sd">		Args:</span>
<span class="sd">		    payload: Dictionary of payload fields to set</span>
<span class="sd">		    point_ids: Optional list of point IDs to update</span>
<span class="sd">		    filter_condition: Optional filter to select points</span>
<span class="sd">		    key: Optional specific payload key path to modify</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">payload</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;set_payload called with empty payload.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">filter_condition</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;set_payload called without point_ids or filter.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Setting payload fields: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">payload</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2"> for points in &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">point_ids</span><span class="p">:</span>
				<span class="c1"># Convert to list of Qdrant point IDs</span>
				<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>

				<span class="c1"># Create points selector with IDs</span>
				<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PointIdsList</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">)</span>

				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">set_payload</span><span class="p">(</span>
					<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
					<span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
					<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
					<span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
					<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
				<span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># We know filter_condition is not None here because of the initial check</span>
				<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FilterSelector</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">filter_condition</span><span class="p">)</span>

				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">set_payload</span><span class="p">(</span>
					<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
					<span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
					<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
					<span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
					<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
				<span class="p">)</span>

			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully set payload fields: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">payload</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error setting payload in Qdrant&quot;</span><span class="p">)</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">overwrite_payload</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
		<span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">filter_condition</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Completely replace the payload for points with the new payload.</span>

<span class="sd">		Args:</span>
<span class="sd">		    payload: Dictionary of payload fields to set</span>
<span class="sd">		    point_ids: Optional list of point IDs to update</span>
<span class="sd">		    filter_condition: Optional filter to select points</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">payload</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;overwrite_payload called with empty payload.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">filter_condition</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;overwrite_payload called without point_ids or filter.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Overwriting payload for points in &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">point_ids</span><span class="p">:</span>
				<span class="c1"># Convert to list of Qdrant point IDs</span>
				<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>

				<span class="c1"># Create points selector with IDs</span>
				<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PointIdsList</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">)</span>

				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">overwrite_payload</span><span class="p">(</span>
					<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
					<span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
					<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
					<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
				<span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># We know filter_condition is not None here</span>
				<span class="k">if</span> <span class="n">filter_condition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
					<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_error_msg</span><span class="p">)</span>
				<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FilterSelector</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">filter_condition</span><span class="p">)</span>

				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">overwrite_payload</span><span class="p">(</span>
					<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
					<span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
					<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
					<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
				<span class="p">)</span>

			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Successfully overwrote payload&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error overwriting payload in Qdrant&quot;</span><span class="p">)</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">clear_payload</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span> <span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">filter_condition</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Remove all payload fields from points.</span>

<span class="sd">		Args:</span>
<span class="sd">		    point_ids: Optional list of point IDs to update</span>
<span class="sd">		    filter_condition: Optional filter to select points</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">filter_condition</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;clear_payload called without point_ids or filter.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Clearing payload for points in &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">point_ids</span><span class="p">:</span>
				<span class="c1"># Convert to list of Qdrant point IDs</span>
				<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>

				<span class="c1"># Create points selector with IDs</span>
				<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PointIdsList</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>

				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">clear_payload</span><span class="p">(</span>
					<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
					<span class="n">points_selector</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
					<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
				<span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># We know filter_condition is not None here</span>
				<span class="k">if</span> <span class="n">filter_condition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
					<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_error_msg</span><span class="p">)</span>
				<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FilterSelector</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">filter_condition</span><span class="p">)</span>

				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">clear_payload</span><span class="p">(</span>
					<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
					<span class="n">points_selector</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>  <span class="c1"># type: ignore[arg-type]</span>
					<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
				<span class="p">)</span>

			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Successfully cleared payload&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error clearing payload in Qdrant&quot;</span><span class="p">)</span>

	<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_payload_keys</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
		<span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
		<span class="n">filter_condition</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Delete specific payload fields from points.</span>

<span class="sd">		Args:</span>
<span class="sd">		    keys: List of payload field keys to delete</span>
<span class="sd">		    point_ids: Optional list of point IDs to update</span>
<span class="sd">		    filter_condition: Optional filter to select points</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
			<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
			<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">keys</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;delete_payload_keys called with empty keys list.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">filter_condition</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;delete_payload_keys called without point_ids or filter.&quot;</span><span class="p">)</span>
			<span class="k">return</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting payload keys </span><span class="si">{</span><span class="n">keys</span><span class="si">}</span><span class="s2"> for points in &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">point_ids</span><span class="p">:</span>
				<span class="c1"># Convert to list of Qdrant point IDs</span>
				<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>

				<span class="c1"># Create points selector with IDs</span>
				<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PointIdsList</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">)</span>

				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">delete_payload</span><span class="p">(</span>
					<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
					<span class="n">keys</span><span class="o">=</span><span class="n">keys</span><span class="p">,</span>
					<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
					<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
				<span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># We know filter_condition is not None here</span>
				<span class="k">if</span> <span class="n">filter_condition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
					<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_error_msg</span><span class="p">)</span>
				<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FilterSelector</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">filter_condition</span><span class="p">)</span>

				<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">delete_payload</span><span class="p">(</span>
					<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
					<span class="n">keys</span><span class="o">=</span><span class="n">keys</span><span class="p">,</span>
					<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
					<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
				<span class="p">)</span>

			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully deleted payload keys: </span><span class="si">{</span><span class="n">keys</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error deleting payload keys in Qdrant&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.value_error_msg" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">value_error_msg</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">value_error_msg</span> <span class="o">=</span> <span class="s2">&quot;Filter condition cannot be None if point_ids are not provided&quot;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span>
	<span class="nf">config_loader</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></span><span class="p">,</span>
	<span class="n">collection_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">dim</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">distance</span><span class="p">:</span> <span class="n"><span title="qdrant_client.http.models.Distance">Distance</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">api_key</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">url</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">prefer_grpc</span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">timeout</span><span class="p">:</span> <span class="n"><span title="float">float</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the QdrantManager.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config_loader</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;ConfigLoader&lt;/span&gt; (&lt;code&gt;codemap.utils.config_loader.ConfigLoader&lt;/code&gt;)" href="../utils/#codemap.utils.config_loader.ConfigLoader">ConfigLoader</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration loader instance.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>location</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path for local storage or ":memory:". Ignored if url is provided.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>collection_name</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the Qdrant collection to use.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dim</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dimension of the vectors.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>distance</code>
            </td>
            <td>
                  <code><span title="qdrant_client.http.models.Distance">Distance</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Distance metric for vector comparison.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>api_key</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>API key for Qdrant Cloud authentication.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>url</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL for connecting to a remote Qdrant instance (overrides location).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prefer_grpc</code>
            </td>
            <td>
                  <code><span title="bool">bool</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to prefer gRPC over REST.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Connection timeout in seconds.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">config_loader</span><span class="p">:</span> <span class="n">ConfigLoader</span><span class="p">,</span>
	<span class="n">collection_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">dim</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">distance</span><span class="p">:</span> <span class="n">Distance</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># For Qdrant Cloud</span>
	<span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># For self-hosted or Cloud URL</span>
	<span class="n">prefer_grpc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Initialize the QdrantManager.</span>

<span class="sd">	Args:</span>
<span class="sd">	    config_loader: Configuration loader instance.</span>
<span class="sd">	    location: Path for local storage or &quot;:memory:&quot;. Ignored if url is provided.</span>
<span class="sd">	    collection_name: Name of the Qdrant collection to use.</span>
<span class="sd">	    dim: Dimension of the vectors.</span>
<span class="sd">	    distance: Distance metric for vector comparison.</span>
<span class="sd">	    api_key: API key for Qdrant Cloud authentication.</span>
<span class="sd">	    url: URL for connecting to a remote Qdrant instance (overrides location).</span>
<span class="sd">	    prefer_grpc: Whether to prefer gRPC over REST.</span>
<span class="sd">	    timeout: Connection timeout in seconds.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Get embedding configuration</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span> <span class="o">=</span> <span class="n">config_loader</span>
	<span class="n">embedding_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_loader</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embedding&quot;</span><span class="p">,</span> <span class="p">{})</span>

	<span class="c1"># Get distance metric from config or parameter</span>
	<span class="n">distance_metric_str</span> <span class="o">=</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension_metric&quot;</span><span class="p">,</span> <span class="s2">&quot;cosine&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
	<span class="n">default_distance</span> <span class="o">=</span> <span class="p">(</span>
		<span class="nb">getattr</span><span class="p">(</span><span class="n">Distance</span><span class="p">,</span> <span class="n">distance_metric_str</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">Distance</span><span class="p">,</span> <span class="n">distance_metric_str</span><span class="p">)</span> <span class="k">else</span> <span class="n">Distance</span><span class="o">.</span><span class="n">COSINE</span>
	<span class="p">)</span>

	<span class="c1"># Load values from parameters or fall back to config</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span> <span class="o">=</span> <span class="n">collection_name</span> <span class="ow">or</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;qdrant_collection_name&quot;</span><span class="p">,</span> <span class="s2">&quot;codemap_vectors&quot;</span><span class="p">)</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">=</span> <span class="n">dim</span> <span class="ow">or</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;dimension&quot;</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">distance</span> <span class="o">=</span> <span class="n">distance</span> <span class="ow">or</span> <span class="n">default_distance</span>

	<span class="c1"># Build client args</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">client_args</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s2">&quot;api_key&quot;</span><span class="p">:</span> <span class="n">api_key</span> <span class="ow">or</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;api_key&quot;</span><span class="p">),</span>
		<span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span> <span class="ow">or</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">),</span>
		<span class="s2">&quot;prefer_grpc&quot;</span><span class="p">:</span> <span class="n">prefer_grpc</span> <span class="k">if</span> <span class="n">prefer_grpc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;prefer_grpc&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
		<span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="n">timeout</span> <span class="ow">or</span> <span class="n">embedding_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timeout&quot;</span><span class="p">),</span>
	<span class="p">}</span>
	<span class="c1"># Remove None values from args</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">client_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_args</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>

	<span class="c1"># Initialize client later in an async context</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span> <span class="n">AsyncQdrantClient</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.config_loader" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config_loader</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config_loader</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.qdrant_manager.QdrantManager(config_loader)">config_loader</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.collection_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">collection_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">collection_name</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.qdrant_manager.QdrantManager(collection_name)">collection_name</span></span> <span class="ow">or</span> <span class="n"><span title="embedding_config.get">get</span></span><span class="p">(</span>
	<span class="s2">&quot;qdrant_collection_name&quot;</span><span class="p">,</span> <span class="s2">&quot;codemap_vectors&quot;</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.dim" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">dim</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">dim</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.qdrant_manager.QdrantManager(dim)">dim</span></span> <span class="ow">or</span> <span class="n"><span title="embedding_config.get">get</span></span><span class="p">(</span><span class="s1">&#39;dimension&#39;</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.distance" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">distance</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">distance</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.vector.qdrant_manager.QdrantManager(distance)">distance</span></span> <span class="ow">or</span> <span class="n"><span title="default_distance">default_distance</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.client_args" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">client_args</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">client_args</span> <span class="o">=</span> <span class="p">{</span><span class="n"><span title="k">k</span></span><span class="p">:</span> <span class="n">_Bfor</span> <span class="p">(</span><span class="n"><span title="k">k</span></span><span class="p">,</span> <span class="n"><span title="v">v</span></span><span class="p">)</span> <span class="ow">in</span> <span class="n"><span title="codemap.processor.vector.qdrant_manager.QdrantManager(self).client_args.items">items</span></span><span class="p">()</span> <span class="k">if</span> <span class="n"><span title="v">v</span></span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.client" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">client</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">client</span><span class="p">:</span> <span class="n"><span title="qdrant_client.AsyncQdrantClient">AsyncQdrantClient</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.is_initialized" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">is_initialized</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">is_initialized</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.initialize" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">initialize</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">initialize</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Asynchronously initialize the Qdrant client and ensure the collection exists.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Asynchronously initialize the Qdrant client and ensure the collection exists.&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">:</span>
		<span class="k">return</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initializing Qdrant client with args: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_args</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">AsyncQdrantClient</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">client_args</span><span class="p">)</span>

		<span class="c1"># Check if collection exists</span>
		<span class="n">collections_response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_collections</span><span class="p">()</span>
		<span class="n">collection_names</span> <span class="o">=</span> <span class="p">{</span><span class="n">col</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">collections_response</span><span class="o">.</span><span class="n">collections</span><span class="p">}</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">collection_names</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Collection &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39; not found. Creating...&quot;</span><span class="p">)</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">create_collection</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">vectors_config</span><span class="o">=</span><span class="n">VectorParams</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dim</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">distance</span><span class="p">),</span>
			<span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Collection &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39; created successfully.&quot;</span><span class="p">)</span>

			<span class="c1"># Create payload indexes for commonly filtered fields</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating payload indexes for collection &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
			<span class="c1"># Common fields used in filters from ChunkMetadata</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_payload_indexes</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using existing Qdrant collection: &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
			<span class="c1"># Check if indexes exist, create if missing</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_payload_indexes</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;QdrantManager initialized successfully.&quot;</span><span class="p">)</span>

	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to initialize QdrantManager or collection&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Ensure client is None if init fails</span>
		<span class="k">raise</span>  <span class="c1"># Re-raise the exception to signal failure</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.upsert_points" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">upsert_points</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">upsert_points</span><span class="p">(</span><span class="n">points</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="qdrant_client.http.models.PointStruct">PointStruct</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add or update points (vectors and payloads) in the collection.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>points</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="qdrant_client.http.models.PointStruct">PointStruct</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of Qdrant PointStruct objects.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">upsert_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">PointStruct</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Add or update points (vectors and payloads) in the collection.</span>

<span class="sd">	Args:</span>
<span class="sd">	    points: A list of Qdrant PointStruct objects.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
		<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">points</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;upsert_points called with an empty list.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Upserting </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="si">}</span><span class="s2"> points into &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">upsert</span><span class="p">(</span>
			<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
			<span class="n">points</span><span class="o">=</span><span class="n">points</span><span class="p">,</span>
			<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Wait for operation to complete</span>
		<span class="p">)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully upserted </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="si">}</span><span class="s2"> points.&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error upserting points into Qdrant&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.delete_points" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">delete_points</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">delete_points</span><span class="p">(</span><span class="n">point_ids</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="n"><span title="int">int</span></span> <span class="o">|</span> <span class="n"><span title="uuid.UUID">UUID</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Delete points from the collection by their IDs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>point_ids</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span> | <span title="int">int</span> | <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of point IDs to delete.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Delete points from the collection by their IDs.</span>

<span class="sd">	Args:</span>
<span class="sd">	    point_ids: A list of point IDs to delete.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
		<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;delete_points called with an empty list.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">point_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> points from &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
		<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>

		<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
			<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
			<span class="c1"># Ignore linter complaint about list type compatibility</span>
			<span class="n">points_selector</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">PointIdsList</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">),</span>  <span class="c1"># type: ignore[arg-type]</span>
			<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
		<span class="p">)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully deleted </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">point_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> points.&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error deleting points from Qdrant&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.search" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">search</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">search</span><span class="p">(</span>
	<span class="n">query_vector</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="float">float</span></span><span class="p">],</span>
	<span class="n">k</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">query_filter</span><span class="p">:</span> <span class="n"><span title="qdrant_client.models.Filter">Filter</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="qdrant_client.models.ScoredPoint">ScoredPoint</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Perform a vector search with optional filtering.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query_vector</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The vector to search for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>k</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of nearest neighbors to return.</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>query_filter</code>
            </td>
            <td>
                  <code><span title="qdrant_client.models.Filter">Filter</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional Qdrant filter conditions.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="qdrant_client.models.ScoredPoint">ScoredPoint</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of ScoredPoint objects, including ID, score, and payload.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">search</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">query_vector</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
	<span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">query_filter</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">models</span><span class="o">.</span><span class="n">ScoredPoint</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Perform a vector search with optional filtering.</span>

<span class="sd">	Args:</span>
<span class="sd">	    query_vector: The vector to search for.</span>
<span class="sd">	    k: The number of nearest neighbors to return.</span>
<span class="sd">	    query_filter: Optional Qdrant filter conditions.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A list of ScoredPoint objects, including ID, score, and payload.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
		<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">query_vector</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Search called with empty query vector.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="p">[]</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="n">search_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
			<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
			<span class="n">query_vector</span><span class="o">=</span><span class="n">query_vector</span><span class="p">,</span>
			<span class="n">query_filter</span><span class="o">=</span><span class="n">query_filter</span><span class="p">,</span>
			<span class="n">limit</span><span class="o">=</span><span class="n">k</span><span class="p">,</span>
			<span class="n">with_payload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Always include payload</span>
			<span class="n">with_vectors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Usually not needed in results</span>
		<span class="p">)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Search returned </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">search_result</span><span class="p">)</span><span class="si">}</span><span class="s2"> results.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">search_result</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error during Qdrant search&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.get_all_point_ids_with_filter" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_all_point_ids_with_filter</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_all_point_ids_with_filter</span><span class="p">(</span>
	<span class="n">query_filter</span><span class="p">:</span> <span class="n"><span title="qdrant_client.models.Filter">Filter</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="n"><span title="int">int</span></span> <span class="o">|</span> <span class="n"><span title="uuid.UUID">UUID</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Retrieves all point IDs currently in the collection, optionally filtered.</p>
<p>Uses scrolling API to handle potentially large collections.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query_filter</code>
            </td>
            <td>
                  <code><span title="qdrant_client.models.Filter">Filter</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional Qdrant filter to apply.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span> | <span title="int">int</span> | <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of all point IDs matching the filter.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_all_point_ids_with_filter</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span> <span class="n">query_filter</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Retrieves all point IDs currently in the collection, optionally filtered.</span>

<span class="sd">	Uses scrolling API to handle potentially large collections.</span>

<span class="sd">	Args:</span>
<span class="sd">	    query_filter: Optional Qdrant filter to apply.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A list of all point IDs matching the filter.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
		<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
	<span class="n">all_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="c1"># Use Any for offset type hint due to persistent linter issues</span>
	<span class="n">next_offset</span><span class="p">:</span> <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="n">limit_per_scroll</span> <span class="o">=</span> <span class="mi">1000</span>

	<span class="c1"># Add logging for parameters</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
		<span class="sa">f</span><span class="s2">&quot;[QdrantManager Get IDs] Fetching all point IDs from collection &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;%s...&quot;</span><span class="p">,</span>
		<span class="sa">f</span><span class="s2">&quot; with filter: </span><span class="si">{</span><span class="n">query_filter</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">query_filter</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
	<span class="p">)</span>

	<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[QdrantManager Get IDs] Scrolling with offset: </span><span class="si">{</span><span class="n">next_offset</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="n">scroll_response</span><span class="p">,</span> <span class="n">next_offset_id</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">scroll</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">scroll_filter</span><span class="o">=</span><span class="n">query_filter</span><span class="p">,</span>
				<span class="n">limit</span><span class="o">=</span><span class="n">limit_per_scroll</span><span class="p">,</span>
				<span class="n">offset</span><span class="o">=</span><span class="n">next_offset</span><span class="p">,</span>
				<span class="n">with_payload</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
				<span class="n">with_vectors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
			<span class="p">)</span>
			<span class="n">batch_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">point</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">scroll_response</span><span class="p">]</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[QdrantManager Get IDs] Scroll returned </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">batch_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> IDs in this batch.&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">batch_ids</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;[QdrantManager Get IDs] No more IDs returned by scroll. Stopping.&quot;</span><span class="p">)</span>
				<span class="k">break</span>
			<span class="n">all_ids</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;str | int | uuid.UUID&quot;</span><span class="p">,</span> <span class="n">point_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">point_id</span> <span class="ow">in</span> <span class="n">batch_ids</span><span class="p">])</span>
			<span class="c1"># Assign the returned offset ID - type is likely PointId but linter struggles</span>
			<span class="n">next_offset</span> <span class="o">=</span> <span class="n">next_offset_id</span>  <span class="c1"># No ignore needed if next_offset is Any</span>
			<span class="k">if</span> <span class="n">next_offset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
				<span class="k">break</span>

		<span class="k">except</span> <span class="n">UnexpectedResponse</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="c1"># Qdrant might return 404 if offset points to non-existent ID after deletions</span>
			<span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="n">HTTP_NOT_FOUND</span> <span class="ow">and</span> <span class="s2">&quot;Point with id&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">content</span><span class="p">):</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
					<span class="sa">f</span><span class="s2">&quot;Scroll encountered potentially deleted point ID at offset: </span><span class="si">{</span><span class="n">next_offset</span><span class="si">}</span><span class="s2">. Stopping scroll.&quot;</span>
				<span class="p">)</span>
				<span class="k">break</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error scrolling through Qdrant points&quot;</span><span class="p">)</span>
			<span class="k">raise</span>  <span class="c1"># Reraise other unexpected errors</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error scrolling through Qdrant points&quot;</span><span class="p">)</span>
			<span class="k">raise</span>

	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">all_ids</span><span class="p">)</span><span class="si">}</span><span class="s2"> point IDs from collection &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">all_ids</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.get_payloads_by_ids" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_payloads_by_ids</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_payloads_by_ids</span><span class="p">(</span>
	<span class="n">point_ids</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="n"><span title="int">int</span></span> <span class="o">|</span> <span class="n"><span title="uuid.UUID">UUID</span></span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Retrieves payloads for specific point IDs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>point_ids</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span> | <span title="int">int</span> | <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of point IDs to fetch payloads for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary mapping point IDs (as strings) to their payloads.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_payloads_by_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Retrieves payloads for specific point IDs.</span>

<span class="sd">	Args:</span>
<span class="sd">	    point_ids: List of point IDs to fetch payloads for.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A dictionary mapping point IDs (as strings) to their payloads.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
		<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span><span class="p">:</span>
		<span class="k">return</span> <span class="p">{}</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>
		<span class="n">points_data</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span>
			<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
			<span class="c1"># Ignore linter complaint about list type compatibility</span>
			<span class="n">ids</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">,</span>  <span class="c1"># type: ignore[arg-type]</span>
			<span class="n">with_payload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
			<span class="n">with_vectors</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
		<span class="p">)</span>
		<span class="n">payloads</span> <span class="o">=</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">id</span><span class="p">):</span> <span class="n">point</span><span class="o">.</span><span class="n">payload</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points_data</span> <span class="k">if</span> <span class="n">point</span><span class="o">.</span><span class="n">payload</span><span class="p">}</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved payloads for </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">payloads</span><span class="p">)</span><span class="si">}</span><span class="s2"> points.&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">payloads</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error retrieving payloads from Qdrant&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.close" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">close</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">close</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Close the AsyncQdrantClient connection.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Close the AsyncQdrantClient connection.&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Closing Qdrant client connection.&quot;</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error closing Qdrant client&quot;</span><span class="p">)</span>
		<span class="k">finally</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">is_initialized</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.__aenter__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__aenter__</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__aenter__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nf"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;QdrantManager&lt;/span&gt; (&lt;code&gt;codemap.processor.vector.qdrant_manager.QdrantManager&lt;/code&gt;)" href="#codemap.processor.vector.qdrant_manager.QdrantManager">QdrantManager</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Enter the async context manager, initializing the Qdrant client.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QdrantManager&quot;</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Enter the async context manager, initializing the Qdrant client.&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
	<span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.__aexit__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__aexit__</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__aexit__</span><span class="p">(</span>
	<span class="nf">exc_type</span><span class="p">:</span> <span class="n"><span title="type">type</span></span><span class="p">[</span><span class="n"><span title="BaseException">BaseException</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">exc_val</span><span class="p">:</span> <span class="n"><span title="BaseException">BaseException</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">exc_tb</span><span class="p">:</span> <span class="n"><span title="types.TracebackType">TracebackType</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Exit the async context manager, closing the Qdrant client.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aexit__</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Exit the async context manager, closing the Qdrant client.&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.set_payload" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">set_payload</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_payload</span><span class="p">(</span>
	<span class="n">filter_condition</span><span class="p">:</span> <span class="n"><span title="qdrant_client.models.Filter">Filter</span></span><span class="p">,</span>
	<span class="n">payload</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">],</span>
	<span class="n">point_ids</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="n"><span title="int">int</span></span> <span class="o">|</span> <span class="n"><span title="uuid.UUID">UUID</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">key</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set specific payload fields for points without overwriting existing fields.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>payload</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of payload fields to set</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>point_ids</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span> | <span title="int">int</span> | <span title="uuid.UUID">UUID</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional list of point IDs to update</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter_condition</code>
            </td>
            <td>
                  <code><span title="qdrant_client.models.Filter">Filter</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional filter to select points</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional specific payload key path to modify</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">set_payload</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">filter_condition</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span><span class="p">,</span>
	<span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
	<span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Set specific payload fields for points without overwriting existing fields.</span>

<span class="sd">	Args:</span>
<span class="sd">	    payload: Dictionary of payload fields to set</span>
<span class="sd">	    point_ids: Optional list of point IDs to update</span>
<span class="sd">	    filter_condition: Optional filter to select points</span>
<span class="sd">	    key: Optional specific payload key path to modify</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
		<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">payload</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;set_payload called with empty payload.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">filter_condition</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;set_payload called without point_ids or filter.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Setting payload fields: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">payload</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2"> for points in &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">point_ids</span><span class="p">:</span>
			<span class="c1"># Convert to list of Qdrant point IDs</span>
			<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>

			<span class="c1"># Create points selector with IDs</span>
			<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PointIdsList</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">)</span>

			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">set_payload</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
				<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
				<span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
				<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
			<span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># We know filter_condition is not None here because of the initial check</span>
			<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FilterSelector</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">filter_condition</span><span class="p">)</span>

			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">set_payload</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
				<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
				<span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
				<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
			<span class="p">)</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully set payload fields: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">payload</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error setting payload in Qdrant&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.overwrite_payload" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">overwrite_payload</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">overwrite_payload</span><span class="p">(</span>
	<span class="n">payload</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">],</span>
	<span class="n">point_ids</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="n"><span title="int">int</span></span> <span class="o">|</span> <span class="n"><span title="uuid.UUID">UUID</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">filter_condition</span><span class="p">:</span> <span class="n"><span title="qdrant_client.models.Filter">Filter</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Completely replace the payload for points with the new payload.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>payload</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of payload fields to set</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>point_ids</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span> | <span title="int">int</span> | <span title="uuid.UUID">UUID</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional list of point IDs to update</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter_condition</code>
            </td>
            <td>
                  <code><span title="qdrant_client.models.Filter">Filter</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional filter to select points</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">overwrite_payload</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
	<span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">filter_condition</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Completely replace the payload for points with the new payload.</span>

<span class="sd">	Args:</span>
<span class="sd">	    payload: Dictionary of payload fields to set</span>
<span class="sd">	    point_ids: Optional list of point IDs to update</span>
<span class="sd">	    filter_condition: Optional filter to select points</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
		<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">payload</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;overwrite_payload called with empty payload.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">filter_condition</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;overwrite_payload called without point_ids or filter.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Overwriting payload for points in &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">point_ids</span><span class="p">:</span>
			<span class="c1"># Convert to list of Qdrant point IDs</span>
			<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>

			<span class="c1"># Create points selector with IDs</span>
			<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PointIdsList</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">)</span>

			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">overwrite_payload</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
				<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
				<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
			<span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># We know filter_condition is not None here</span>
			<span class="k">if</span> <span class="n">filter_condition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_error_msg</span><span class="p">)</span>
			<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FilterSelector</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">filter_condition</span><span class="p">)</span>

			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">overwrite_payload</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span>
				<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
				<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
			<span class="p">)</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Successfully overwrote payload&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error overwriting payload in Qdrant&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.clear_payload" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">clear_payload</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">clear_payload</span><span class="p">(</span>
	<span class="n">point_ids</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="n"><span title="int">int</span></span> <span class="o">|</span> <span class="n"><span title="uuid.UUID">UUID</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">filter_condition</span><span class="p">:</span> <span class="n"><span title="qdrant_client.models.Filter">Filter</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Remove all payload fields from points.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>point_ids</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span> | <span title="int">int</span> | <span title="uuid.UUID">UUID</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional list of point IDs to update</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter_condition</code>
            </td>
            <td>
                  <code><span title="qdrant_client.models.Filter">Filter</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional filter to select points</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">clear_payload</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span> <span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">filter_condition</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Remove all payload fields from points.</span>

<span class="sd">	Args:</span>
<span class="sd">	    point_ids: Optional list of point IDs to update</span>
<span class="sd">	    filter_condition: Optional filter to select points</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
		<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">filter_condition</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;clear_payload called without point_ids or filter.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Clearing payload for points in &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">point_ids</span><span class="p">:</span>
			<span class="c1"># Convert to list of Qdrant point IDs</span>
			<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>

			<span class="c1"># Create points selector with IDs</span>
			<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PointIdsList</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>

			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">clear_payload</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">points_selector</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
				<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
			<span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># We know filter_condition is not None here</span>
			<span class="k">if</span> <span class="n">filter_condition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_error_msg</span><span class="p">)</span>
			<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FilterSelector</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">filter_condition</span><span class="p">)</span>

			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">clear_payload</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">points_selector</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>  <span class="c1"># type: ignore[arg-type]</span>
				<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
			<span class="p">)</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Successfully cleared payload&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error clearing payload in Qdrant&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.vector.qdrant_manager.QdrantManager.delete_payload_keys" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">delete_payload_keys</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">delete_payload_keys</span><span class="p">(</span>
	<span class="n">keys</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">],</span>
	<span class="n">point_ids</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="n"><span title="int">int</span></span> <span class="o">|</span> <span class="n"><span title="uuid.UUID">UUID</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">filter_condition</span><span class="p">:</span> <span class="n"><span title="qdrant_client.models.Filter">Filter</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Delete specific payload fields from points.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>keys</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of payload field keys to delete</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>point_ids</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span> | <span title="int">int</span> | <span title="uuid.UUID">UUID</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional list of point IDs to update</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter_condition</code>
            </td>
            <td>
                  <code><span title="qdrant_client.models.Filter">Filter</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional filter to select points</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_payload_keys</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
	<span class="n">point_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="n">filter_condition</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Filter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Delete specific payload fields from points.</span>

<span class="sd">	Args:</span>
<span class="sd">	    keys: List of payload field keys to delete</span>
<span class="sd">	    point_ids: Optional list of point IDs to update</span>
<span class="sd">	    filter_condition: Optional filter to select points</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ensure_initialized</span><span class="p">()</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Client should be initialized here&quot;</span>
		<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">keys</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;delete_payload_keys called with empty keys list.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">point_ids</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">filter_condition</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;delete_payload_keys called without point_ids or filter.&quot;</span><span class="p">)</span>
		<span class="k">return</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting payload keys </span><span class="si">{</span><span class="n">keys</span><span class="si">}</span><span class="s2"> for points in &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">point_ids</span><span class="p">:</span>
			<span class="c1"># Convert to list of Qdrant point IDs</span>
			<span class="n">qdrant_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ExtendedPointId</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;ExtendedPointId&quot;</span><span class="p">,</span> <span class="n">pid</span><span class="p">)</span> <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">point_ids</span><span class="p">]</span>

			<span class="c1"># Create points selector with IDs</span>
			<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PointIdsList</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="n">qdrant_ids</span><span class="p">)</span>

			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">delete_payload</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">keys</span><span class="o">=</span><span class="n">keys</span><span class="p">,</span>
				<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
				<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
			<span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># We know filter_condition is not None here</span>
			<span class="k">if</span> <span class="n">filter_condition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_error_msg</span><span class="p">)</span>
			<span class="n">points_selector</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FilterSelector</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="n">filter_condition</span><span class="p">)</span>

			<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">delete_payload</span><span class="p">(</span>
				<span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">collection_name</span><span class="p">,</span>
				<span class="n">keys</span><span class="o">=</span><span class="n">keys</span><span class="p">,</span>
				<span class="n">points</span><span class="o">=</span><span class="n">points_selector</span><span class="p">,</span>
				<span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
			<span class="p">)</span>

		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully deleted payload keys: </span><span class="si">{</span><span class="n">keys</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Error deleting payload keys in Qdrant&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.vector.qdrant_manager.create_qdrant_point" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">create_qdrant_point</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_qdrant_point</span><span class="p">(</span>
	<span class="n">chunk_id</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">vector</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="float">float</span></span><span class="p">],</span>
	<span class="n">payload</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="qdrant_client.http.models.PointStruct">PointStruct</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Helper function to create a Qdrant PointStruct.</p>
<p>Ensures the ID is treated appropriately (UUIDs if possible).</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/vector/qdrant_manager.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_qdrant_point</span><span class="p">(</span><span class="n">chunk_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">PointStruct</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Helper function to create a Qdrant PointStruct.</span>

<span class="sd">	Ensures the ID is treated appropriately (UUIDs if possible).</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">point_id</span><span class="p">:</span> <span class="n">ExtendedPointId</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="c1"># Validate it&#39;s a UUID but use string representation for ExtendedPointId</span>
		<span class="n">uuid_obj</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="n">chunk_id</span><span class="p">)</span>
		<span class="n">point_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid_obj</span><span class="p">)</span>
	<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
		<span class="n">point_id</span> <span class="o">=</span> <span class="n">chunk_id</span>

	<span class="c1"># Keep type ignore for ExtendedPointId union issue</span>
	<span class="k">return</span> <span class="n">PointStruct</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">point_id</span><span class="p">,</span> <span class="n">vector</span><span class="o">=</span><span class="n">vector</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="codemap.processor.tree_sitter" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">tree_sitter</span>


</h3>

    <div class="doc doc-contents ">

        <p>Tree-sitter based code analysis.</p>
<p>This module provides functionality for analyzing source code using tree-
sitter. It extracts structure and semantic information from code files
in various programming languages.</p>









  <div class="doc doc-children">











<div class="doc doc-object doc-class">



<h4 id="codemap.processor.tree_sitter.TreeSitterAnalyzer" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TreeSitterAnalyzer</span>


</h4>


    <div class="doc doc-contents ">


        <p>Analyzer for source code using tree-sitter.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TreeSitterAnalyzer</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Analyzer for source code using tree-sitter.&quot;&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Initialize the tree-sitter analyzer.&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Parser</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_load_parsers</span><span class="p">()</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_load_parsers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Load tree-sitter parsers for supported languages.</span>

<span class="sd">		This method attempts to load parsers for all configured languages</span>
<span class="sd">		using tree-sitter-language-pack. If a language fails to load, it will</span>
<span class="sd">		be logged but won&#39;t prevent other languages from loading.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Parser</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="n">failed_languages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

		<span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">LANGUAGE_CONFIGS</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="c1"># Get the language name for tree-sitter-language-pack</span>
				<span class="n">ts_lang_name</span> <span class="o">=</span> <span class="n">LANGUAGE_NAMES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span>
				<span class="k">if</span> <span class="ow">not</span> <span class="n">ts_lang_name</span><span class="p">:</span>
					<span class="k">continue</span>

				<span class="c1"># Get the language from tree-sitter-language-pack</span>
				<span class="n">language</span><span class="p">:</span> <span class="n">Language</span> <span class="o">=</span> <span class="n">get_language</span><span class="p">(</span><span class="n">ts_lang_name</span><span class="p">)</span>

				<span class="c1"># Create a new parser and set its language</span>
				<span class="n">parser</span><span class="p">:</span> <span class="n">Parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
				<span class="n">parser</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span>

				<span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">[</span><span class="n">lang</span><span class="p">]</span> <span class="o">=</span> <span class="n">parser</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">RuntimeError</span><span class="p">,</span> <span class="ne">ImportError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">failed_languages</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">lang</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to load language </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">lang</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

		<span class="k">if</span> <span class="n">failed_languages</span><span class="p">:</span>
			<span class="n">failed_names</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">err</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">for</span> <span class="n">lang</span><span class="p">,</span> <span class="n">err</span> <span class="ow">in</span> <span class="n">failed_languages</span><span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to load parsers for languages: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">failed_names</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Parser</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the parser for a language.</span>

<span class="sd">		Args:</span>
<span class="sd">		    language: The language to get a parser for</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A tree-sitter parser or None if not supported</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">parse_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Parse a file and return its root node and determined language.</span>

<span class="sd">		Args:</span>
<span class="sd">		    file_path: Path to the file to parse</span>
<span class="sd">		    content: Content of the file</span>
<span class="sd">		    language: Optional language override</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A tuple containing the parse tree root node (or None if parsing failed)</span>
<span class="sd">		    and the determined language</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Determine language if not provided</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">language</span><span class="p">:</span>
			<span class="n">language</span> <span class="o">=</span> <span class="n">get_language_by_extension</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">language</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Could not determine language for file </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
				<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

		<span class="c1"># Get the parser for this language</span>
		<span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">parser</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No parser for language </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">language</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># Parse the content using tree-sitter</span>
			<span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
			<span class="n">tree</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">content_bytes</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">tree</span><span class="o">.</span><span class="n">root_node</span><span class="p">,</span> <span class="n">language</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to parse file </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">language</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_syntax_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageSyntaxHandler</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the syntax handler for a language.</span>

<span class="sd">		Args:</span>
<span class="sd">		    language: The language to get a handler for</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A syntax handler or None if not supported</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">handler_class</span> <span class="o">=</span> <span class="n">LANGUAGE_HANDLERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">handler_class</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span>
		<span class="k">return</span> <span class="n">handler_class</span><span class="p">()</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">analyze_node</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span>
		<span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
		<span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
		<span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
		<span class="n">handler</span><span class="p">:</span> <span class="n">LanguageSyntaxHandler</span><span class="p">,</span>
		<span class="n">parent_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Analyze a tree-sitter node and return structured information.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>
<span class="sd">		    file_path: Path to the source file</span>
<span class="sd">		    language: Programming language</span>
<span class="sd">		    handler: Language-specific syntax handler</span>
<span class="sd">		    parent_node: Parent node if any</span>

<span class="sd">		Returns:</span>
<span class="sd">		    Dict with node analysis information</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Check if we should skip this node</span>
		<span class="k">if</span> <span class="n">handler</span><span class="o">.</span><span class="n">should_skip_node</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
			<span class="k">return</span> <span class="p">{}</span>

		<span class="c1"># Get entity type for this node from the handler</span>
		<span class="n">entity_type</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_entity_type</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">parent_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

		<span class="c1"># Skip unknown/uninteresting nodes unless they might contain interesting children</span>
		<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">named_child_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">{}</span>

		<span class="c1"># Get name and other metadata</span>
		<span class="n">name</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
		<span class="n">docstring_text</span><span class="p">,</span> <span class="n">docstring_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">find_docstring</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

		<span class="c1"># Get node content</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">node_content</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
			<span class="n">node_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

		<span class="c1"># Extract dependencies from import statements</span>
		<span class="n">dependencies</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">dependencies</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_imports</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to extract dependencies: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

		<span class="c1"># Build result</span>
		<span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity_type</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span> <span class="k">else</span> <span class="s2">&quot;UNKNOWN&quot;</span><span class="p">,</span>
			<span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
			<span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
				<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Convert to 1-based</span>
				<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
				<span class="s2">&quot;start_col&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
				<span class="s2">&quot;end_col&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
			<span class="p">},</span>
			<span class="s2">&quot;docstring&quot;</span><span class="p">:</span> <span class="n">docstring_text</span><span class="p">,</span>
			<span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">node_content</span><span class="p">,</span>
			<span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[],</span>
			<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">language</span><span class="p">,</span>
		<span class="p">}</span>

		<span class="c1"># Add dependencies only if they exist to keep the output clean</span>
		<span class="k">if</span> <span class="n">dependencies</span><span class="p">:</span>
			<span class="n">result</span><span class="p">[</span><span class="s2">&quot;dependencies&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dependencies</span>

		<span class="c1"># Extract function calls if the entity is a function or method</span>
		<span class="n">calls</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">if</span> <span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">):</span>
			<span class="n">body_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">body_node</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">calls</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_calls</span><span class="p">(</span><span class="n">body_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
				<span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to extract calls for </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&lt;anonymous&gt;&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

		<span class="c1"># Add calls only if they exist</span>
		<span class="k">if</span> <span class="n">calls</span><span class="p">:</span>
			<span class="n">result</span><span class="p">[</span><span class="s2">&quot;calls&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">calls</span>

		<span class="c1"># Process child nodes</span>
		<span class="n">body_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
		<span class="n">children_to_process</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_children_to_process</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children_to_process</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">docstring_node</span> <span class="ow">and</span> <span class="n">child</span> <span class="o">==</span> <span class="n">docstring_node</span><span class="p">:</span>
				<span class="k">continue</span>  <span class="c1"># Skip docstring node</span>

			<span class="n">child_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_node</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">child_result</span><span class="p">:</span>  <span class="c1"># Only add non-empty results</span>
				<span class="n">result</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_result</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">result</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">analyze_file</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
		<span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
		<span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Analyze a file and return its structural information.</span>

<span class="sd">		Args:</span>
<span class="sd">		    file_path: Path to the file to analyze</span>
<span class="sd">		    content: Content of the file</span>
<span class="sd">		    language: Optional language override</span>
<span class="sd">		    git_metadata: Optional Git metadata</span>

<span class="sd">		Returns:</span>
<span class="sd">		    Dict with file analysis information</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Parse the file</span>
		<span class="n">root_node</span><span class="p">,</span> <span class="n">determined_language</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">root_node</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">determined_language</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
				<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span>
				<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
				<span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Failed to parse file&quot;</span><span class="p">,</span>
			<span class="p">}</span>

		<span class="c1"># Get handler for the language</span>
		<span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_syntax_handler</span><span class="p">(</span><span class="n">determined_language</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">handler</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
				<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span><span class="p">,</span>
				<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
				<span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;No handler for language </span><span class="si">{</span><span class="n">determined_language</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
			<span class="p">}</span>

		<span class="c1"># Analyze the root node</span>
		<span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
		<span class="n">entity_type</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_entity_type</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
			<span class="n">entity_type</span> <span class="o">=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span>  <span class="c1"># Default to MODULE type</span>

		<span class="c1"># Extract module-level docstring</span>
		<span class="n">module_description</span><span class="p">,</span> <span class="n">module_docstring_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">find_docstring</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

		<span class="c1"># Create result</span>
		<span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
			<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span><span class="p">,</span>
			<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
			<span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
			<span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="o">.</span><span class="n">stem</span><span class="p">,</span>
			<span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
				<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
				<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
				<span class="s2">&quot;start_col&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
				<span class="s2">&quot;end_col&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
			<span class="p">},</span>
			<span class="s2">&quot;docstring&quot;</span><span class="p">:</span> <span class="n">module_description</span><span class="p">,</span>
			<span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[],</span>
		<span class="p">}</span>

		<span class="c1"># Process children of the root node</span>
		<span class="n">children_to_process</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_children_to_process</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children_to_process</span><span class="p">:</span>
			<span class="c1"># Skip the module docstring node if found</span>
			<span class="k">if</span> <span class="n">module_docstring_node</span> <span class="ow">and</span> <span class="n">child</span> <span class="o">==</span> <span class="n">module_docstring_node</span><span class="p">:</span>
				<span class="k">continue</span>

			<span class="n">child_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_node</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">determined_language</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">child_result</span><span class="p">:</span>  <span class="c1"># Only add non-empty results</span>
				<span class="n">result</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_result</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h5 id="codemap.processor.tree_sitter.TreeSitterAnalyzer.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the tree-sitter analyzer.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Initialize the tree-sitter analyzer.&quot;&quot;&quot;</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Parser</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_load_parsers</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.TreeSitterAnalyzer.parsers" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">parsers</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">parsers</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="tree_sitter.Parser">Parser</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.tree_sitter.TreeSitterAnalyzer.get_parser" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_parser</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_parser</span><span class="p">(</span><span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Parser">Parser</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the parser for a language.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>language</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The language to get a parser for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Parser">Parser</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tree-sitter parser or None if not supported</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Parser</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the parser for a language.</span>

<span class="sd">	Args:</span>
<span class="sd">	    language: The language to get a parser for</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A tree-sitter parser or None if not supported</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.tree_sitter.TreeSitterAnalyzer.parse_file" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">parse_file</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">parse_file</span><span class="p">(</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span>
	<span class="n">content</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Parse a file and return its root node and determined language.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the file to parse</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Content of the file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>language</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional language override</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple containing the parse tree root node (or None if parsing failed)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>and the determined language</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Parse a file and return its root node and determined language.</span>

<span class="sd">	Args:</span>
<span class="sd">	    file_path: Path to the file to parse</span>
<span class="sd">	    content: Content of the file</span>
<span class="sd">	    language: Optional language override</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A tuple containing the parse tree root node (or None if parsing failed)</span>
<span class="sd">	    and the determined language</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Determine language if not provided</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">language</span><span class="p">:</span>
		<span class="n">language</span> <span class="o">=</span> <span class="n">get_language_by_extension</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">language</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Could not determine language for file </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

	<span class="c1"># Get the parser for this language</span>
	<span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">parser</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No parser for language </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">language</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="c1"># Parse the content using tree-sitter</span>
		<span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
		<span class="n">tree</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">content_bytes</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">tree</span><span class="o">.</span><span class="n">root_node</span><span class="p">,</span> <span class="n">language</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to parse file </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">language</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.tree_sitter.TreeSitterAnalyzer.get_syntax_handler" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_syntax_handler</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_syntax_handler</span><span class="p">(</span>
	<span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.LanguageSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler">LanguageSyntaxHandler</a></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the syntax handler for a language.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>language</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The language to get a handler for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.LanguageSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler">LanguageSyntaxHandler</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A syntax handler or None if not supported</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_syntax_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageSyntaxHandler</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the syntax handler for a language.</span>

<span class="sd">	Args:</span>
<span class="sd">	    language: The language to get a handler for</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A syntax handler or None if not supported</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">handler_class</span> <span class="o">=</span> <span class="n">LANGUAGE_HANDLERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">handler_class</span><span class="p">:</span>
		<span class="k">return</span> <span class="kc">None</span>
	<span class="k">return</span> <span class="n">handler_class</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.tree_sitter.TreeSitterAnalyzer.analyze_node" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">analyze_node</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">analyze_node</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span>
	<span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span><span class="p">,</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span>
	<span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">handler</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.LanguageSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler">LanguageSyntaxHandler</a></span><span class="p">,</span>
	<span class="n">parent_node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="dict">dict</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Analyze a tree-sitter node and return structured information.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the source file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>language</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Programming language</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>handler</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.LanguageSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler">LanguageSyntaxHandler</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Language-specific syntax handler</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>parent_node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parent node if any</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict with node analysis information</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">analyze_node</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span>
	<span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
	<span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
	<span class="n">handler</span><span class="p">:</span> <span class="n">LanguageSyntaxHandler</span><span class="p">,</span>
	<span class="n">parent_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Analyze a tree-sitter node and return structured information.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>
<span class="sd">	    file_path: Path to the source file</span>
<span class="sd">	    language: Programming language</span>
<span class="sd">	    handler: Language-specific syntax handler</span>
<span class="sd">	    parent_node: Parent node if any</span>

<span class="sd">	Returns:</span>
<span class="sd">	    Dict with node analysis information</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Check if we should skip this node</span>
	<span class="k">if</span> <span class="n">handler</span><span class="o">.</span><span class="n">should_skip_node</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
		<span class="k">return</span> <span class="p">{}</span>

	<span class="c1"># Get entity type for this node from the handler</span>
	<span class="n">entity_type</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_entity_type</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">parent_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

	<span class="c1"># Skip unknown/uninteresting nodes unless they might contain interesting children</span>
	<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">named_child_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
		<span class="k">return</span> <span class="p">{}</span>

	<span class="c1"># Get name and other metadata</span>
	<span class="n">name</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
	<span class="n">docstring_text</span><span class="p">,</span> <span class="n">docstring_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">find_docstring</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

	<span class="c1"># Get node content</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">node_content</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
		<span class="n">node_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

	<span class="c1"># Extract dependencies from import statements</span>
	<span class="n">dependencies</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span><span class="p">:</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">dependencies</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_imports</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to extract dependencies: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

	<span class="c1"># Build result</span>
	<span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity_type</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span> <span class="k">else</span> <span class="s2">&quot;UNKNOWN&quot;</span><span class="p">,</span>
		<span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
		<span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
			<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Convert to 1-based</span>
			<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
			<span class="s2">&quot;start_col&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
			<span class="s2">&quot;end_col&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
		<span class="p">},</span>
		<span class="s2">&quot;docstring&quot;</span><span class="p">:</span> <span class="n">docstring_text</span><span class="p">,</span>
		<span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">node_content</span><span class="p">,</span>
		<span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[],</span>
		<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">language</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="c1"># Add dependencies only if they exist to keep the output clean</span>
	<span class="k">if</span> <span class="n">dependencies</span><span class="p">:</span>
		<span class="n">result</span><span class="p">[</span><span class="s2">&quot;dependencies&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dependencies</span>

	<span class="c1"># Extract function calls if the entity is a function or method</span>
	<span class="n">calls</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">if</span> <span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">):</span>
		<span class="n">body_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">body_node</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">calls</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_calls</span><span class="p">(</span><span class="n">body_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to extract calls for </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&lt;anonymous&gt;&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

	<span class="c1"># Add calls only if they exist</span>
	<span class="k">if</span> <span class="n">calls</span><span class="p">:</span>
		<span class="n">result</span><span class="p">[</span><span class="s2">&quot;calls&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">calls</span>

	<span class="c1"># Process child nodes</span>
	<span class="n">body_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
	<span class="n">children_to_process</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_children_to_process</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">)</span>

	<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children_to_process</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">docstring_node</span> <span class="ow">and</span> <span class="n">child</span> <span class="o">==</span> <span class="n">docstring_node</span><span class="p">:</span>
			<span class="k">continue</span>  <span class="c1"># Skip docstring node</span>

		<span class="n">child_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_node</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">child_result</span><span class="p">:</span>  <span class="c1"># Only add non-empty results</span>
			<span class="n">result</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_result</span><span class="p">)</span>

	<span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.tree_sitter.TreeSitterAnalyzer.analyze_file" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">analyze_file</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">analyze_file</span><span class="p">(</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span>
	<span class="n">content</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="dict">dict</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Analyze a file and return its structural information.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the file to analyze</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Content of the file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>language</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional language override</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>git_metadata</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional Git metadata</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict with file analysis information</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">analyze_file</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
	<span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
	<span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Analyze a file and return its structural information.</span>

<span class="sd">	Args:</span>
<span class="sd">	    file_path: Path to the file to analyze</span>
<span class="sd">	    content: Content of the file</span>
<span class="sd">	    language: Optional language override</span>
<span class="sd">	    git_metadata: Optional Git metadata</span>

<span class="sd">	Returns:</span>
<span class="sd">	    Dict with file analysis information</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Parse the file</span>
	<span class="n">root_node</span><span class="p">,</span> <span class="n">determined_language</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">root_node</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">determined_language</span><span class="p">:</span>
		<span class="k">return</span> <span class="p">{</span>
			<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
			<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span>
			<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
			<span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Failed to parse file&quot;</span><span class="p">,</span>
		<span class="p">}</span>

	<span class="c1"># Get handler for the language</span>
	<span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_syntax_handler</span><span class="p">(</span><span class="n">determined_language</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">handler</span><span class="p">:</span>
		<span class="k">return</span> <span class="p">{</span>
			<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
			<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span><span class="p">,</span>
			<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
			<span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;No handler for language </span><span class="si">{</span><span class="n">determined_language</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
		<span class="p">}</span>

	<span class="c1"># Analyze the root node</span>
	<span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
	<span class="n">entity_type</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_entity_type</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
		<span class="n">entity_type</span> <span class="o">=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span>  <span class="c1"># Default to MODULE type</span>

	<span class="c1"># Extract module-level docstring</span>
	<span class="n">module_description</span><span class="p">,</span> <span class="n">module_docstring_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">find_docstring</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

	<span class="c1"># Create result</span>
	<span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
		<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span><span class="p">,</span>
		<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
		<span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
		<span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="o">.</span><span class="n">stem</span><span class="p">,</span>
		<span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
			<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
			<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
			<span class="s2">&quot;start_col&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
			<span class="s2">&quot;end_col&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
		<span class="p">},</span>
		<span class="s2">&quot;docstring&quot;</span><span class="p">:</span> <span class="n">module_description</span><span class="p">,</span>
		<span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[],</span>
	<span class="p">}</span>

	<span class="c1"># Process children of the root node</span>
	<span class="n">children_to_process</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_children_to_process</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children_to_process</span><span class="p">:</span>
		<span class="c1"># Skip the module docstring node if found</span>
		<span class="k">if</span> <span class="n">module_docstring_node</span> <span class="ow">and</span> <span class="n">child</span> <span class="o">==</span> <span class="n">module_docstring_node</span><span class="p">:</span>
			<span class="k">continue</span>

		<span class="n">child_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_node</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">determined_language</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">child_result</span><span class="p">:</span>  <span class="c1"># Only add non-empty results</span>
			<span class="n">result</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_result</span><span class="p">)</span>

	<span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h4 id="codemap.processor.tree_sitter.EntityType" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">EntityType</span>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Types of code entities that can be extracted.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">EntityType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Types of code entities that can be extracted.&quot;&quot;&quot;</span>

	<span class="c1"># File-level entities</span>
	<span class="n">MODULE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">NAMESPACE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">PACKAGE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="c1"># Type definitions</span>
	<span class="n">CLASS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">INTERFACE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">PROTOCOL</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>  <span class="c1"># Similar to interface but for structural typing</span>
	<span class="n">STRUCT</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">ENUM</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">TYPE_ALIAS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="c1"># Functions and methods</span>
	<span class="n">FUNCTION</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">METHOD</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">PROPERTY</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>  <span class="c1"># For getter/setter methods</span>
	<span class="n">TEST_CASE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">TEST_SUITE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="c1"># Variables and constants</span>
	<span class="n">VARIABLE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">CONSTANT</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">CLASS_FIELD</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>  <span class="c1"># For class-level variables/fields</span>

	<span class="c1"># Code organization</span>
	<span class="n">IMPORT</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">DECORATOR</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="c1"># Documentation</span>
	<span class="n">COMMENT</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">DOCSTRING</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="c1"># Special cases</span>
	<span class="n">UNKNOWN</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.MODULE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">MODULE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">MODULE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.NAMESPACE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">NAMESPACE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">NAMESPACE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.PACKAGE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">PACKAGE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">PACKAGE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.CLASS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">CLASS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">CLASS</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.INTERFACE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">INTERFACE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">INTERFACE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.PROTOCOL" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">PROTOCOL</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">PROTOCOL</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.STRUCT" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">STRUCT</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">STRUCT</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.ENUM" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">ENUM</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ENUM</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.TYPE_ALIAS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">TYPE_ALIAS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">TYPE_ALIAS</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.FUNCTION" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">FUNCTION</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">FUNCTION</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.METHOD" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">METHOD</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">METHOD</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.PROPERTY" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">PROPERTY</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">PROPERTY</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.TEST_CASE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">TEST_CASE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">TEST_CASE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.TEST_SUITE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">TEST_SUITE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">TEST_SUITE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.VARIABLE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">VARIABLE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">VARIABLE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.CONSTANT" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">CONSTANT</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">CONSTANT</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.CLASS_FIELD" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">CLASS_FIELD</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">CLASS_FIELD</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.IMPORT" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">IMPORT</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">IMPORT</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.DECORATOR" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">DECORATOR</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">DECORATOR</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.COMMENT" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">COMMENT</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">COMMENT</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.DOCSTRING" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">DOCSTRING</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">DOCSTRING</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.EntityType.UNKNOWN" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">UNKNOWN</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">UNKNOWN</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>










<div class="doc doc-object doc-module">



<h4 id="codemap.processor.tree_sitter.base" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">base</span>


</h4>

    <div class="doc doc-contents ">

        <p>Base classes and interfaces for tree-sitter analysis.</p>
<p>This module defines the core data structures and interfaces for tree-sitter analysis.
It provides:
- Entity type definitions for tree-sitter nodes
- Metadata structures for tree-sitter nodes.
- Base tree-sitter analysis interface</p>









  <div class="doc doc-children">



























<div class="doc doc-object doc-class">



<h5 id="codemap.processor.tree_sitter.base.EntityType" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">EntityType</span>


</h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Types of code entities that can be extracted.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">EntityType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Types of code entities that can be extracted.&quot;&quot;&quot;</span>

	<span class="c1"># File-level entities</span>
	<span class="n">MODULE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">NAMESPACE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">PACKAGE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="c1"># Type definitions</span>
	<span class="n">CLASS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">INTERFACE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">PROTOCOL</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>  <span class="c1"># Similar to interface but for structural typing</span>
	<span class="n">STRUCT</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">ENUM</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">TYPE_ALIAS</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="c1"># Functions and methods</span>
	<span class="n">FUNCTION</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">METHOD</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">PROPERTY</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>  <span class="c1"># For getter/setter methods</span>
	<span class="n">TEST_CASE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">TEST_SUITE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="c1"># Variables and constants</span>
	<span class="n">VARIABLE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">CONSTANT</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">CLASS_FIELD</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>  <span class="c1"># For class-level variables/fields</span>

	<span class="c1"># Code organization</span>
	<span class="n">IMPORT</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">DECORATOR</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="c1"># Documentation</span>
	<span class="n">COMMENT</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">DOCSTRING</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="c1"># Special cases</span>
	<span class="n">UNKNOWN</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.MODULE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">MODULE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">MODULE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.NAMESPACE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">NAMESPACE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">NAMESPACE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.PACKAGE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">PACKAGE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">PACKAGE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.CLASS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">CLASS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">CLASS</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.INTERFACE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">INTERFACE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">INTERFACE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.PROTOCOL" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">PROTOCOL</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">PROTOCOL</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.STRUCT" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">STRUCT</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">STRUCT</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.ENUM" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">ENUM</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ENUM</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.TYPE_ALIAS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">TYPE_ALIAS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">TYPE_ALIAS</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.FUNCTION" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">FUNCTION</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">FUNCTION</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.METHOD" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">METHOD</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">METHOD</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.PROPERTY" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">PROPERTY</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">PROPERTY</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.TEST_CASE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">TEST_CASE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">TEST_CASE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.TEST_SUITE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">TEST_SUITE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">TEST_SUITE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.VARIABLE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">VARIABLE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">VARIABLE</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.CONSTANT" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">CONSTANT</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">CONSTANT</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.CLASS_FIELD" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">CLASS_FIELD</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">CLASS_FIELD</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.IMPORT" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">IMPORT</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">IMPORT</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.DECORATOR" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">DECORATOR</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">DECORATOR</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.COMMENT" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">COMMENT</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">COMMENT</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.DOCSTRING" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">DOCSTRING</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">DOCSTRING</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.base.EntityType.UNKNOWN" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">UNKNOWN</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">UNKNOWN</span> <span class="o">=</span> <span class="n"><span title="enum.auto">auto</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>








  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="codemap.processor.tree_sitter.analyzer" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">analyzer</span>


</h4>

    <div class="doc doc-contents ">

        <p>Tree-sitter based code analysis.</p>
<p>This module provides functionality for analyzing source code using tree-
sitter.</p>









  <div class="doc doc-children">



























































<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.analyzer.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.analyzer.LANGUAGE_NAMES" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">LANGUAGE_NAMES</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">LANGUAGE_NAMES</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="tree_sitter_language_pack.SupportedLanguage">SupportedLanguage</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s2">&quot;python&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
	<span class="s2">&quot;javascript&quot;</span><span class="p">:</span> <span class="s2">&quot;javascript&quot;</span><span class="p">,</span>
	<span class="s2">&quot;typescript&quot;</span><span class="p">:</span> <span class="s2">&quot;typescript&quot;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h5 id="codemap.processor.tree_sitter.analyzer.get_language_by_extension" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_language_by_extension</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_language_by_extension</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get language name from file extension.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Language name if supported, None otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_language_by_extension</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get language name from file extension.</span>

<span class="sd">	Args:</span>
<span class="sd">	    file_path: Path to the file</span>

<span class="sd">	Returns:</span>
<span class="sd">	    Language name if supported, None otherwise</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">ext</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">suffix</span>
	<span class="k">for</span> <span class="n">lang</span><span class="p">,</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">LANGUAGE_CONFIGS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
		<span class="k">if</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">file_extensions</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">lang</span>
	<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-class">



<h5 id="codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TreeSitterAnalyzer</span>


</h5>


    <div class="doc doc-contents ">


        <p>Analyzer for source code using tree-sitter.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TreeSitterAnalyzer</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Analyzer for source code using tree-sitter.&quot;&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Initialize the tree-sitter analyzer.&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Parser</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_load_parsers</span><span class="p">()</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_load_parsers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Load tree-sitter parsers for supported languages.</span>

<span class="sd">		This method attempts to load parsers for all configured languages</span>
<span class="sd">		using tree-sitter-language-pack. If a language fails to load, it will</span>
<span class="sd">		be logged but won&#39;t prevent other languages from loading.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Parser</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="n">failed_languages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

		<span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">LANGUAGE_CONFIGS</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="c1"># Get the language name for tree-sitter-language-pack</span>
				<span class="n">ts_lang_name</span> <span class="o">=</span> <span class="n">LANGUAGE_NAMES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span>
				<span class="k">if</span> <span class="ow">not</span> <span class="n">ts_lang_name</span><span class="p">:</span>
					<span class="k">continue</span>

				<span class="c1"># Get the language from tree-sitter-language-pack</span>
				<span class="n">language</span><span class="p">:</span> <span class="n">Language</span> <span class="o">=</span> <span class="n">get_language</span><span class="p">(</span><span class="n">ts_lang_name</span><span class="p">)</span>

				<span class="c1"># Create a new parser and set its language</span>
				<span class="n">parser</span><span class="p">:</span> <span class="n">Parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
				<span class="n">parser</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span>

				<span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">[</span><span class="n">lang</span><span class="p">]</span> <span class="o">=</span> <span class="n">parser</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">RuntimeError</span><span class="p">,</span> <span class="ne">ImportError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">failed_languages</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">lang</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to load language </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">lang</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

		<span class="k">if</span> <span class="n">failed_languages</span><span class="p">:</span>
			<span class="n">failed_names</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">err</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">for</span> <span class="n">lang</span><span class="p">,</span> <span class="n">err</span> <span class="ow">in</span> <span class="n">failed_languages</span><span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to load parsers for languages: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">failed_names</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Parser</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the parser for a language.</span>

<span class="sd">		Args:</span>
<span class="sd">		    language: The language to get a parser for</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A tree-sitter parser or None if not supported</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">parse_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Parse a file and return its root node and determined language.</span>

<span class="sd">		Args:</span>
<span class="sd">		    file_path: Path to the file to parse</span>
<span class="sd">		    content: Content of the file</span>
<span class="sd">		    language: Optional language override</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A tuple containing the parse tree root node (or None if parsing failed)</span>
<span class="sd">		    and the determined language</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Determine language if not provided</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">language</span><span class="p">:</span>
			<span class="n">language</span> <span class="o">=</span> <span class="n">get_language_by_extension</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">language</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Could not determine language for file </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
				<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

		<span class="c1"># Get the parser for this language</span>
		<span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">parser</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No parser for language </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">language</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># Parse the content using tree-sitter</span>
			<span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
			<span class="n">tree</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">content_bytes</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">tree</span><span class="o">.</span><span class="n">root_node</span><span class="p">,</span> <span class="n">language</span>
		<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to parse file </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">language</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_syntax_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageSyntaxHandler</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the syntax handler for a language.</span>

<span class="sd">		Args:</span>
<span class="sd">		    language: The language to get a handler for</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A syntax handler or None if not supported</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">handler_class</span> <span class="o">=</span> <span class="n">LANGUAGE_HANDLERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">handler_class</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span>
		<span class="k">return</span> <span class="n">handler_class</span><span class="p">()</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">analyze_node</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span>
		<span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
		<span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
		<span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
		<span class="n">handler</span><span class="p">:</span> <span class="n">LanguageSyntaxHandler</span><span class="p">,</span>
		<span class="n">parent_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Analyze a tree-sitter node and return structured information.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>
<span class="sd">		    file_path: Path to the source file</span>
<span class="sd">		    language: Programming language</span>
<span class="sd">		    handler: Language-specific syntax handler</span>
<span class="sd">		    parent_node: Parent node if any</span>

<span class="sd">		Returns:</span>
<span class="sd">		    Dict with node analysis information</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Check if we should skip this node</span>
		<span class="k">if</span> <span class="n">handler</span><span class="o">.</span><span class="n">should_skip_node</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
			<span class="k">return</span> <span class="p">{}</span>

		<span class="c1"># Get entity type for this node from the handler</span>
		<span class="n">entity_type</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_entity_type</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">parent_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

		<span class="c1"># Skip unknown/uninteresting nodes unless they might contain interesting children</span>
		<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">named_child_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">{}</span>

		<span class="c1"># Get name and other metadata</span>
		<span class="n">name</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
		<span class="n">docstring_text</span><span class="p">,</span> <span class="n">docstring_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">find_docstring</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

		<span class="c1"># Get node content</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">node_content</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
			<span class="n">node_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

		<span class="c1"># Extract dependencies from import statements</span>
		<span class="n">dependencies</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">dependencies</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_imports</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to extract dependencies: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

		<span class="c1"># Build result</span>
		<span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity_type</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span> <span class="k">else</span> <span class="s2">&quot;UNKNOWN&quot;</span><span class="p">,</span>
			<span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
			<span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
				<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Convert to 1-based</span>
				<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
				<span class="s2">&quot;start_col&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
				<span class="s2">&quot;end_col&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
			<span class="p">},</span>
			<span class="s2">&quot;docstring&quot;</span><span class="p">:</span> <span class="n">docstring_text</span><span class="p">,</span>
			<span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">node_content</span><span class="p">,</span>
			<span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[],</span>
			<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">language</span><span class="p">,</span>
		<span class="p">}</span>

		<span class="c1"># Add dependencies only if they exist to keep the output clean</span>
		<span class="k">if</span> <span class="n">dependencies</span><span class="p">:</span>
			<span class="n">result</span><span class="p">[</span><span class="s2">&quot;dependencies&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dependencies</span>

		<span class="c1"># Extract function calls if the entity is a function or method</span>
		<span class="n">calls</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">if</span> <span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">):</span>
			<span class="n">body_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">body_node</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">calls</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_calls</span><span class="p">(</span><span class="n">body_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
				<span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to extract calls for </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&lt;anonymous&gt;&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

		<span class="c1"># Add calls only if they exist</span>
		<span class="k">if</span> <span class="n">calls</span><span class="p">:</span>
			<span class="n">result</span><span class="p">[</span><span class="s2">&quot;calls&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">calls</span>

		<span class="c1"># Process child nodes</span>
		<span class="n">body_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
		<span class="n">children_to_process</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_children_to_process</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children_to_process</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">docstring_node</span> <span class="ow">and</span> <span class="n">child</span> <span class="o">==</span> <span class="n">docstring_node</span><span class="p">:</span>
				<span class="k">continue</span>  <span class="c1"># Skip docstring node</span>

			<span class="n">child_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_node</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">child_result</span><span class="p">:</span>  <span class="c1"># Only add non-empty results</span>
				<span class="n">result</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_result</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">result</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">analyze_file</span><span class="p">(</span>
		<span class="bp">self</span><span class="p">,</span>
		<span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
		<span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
		<span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Analyze a file and return its structural information.</span>

<span class="sd">		Args:</span>
<span class="sd">		    file_path: Path to the file to analyze</span>
<span class="sd">		    content: Content of the file</span>
<span class="sd">		    language: Optional language override</span>
<span class="sd">		    git_metadata: Optional Git metadata</span>

<span class="sd">		Returns:</span>
<span class="sd">		    Dict with file analysis information</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Parse the file</span>
		<span class="n">root_node</span><span class="p">,</span> <span class="n">determined_language</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">root_node</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">determined_language</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
				<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span>
				<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
				<span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Failed to parse file&quot;</span><span class="p">,</span>
			<span class="p">}</span>

		<span class="c1"># Get handler for the language</span>
		<span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_syntax_handler</span><span class="p">(</span><span class="n">determined_language</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">handler</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
				<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span><span class="p">,</span>
				<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
				<span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;No handler for language </span><span class="si">{</span><span class="n">determined_language</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
			<span class="p">}</span>

		<span class="c1"># Analyze the root node</span>
		<span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
		<span class="n">entity_type</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_entity_type</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
			<span class="n">entity_type</span> <span class="o">=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span>  <span class="c1"># Default to MODULE type</span>

		<span class="c1"># Extract module-level docstring</span>
		<span class="n">module_description</span><span class="p">,</span> <span class="n">module_docstring_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">find_docstring</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

		<span class="c1"># Create result</span>
		<span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
			<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span><span class="p">,</span>
			<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
			<span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
			<span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="o">.</span><span class="n">stem</span><span class="p">,</span>
			<span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
				<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
				<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
				<span class="s2">&quot;start_col&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
				<span class="s2">&quot;end_col&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
			<span class="p">},</span>
			<span class="s2">&quot;docstring&quot;</span><span class="p">:</span> <span class="n">module_description</span><span class="p">,</span>
			<span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[],</span>
		<span class="p">}</span>

		<span class="c1"># Process children of the root node</span>
		<span class="n">children_to_process</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_children_to_process</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children_to_process</span><span class="p">:</span>
			<span class="c1"># Skip the module docstring node if found</span>
			<span class="k">if</span> <span class="n">module_docstring_node</span> <span class="ow">and</span> <span class="n">child</span> <span class="o">==</span> <span class="n">module_docstring_node</span><span class="p">:</span>
				<span class="k">continue</span>

			<span class="n">child_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_node</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">determined_language</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">child_result</span><span class="p">:</span>  <span class="c1"># Only add non-empty results</span>
				<span class="n">result</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_result</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize the tree-sitter analyzer.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Initialize the tree-sitter analyzer.&quot;&quot;&quot;</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Parser</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_load_parsers</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.parsers" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">parsers</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">parsers</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="tree_sitter.Parser">Parser</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.get_parser" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_parser</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_parser</span><span class="p">(</span><span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Parser">Parser</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the parser for a language.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>language</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The language to get a parser for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Parser">Parser</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tree-sitter parser or None if not supported</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Parser</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the parser for a language.</span>

<span class="sd">	Args:</span>
<span class="sd">	    language: The language to get a parser for</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A tree-sitter parser or None if not supported</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.parse_file" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">parse_file</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">parse_file</span><span class="p">(</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span>
	<span class="n">content</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Parse a file and return its root node and determined language.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the file to parse</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Content of the file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>language</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional language override</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple containing the parse tree root node (or None if parsing failed)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>and the determined language</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Parse a file and return its root node and determined language.</span>

<span class="sd">	Args:</span>
<span class="sd">	    file_path: Path to the file to parse</span>
<span class="sd">	    content: Content of the file</span>
<span class="sd">	    language: Optional language override</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A tuple containing the parse tree root node (or None if parsing failed)</span>
<span class="sd">	    and the determined language</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Determine language if not provided</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">language</span><span class="p">:</span>
		<span class="n">language</span> <span class="o">=</span> <span class="n">get_language_by_extension</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">language</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Could not determine language for file </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
			<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

	<span class="c1"># Get the parser for this language</span>
	<span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parser</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">parser</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No parser for language </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">language</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="c1"># Parse the content using tree-sitter</span>
		<span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
		<span class="n">tree</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">content_bytes</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">tree</span><span class="o">.</span><span class="n">root_node</span><span class="p">,</span> <span class="n">language</span>
	<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Failed to parse file </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
		<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="n">language</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.get_syntax_handler" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_syntax_handler</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_syntax_handler</span><span class="p">(</span>
	<span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.LanguageSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler">LanguageSyntaxHandler</a></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the syntax handler for a language.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>language</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The language to get a handler for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.LanguageSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler">LanguageSyntaxHandler</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A syntax handler or None if not supported</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_syntax_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LanguageSyntaxHandler</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the syntax handler for a language.</span>

<span class="sd">	Args:</span>
<span class="sd">	    language: The language to get a handler for</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A syntax handler or None if not supported</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">handler_class</span> <span class="o">=</span> <span class="n">LANGUAGE_HANDLERS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">handler_class</span><span class="p">:</span>
		<span class="k">return</span> <span class="kc">None</span>
	<span class="k">return</span> <span class="n">handler_class</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.analyze_node" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">analyze_node</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">analyze_node</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span>
	<span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span><span class="p">,</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span>
	<span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">handler</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.LanguageSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler">LanguageSyntaxHandler</a></span><span class="p">,</span>
	<span class="n">parent_node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="dict">dict</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Analyze a tree-sitter node and return structured information.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the source file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>language</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Programming language</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>handler</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.LanguageSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.LanguageSyntaxHandler">LanguageSyntaxHandler</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Language-specific syntax handler</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>parent_node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Parent node if any</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict with node analysis information</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">analyze_node</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span>
	<span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
	<span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
	<span class="n">handler</span><span class="p">:</span> <span class="n">LanguageSyntaxHandler</span><span class="p">,</span>
	<span class="n">parent_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Analyze a tree-sitter node and return structured information.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>
<span class="sd">	    file_path: Path to the source file</span>
<span class="sd">	    language: Programming language</span>
<span class="sd">	    handler: Language-specific syntax handler</span>
<span class="sd">	    parent_node: Parent node if any</span>

<span class="sd">	Returns:</span>
<span class="sd">	    Dict with node analysis information</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Check if we should skip this node</span>
	<span class="k">if</span> <span class="n">handler</span><span class="o">.</span><span class="n">should_skip_node</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
		<span class="k">return</span> <span class="p">{}</span>

	<span class="c1"># Get entity type for this node from the handler</span>
	<span class="n">entity_type</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_entity_type</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">parent_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

	<span class="c1"># Skip unknown/uninteresting nodes unless they might contain interesting children</span>
	<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">named_child_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
		<span class="k">return</span> <span class="p">{}</span>

	<span class="c1"># Get name and other metadata</span>
	<span class="n">name</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
	<span class="n">docstring_text</span><span class="p">,</span> <span class="n">docstring_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">find_docstring</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

	<span class="c1"># Get node content</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">node_content</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
		<span class="n">node_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

	<span class="c1"># Extract dependencies from import statements</span>
	<span class="n">dependencies</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span><span class="p">:</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">dependencies</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_imports</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to extract dependencies: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

	<span class="c1"># Build result</span>
	<span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity_type</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span> <span class="k">else</span> <span class="s2">&quot;UNKNOWN&quot;</span><span class="p">,</span>
		<span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
		<span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
			<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Convert to 1-based</span>
			<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
			<span class="s2">&quot;start_col&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
			<span class="s2">&quot;end_col&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
		<span class="p">},</span>
		<span class="s2">&quot;docstring&quot;</span><span class="p">:</span> <span class="n">docstring_text</span><span class="p">,</span>
		<span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">node_content</span><span class="p">,</span>
		<span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[],</span>
		<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">language</span><span class="p">,</span>
	<span class="p">}</span>

	<span class="c1"># Add dependencies only if they exist to keep the output clean</span>
	<span class="k">if</span> <span class="n">dependencies</span><span class="p">:</span>
		<span class="n">result</span><span class="p">[</span><span class="s2">&quot;dependencies&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dependencies</span>

	<span class="c1"># Extract function calls if the entity is a function or method</span>
	<span class="n">calls</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">if</span> <span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">):</span>
		<span class="n">body_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">body_node</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">calls</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">extract_calls</span><span class="p">(</span><span class="n">body_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to extract calls for </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&lt;anonymous&gt;&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

	<span class="c1"># Add calls only if they exist</span>
	<span class="k">if</span> <span class="n">calls</span><span class="p">:</span>
		<span class="n">result</span><span class="p">[</span><span class="s2">&quot;calls&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">calls</span>

	<span class="c1"># Process child nodes</span>
	<span class="n">body_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
	<span class="n">children_to_process</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_children_to_process</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">)</span>

	<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children_to_process</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">docstring_node</span> <span class="ow">and</span> <span class="n">child</span> <span class="o">==</span> <span class="n">docstring_node</span><span class="p">:</span>
			<span class="k">continue</span>  <span class="c1"># Skip docstring node</span>

		<span class="n">child_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_node</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">child_result</span><span class="p">:</span>  <span class="c1"># Only add non-empty results</span>
			<span class="n">result</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_result</span><span class="p">)</span>

	<span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.analyzer.TreeSitterAnalyzer.analyze_file" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">analyze_file</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">analyze_file</span><span class="p">(</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n"><span title="pathlib.Path">Path</span></span><span class="p">,</span>
	<span class="n">content</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">,</span>
	<span class="n">language</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="dict">dict</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Analyze a file and return its structural information.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>file_path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the file to analyze</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Content of the file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>language</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional language override</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>git_metadata</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional Git metadata</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict with file analysis information</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/analyzer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">analyze_file</span><span class="p">(</span>
	<span class="bp">self</span><span class="p">,</span>
	<span class="n">file_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
	<span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
	<span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Analyze a file and return its structural information.</span>

<span class="sd">	Args:</span>
<span class="sd">	    file_path: Path to the file to analyze</span>
<span class="sd">	    content: Content of the file</span>
<span class="sd">	    language: Optional language override</span>
<span class="sd">	    git_metadata: Optional Git metadata</span>

<span class="sd">	Returns:</span>
<span class="sd">	    Dict with file analysis information</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Parse the file</span>
	<span class="n">root_node</span><span class="p">,</span> <span class="n">determined_language</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">root_node</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">determined_language</span><span class="p">:</span>
		<span class="k">return</span> <span class="p">{</span>
			<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
			<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span> <span class="ow">or</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span>
			<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
			<span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Failed to parse file&quot;</span><span class="p">,</span>
		<span class="p">}</span>

	<span class="c1"># Get handler for the language</span>
	<span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_syntax_handler</span><span class="p">(</span><span class="n">determined_language</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">handler</span><span class="p">:</span>
		<span class="k">return</span> <span class="p">{</span>
			<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
			<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span><span class="p">,</span>
			<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
			<span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;No handler for language </span><span class="si">{</span><span class="n">determined_language</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
		<span class="p">}</span>

	<span class="c1"># Analyze the root node</span>
	<span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
	<span class="n">entity_type</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_entity_type</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
		<span class="n">entity_type</span> <span class="o">=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span>  <span class="c1"># Default to MODULE type</span>

	<span class="c1"># Extract module-level docstring</span>
	<span class="n">module_description</span><span class="p">,</span> <span class="n">module_docstring_node</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">find_docstring</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

	<span class="c1"># Create result</span>
	<span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
		<span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">determined_language</span><span class="p">,</span>
		<span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
		<span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
		<span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="o">.</span><span class="n">stem</span><span class="p">,</span>
		<span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
			<span class="s2">&quot;start_line&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
			<span class="s2">&quot;end_line&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
			<span class="s2">&quot;start_col&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">start_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
			<span class="s2">&quot;end_col&quot;</span><span class="p">:</span> <span class="n">root_node</span><span class="o">.</span><span class="n">end_point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
		<span class="p">},</span>
		<span class="s2">&quot;docstring&quot;</span><span class="p">:</span> <span class="n">module_description</span><span class="p">,</span>
		<span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[],</span>
	<span class="p">}</span>

	<span class="c1"># Process children of the root node</span>
	<span class="n">children_to_process</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_children_to_process</span><span class="p">(</span><span class="n">root_node</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children_to_process</span><span class="p">:</span>
		<span class="c1"># Skip the module docstring node if found</span>
		<span class="k">if</span> <span class="n">module_docstring_node</span> <span class="ow">and</span> <span class="n">child</span> <span class="o">==</span> <span class="n">module_docstring_node</span><span class="p">:</span>
			<span class="k">continue</span>

		<span class="n">child_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_node</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">determined_language</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">child_result</span><span class="p">:</span>  <span class="c1"># Only add non-empty results</span>
			<span class="n">result</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child_result</span><span class="p">)</span>

	<span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="codemap.processor.tree_sitter.languages" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">languages</span>


</h4>

    <div class="doc doc-contents ">

        <p>Language-specific configurations and handlers for tree-sitter analysis.</p>
<p>This module contains language-specific configurations and handlers that
define how to analyze different programming languages using tree-sitter.</p>









  <div class="doc doc-children">











<div class="doc doc-object doc-class">



<h5 id="codemap.processor.tree_sitter.languages.LanguageConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LanguageConfig</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


    <div class="doc doc-contents ">


        <p>Configuration for language-specific syntax chunking.</p>
<p>This class defines how a specific programming language's syntax
elements map to different types of code chunks. Each field is a list of
syntax node types that represent that kind of entity in the language's
AST.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">LanguageConfig</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Configuration for language-specific syntax chunking.</span>

<span class="sd">	This class defines how a specific programming language&#39;s syntax</span>
<span class="sd">	elements map to different types of code chunks. Each field is a list of</span>
<span class="sd">	syntax node types that represent that kind of entity in the language&#39;s</span>
<span class="sd">	AST.</span>

<span class="sd">	&quot;&quot;&quot;</span>

	<span class="c1"># File-level entities</span>
	<span class="n">module</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types that represent entire modules/files.&quot;&quot;&quot;</span>

	<span class="n">namespace</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for namespace/package declarations.&quot;&quot;&quot;</span>

	<span class="c1"># Type definitions</span>
	<span class="n">class_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for class definitions.&quot;&quot;&quot;</span>

	<span class="n">interface</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for interface definitions.&quot;&quot;&quot;</span>

	<span class="n">protocol</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for protocol/trait definitions.&quot;&quot;&quot;</span>

	<span class="n">struct</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for struct definitions.&quot;&quot;&quot;</span>

	<span class="n">enum</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for enum declarations.&quot;&quot;&quot;</span>

	<span class="n">type_alias</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for type aliases/typedefs.&quot;&quot;&quot;</span>

	<span class="c1"># Functions and methods</span>
	<span class="n">function</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for function declarations.&quot;&quot;&quot;</span>

	<span class="n">method</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for method declarations.&quot;&quot;&quot;</span>

	<span class="n">property_def</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for property/getter/setter declarations.&quot;&quot;&quot;</span>

	<span class="n">test_case</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types that identify test functions.&quot;&quot;&quot;</span>

	<span class="n">test_suite</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types that identify test classes/suites.&quot;&quot;&quot;</span>

	<span class="c1"># Variables and constants</span>
	<span class="n">variable</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for variable declarations.&quot;&quot;&quot;</span>

	<span class="n">constant</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for constant declarations.&quot;&quot;&quot;</span>

	<span class="n">class_field</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for class field declarations.&quot;&quot;&quot;</span>

	<span class="c1"># Code organization</span>
	<span class="n">import_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for import statements.&quot;&quot;&quot;</span>

	<span class="n">decorator</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for decorators/annotations.&quot;&quot;&quot;</span>

	<span class="c1"># Documentation</span>
	<span class="n">comment</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for general comments.&quot;&quot;&quot;</span>

	<span class="n">docstring</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for documentation strings.&quot;&quot;&quot;</span>

	<span class="c1"># Language-specific metadata</span>
	<span class="n">file_extensions</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;File extensions associated with this language (e.g., [&#39;.py&#39;, &#39;.pyi&#39;]).&quot;&quot;&quot;</span>

	<span class="n">tree_sitter_name</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Tree-sitter language identifier.&quot;&quot;&quot;</span>

	<span class="c1"># Optional node types that might be language-specific</span>
	<span class="n">decorators</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="n">class_fields</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="nd">@property</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">all_node_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get all node types defined in this configuration.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A set of all node types from all categories.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">all_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="p">[</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">namespace</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">class_</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">struct</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">enum</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">type_alias</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">property_def</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">test_case</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">test_suite</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">constant</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">class_field</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">import_</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">decorator</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">docstring</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">decorators</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">class_fields</span><span class="p">,</span>
		<span class="p">]:</span>
			<span class="k">if</span> <span class="n">attr</span><span class="p">:</span>  <span class="c1"># Skip None values</span>
				<span class="n">all_types</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">all_types</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.module" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">module</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types that represent entire modules/files.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.namespace" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">namespace</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">namespace</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for namespace/package declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.class_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for class definitions.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.interface" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">interface</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interface</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for interface definitions.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.protocol" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">protocol</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">protocol</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for protocol/trait definitions.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.struct" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">struct</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">struct</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for struct definitions.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.enum" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">enum</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">enum</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for enum declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.type_alias" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">type_alias</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">type_alias</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for type aliases/typedefs.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.function" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">function</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">function</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for function declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.method" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">method</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">method</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for method declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.property_def" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">property_def</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">property_def</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for property/getter/setter declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.test_case" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">test_case</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">test_case</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types that identify test functions.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.test_suite" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">test_suite</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">test_suite</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types that identify test classes/suites.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.variable" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">variable</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">variable</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for variable declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.constant" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">constant</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">constant</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for constant declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.class_field" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_field</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_field</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for class field declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.import_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">import_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">import_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for import statements.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.decorator" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">decorator</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">decorator</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for decorators/annotations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.comment" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">comment</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">comment</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for general comments.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for documentation strings.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.file_extensions" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">file_extensions</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_extensions</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>File extensions associated with this language (e.g., ['.py', '.pyi']).</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.tree_sitter_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">tree_sitter_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">tree_sitter_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Tree-sitter language identifier.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.decorators" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">decorators</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">decorators</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.class_fields" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_fields</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_fields</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.all_node_types" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">all_node_types</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">all_node_types</span><span class="p">:</span> <span class="n"><span title="set">set</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get all node types defined in this configuration.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="set">set</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A set of all node types from all categories.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageConfig.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">


    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h5 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LanguageSyntaxHandler</span>


</h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Abstract base class for language-specific syntax handling.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LanguageSyntaxHandler</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Abstract base class for language-specific syntax handling.&quot;&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">LanguageConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize with language configuration.</span>

<span class="sd">		Args:</span>
<span class="sd">		    config: Language-specific configuration</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">get_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityType</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Determine the EntityType for a given node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    parent: The parent node (if any)</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The entity type</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">find_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Find the docstring associated with a definition node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A tuple containing:</span>
<span class="sd">		    - The extracted docstring text (or None).</span>
<span class="sd">		    - The specific AST node representing the docstring that should be skipped</span>
<span class="sd">		      during child processing (or None).</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">extract_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract the name identifier from a definition node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The extracted name</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">get_body_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the main body node for a function, method, or class.</span>

<span class="sd">		This should be overridden by subclasses to find the appropriate block node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The node representing the function, method, or class.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The body node, or None if not applicable/found.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Default implementation: returns None or the node itself as a naive fallback</span>
		<span class="c1"># Subclasses should find specific body nodes like &#39;block&#39;, &#39;statement_block&#39; etc.</span>
		<span class="k">return</span> <span class="n">node</span>  <span class="c1"># Naive fallback - subclasses MUST override</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">get_children_to_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the list of child nodes that should be recursively processed.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    body_node: The body node if available</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of child nodes to process</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">should_skip_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Determine if a node should be skipped entirely during processing.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>

<span class="sd">		Returns:</span>
<span class="sd">		    True if the node should be skipped</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">extract_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract imported dependency names from an import node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node (should be an import type)</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of imported names</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">extract_calls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract names of functions/methods called within a node&#39;s scope.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node (e.g., function/method body)</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of called function/method names</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract the signature (definition line without body) for a function, class, etc.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The node to extract the signature from.</span>
<span class="sd">		    content_bytes: Source code content as bytes.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The signature string, or None if not applicable.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Default implementation: return the first line of the node&#39;s text</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">first_line</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
			<span class="k">return</span> <span class="n">first_line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">):</span>
			<span class="c1"># Catch specific errors related to slicing and decoding</span>
			<span class="k">return</span> <span class="kc">None</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Find the first ancestor node that matches the target entity type.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The starting node.</span>
<span class="sd">		    target_type: The EntityType to search for in ancestors.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The ancestor node if found, otherwise None.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">current</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">while</span> <span class="n">current</span><span class="p">:</span>
			<span class="c1"># We need content_bytes to determine the type accurately, but we don&#39;t have it here.</span>
			<span class="c1"># This highlights a limitation of doing this purely structurally without context.</span>
			<span class="c1"># Subclasses might need a different approach or access to the analyzer/content.</span>
			<span class="c1"># For a basic structural check:</span>
			<span class="c1"># entity_type = self.get_entity_type(current, current.parent, ???) # Need content_bytes</span>
			<span class="c1"># if entity_type == target_type:</span>
			<span class="c1">#    return current</span>

			<span class="c1"># Simplistic check based on node type name (less reliable)</span>
			<span class="k">if</span> <span class="n">target_type</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>  <span class="c1"># Very rough check</span>
				<span class="k">return</span> <span class="n">current</span>
			<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="nf">config</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize with language configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Language-specific configuration</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">LanguageConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Initialize with language configuration.</span>

<span class="sd">	Args:</span>
<span class="sd">	    config: Language-specific configuration</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.config" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler(config)">config</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.get_entity_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_entity_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_entity_type</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determine the EntityType for a given node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent node (if any)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The entity type</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityType</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Determine the EntityType for a given node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    parent: The parent node (if any)</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The entity type</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.find_docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">find_docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">find_docstring</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Find the docstring associated with a definition node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple containing:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>The extracted docstring text (or None).</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="str">str</span> | None, <span title="tree_sitter.Node">Node</span> | None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>The specific AST node representing the docstring that should be skipped
during child processing (or None).</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">find_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Find the docstring associated with a definition node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A tuple containing:</span>
<span class="sd">	    - The extracted docstring text (or None).</span>
<span class="sd">	    - The specific AST node representing the docstring that should be skipped</span>
<span class="sd">	      during child processing (or None).</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.extract_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract the name identifier from a definition node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The extracted name</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract the name identifier from a definition node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The extracted name</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.get_body_node" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_body_node</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the main body node for a function, method, or class.</p>
<p>This should be overridden by subclasses to find the appropriate block node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The node representing the function, method, or class.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The body node, or None if not applicable/found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_body_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the main body node for a function, method, or class.</span>

<span class="sd">	This should be overridden by subclasses to find the appropriate block node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The node representing the function, method, or class.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The body node, or None if not applicable/found.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Default implementation: returns None or the node itself as a naive fallback</span>
	<span class="c1"># Subclasses should find specific body nodes like &#39;block&#39;, &#39;statement_block&#39; etc.</span>
	<span class="k">return</span> <span class="n">node</span>  <span class="c1"># Naive fallback - subclasses MUST override</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.get_children_to_process" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_children_to_process</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_children_to_process</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the list of child nodes that should be recursively processed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>body_node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The body node if available</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tree_sitter.Node">Node</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of child nodes to process</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_children_to_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the list of child nodes that should be recursively processed.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    body_node: The body node if available</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of child nodes to process</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.should_skip_node" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">should_skip_node</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">should_skip_node</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="bool">bool</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determine if a node should be skipped entirely during processing.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the node should be skipped</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">should_skip_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Determine if a node should be skipped entirely during processing.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>

<span class="sd">	Returns:</span>
<span class="sd">	    True if the node should be skipped</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.extract_imports" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_imports</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_imports</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract imported dependency names from an import node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node (should be an import type)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of imported names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract imported dependency names from an import node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node (should be an import type)</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of imported names</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.extract_calls" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_calls</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_calls</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract names of functions/methods called within a node's scope.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node (e.g., function/method body)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of called function/method names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_calls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract names of functions/methods called within a node&#39;s scope.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node (e.g., function/method body)</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of called function/method names</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.extract_signature" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_signature</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_signature</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract the signature (definition line without body) for a function, class, etc.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The node to extract the signature from.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The signature string, or None if not applicable.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract the signature (definition line without body) for a function, class, etc.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The node to extract the signature from.</span>
<span class="sd">	    content_bytes: Source code content as bytes.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The signature string, or None if not applicable.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Default implementation: return the first line of the node&#39;s text</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">first_line</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
		<span class="k">return</span> <span class="n">first_line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
	<span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">):</span>
		<span class="c1"># Catch specific errors related to slicing and decoding</span>
		<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h6 id="codemap.processor.tree_sitter.languages.LanguageSyntaxHandler.get_enclosing_node_of_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_enclosing_node_of_type</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Find the first ancestor node that matches the target entity type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The starting node.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The EntityType to search for in ancestors.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ancestor node if found, otherwise None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Find the first ancestor node that matches the target entity type.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The starting node.</span>
<span class="sd">	    target_type: The EntityType to search for in ancestors.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The ancestor node if found, otherwise None.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">current</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>
	<span class="k">while</span> <span class="n">current</span><span class="p">:</span>
		<span class="c1"># We need content_bytes to determine the type accurately, but we don&#39;t have it here.</span>
		<span class="c1"># This highlights a limitation of doing this purely structurally without context.</span>
		<span class="c1"># Subclasses might need a different approach or access to the analyzer/content.</span>
		<span class="c1"># For a basic structural check:</span>
		<span class="c1"># entity_type = self.get_entity_type(current, current.parent, ???) # Need content_bytes</span>
		<span class="c1"># if entity_type == target_type:</span>
		<span class="c1">#    return current</span>

		<span class="c1"># Simplistic check based on node type name (less reliable)</span>
		<span class="k">if</span> <span class="n">target_type</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>  <span class="c1"># Very rough check</span>
			<span class="k">return</span> <span class="n">current</span>
		<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
	<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>


































<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.languages.LANGUAGE_CONFIGS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">LANGUAGE_CONFIGS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">LANGUAGE_CONFIGS</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s2">&quot;python&quot;</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-attribute-name&quot;&gt;PYTHON_CONFIG&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.python.PYTHON_CONFIG&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.python.PYTHON_CONFIG">PYTHON_CONFIG</a></span><span class="p">,</span>
	<span class="s2">&quot;javascript&quot;</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-attribute-name&quot;&gt;JAVASCRIPT_CONFIG&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG">JAVASCRIPT_CONFIG</a></span><span class="p">,</span>
	<span class="s2">&quot;typescript&quot;</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-attribute-name&quot;&gt;TYPESCRIPT_CONFIG&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.typescript.TYPESCRIPT_CONFIG&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.typescript.TYPESCRIPT_CONFIG">TYPESCRIPT_CONFIG</a></span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="codemap.processor.tree_sitter.languages.LANGUAGE_HANDLERS" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">LANGUAGE_HANDLERS</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">LANGUAGE_HANDLERS</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s2">&quot;python&quot;</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PythonSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler">PythonSyntaxHandler</a></span><span class="p">,</span>
	<span class="s2">&quot;javascript&quot;</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;JavaScriptSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler">JavaScriptSyntaxHandler</a></span><span class="p">,</span>
	<span class="s2">&quot;typescript&quot;</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TypeScriptSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.typescript.TypeScriptSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.typescript.TypeScriptSyntaxHandler">TypeScriptSyntaxHandler</a></span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="codemap.processor.tree_sitter.languages.python" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">python</span>


</h5>

    <div class="doc doc-contents ">

        <p>Python-specific configuration for syntax chunking.</p>









  <div class="doc doc-children">







































<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.python.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.python.PythonConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">PythonConfig</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></code></p>


        <p>Python-specific syntax chunking configuration.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PythonConfig</span><span class="p">(</span><span class="n">LanguageConfig</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Python-specific syntax chunking configuration.&quot;&quot;&quot;</span>

	<span class="c1"># File-level entities</span>
	<span class="n">module</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;module&quot;</span><span class="p">]</span>
	<span class="n">namespace</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Python doesn&#39;t have explicit namespaces</span>

	<span class="c1"># Type definitions</span>
	<span class="n">class_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_definition&quot;</span><span class="p">]</span>
	<span class="n">interface</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_definition&quot;</span><span class="p">]</span>  <span class="c1"># Python uses ABC classes</span>
	<span class="n">protocol</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_definition&quot;</span><span class="p">]</span>  <span class="c1"># Protocol classes</span>
	<span class="n">struct</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_definition&quot;</span><span class="p">]</span>  <span class="c1"># Python uses regular classes</span>
	<span class="n">enum</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_definition&quot;</span><span class="p">]</span>  <span class="c1"># Enum classes</span>
	<span class="n">type_alias</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;assignment&quot;</span><span class="p">]</span>  <span class="c1"># Type assignments</span>

	<span class="c1"># Functions and methods</span>
	<span class="n">function</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_definition&quot;</span><span class="p">]</span>
	<span class="n">method</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_definition&quot;</span><span class="p">]</span>  <span class="c1"># Inside class</span>
	<span class="n">property_def</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;decorated_definition&quot;</span><span class="p">]</span>  <span class="c1"># @property decorated functions</span>
	<span class="n">test_case</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_definition&quot;</span><span class="p">]</span>  <span class="c1"># test_* functions</span>
	<span class="n">test_suite</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_definition&quot;</span><span class="p">]</span>  <span class="c1"># Test* classes</span>

	<span class="c1"># Variables and constants</span>
	<span class="n">variable</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;assignment&quot;</span><span class="p">]</span>
	<span class="n">constant</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;assignment&quot;</span><span class="p">]</span>  <span class="c1"># Uppercase assignments</span>
	<span class="n">class_field</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_variable_definition&quot;</span><span class="p">]</span>

	<span class="c1"># Code organization</span>
	<span class="n">import_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;import_statement&quot;</span><span class="p">,</span> <span class="s2">&quot;import_from_statement&quot;</span><span class="p">]</span>
	<span class="n">decorator</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;decorator&quot;</span><span class="p">]</span>

	<span class="c1"># Documentation</span>
	<span class="n">comment</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>
	<span class="n">docstring</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">]</span>  <span class="c1"># First string in module/class/function</span>

	<span class="n">file_extensions</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.py&quot;</span><span class="p">,</span> <span class="s2">&quot;.pyi&quot;</span><span class="p">]</span>
	<span class="n">tree_sitter_name</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;python&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.module" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">module</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;module&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.namespace" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">namespace</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">namespace</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.class_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.interface" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">interface</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interface</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.protocol" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">protocol</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">protocol</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.struct" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">struct</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">struct</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.enum" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">enum</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">enum</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.type_alias" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">type_alias</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">type_alias</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;assignment&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.function" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">function</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">function</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;function_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.method" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">method</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">method</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;function_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.property_def" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">property_def</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">property_def</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;decorated_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.test_case" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">test_case</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">test_case</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;function_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.test_suite" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">test_suite</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">test_suite</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.variable" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">variable</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">variable</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;assignment&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.constant" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">constant</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">constant</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;assignment&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.class_field" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_field</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_field</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_variable_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.import_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">import_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">import_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="s2">&quot;import_statement&quot;</span><span class="p">,</span>
	<span class="s2">&quot;import_from_statement&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.decorator" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">decorator</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">decorator</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;decorator&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.comment" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">comment</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">comment</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.file_extensions" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">file_extensions</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_extensions</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.py&#39;</span><span class="p">,</span> <span class="s1">&#39;.pyi&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.python.PythonConfig.tree_sitter_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">tree_sitter_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">tree_sitter_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;python&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.python.PYTHON_CONFIG" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">PYTHON_CONFIG</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">PYTHON_CONFIG</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;PythonConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.python.PythonConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.python.PythonConfig">PythonConfig</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">PythonSyntaxHandler</span>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler">LanguageSyntaxHandler</a></code></p>


        <p>Python-specific syntax handling logic.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PythonSyntaxHandler</span><span class="p">(</span><span class="n">LanguageSyntaxHandler</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Python-specific syntax handling logic.&quot;&quot;&quot;</span>

	<span class="nd">@staticmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">_get_node_text</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Helper to get node text safely.&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
			<span class="k">return</span> <span class="s2">&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Initialize with Python configuration.&quot;&quot;&quot;</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">PYTHON_CONFIG</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityType</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Determine the EntityType for a Python node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    parent: The parent node (if any)</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The entity type</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">node_type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
			<span class="s2">&quot;Getting entity type for Python node: type=</span><span class="si">%s</span><span class="s2">, parent_type=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">node_type</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">type</span> <span class="k">if</span> <span class="n">parent</span> <span class="k">else</span> <span class="kc">None</span>
		<span class="p">)</span>

		<span class="c1"># Print node content for debugging</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">node_content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Node content: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">node_content</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to decode node content: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

		<span class="c1"># Special case: if this is an expression statement containing a constant assignment</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;expression_statement&quot;</span><span class="p">:</span>
			<span class="c1"># Check if it contains an assignment that is a constant</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;assignment&quot;</span><span class="p">:</span>
					<span class="n">name_node</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
						<span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">name_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

						<span class="c1"># Get the right side for type detection</span>
						<span class="n">value_node</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
						<span class="n">value_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
						<span class="k">if</span> <span class="n">value_node</span><span class="p">:</span>
							<span class="k">try</span><span class="p">:</span>
								<span class="n">value_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">value_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
							<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
								<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to decode type value: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

						<span class="c1"># Check for type alias - TypeVar or anything referencing typing types like Dict, List, etc.</span>
						<span class="k">if</span> <span class="s2">&quot;TypeVar&quot;</span> <span class="ow">in</span> <span class="n">value_text</span> <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span>
							<span class="n">typing_type</span> <span class="ow">in</span> <span class="n">value_text</span>
							<span class="k">for</span> <span class="n">typing_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Dict&quot;</span><span class="p">,</span> <span class="s2">&quot;List&quot;</span><span class="p">,</span> <span class="s2">&quot;Tuple&quot;</span><span class="p">,</span> <span class="s2">&quot;Set&quot;</span><span class="p">,</span> <span class="s2">&quot;Union&quot;</span><span class="p">,</span> <span class="s2">&quot;Optional&quot;</span><span class="p">,</span> <span class="s2">&quot;Callable&quot;</span><span class="p">,</span> <span class="s2">&quot;Any&quot;</span><span class="p">]</span>
						<span class="p">):</span>
							<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Expression statement with TYPE_ALIAS: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
							<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TYPE_ALIAS</span>

						<span class="c1"># Check for constant (all uppercase with at least one letter)</span>
						<span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">name</span><span class="p">):</span>
							<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Expression statement with CONSTANT assignment: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
							<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span>
						<span class="c1"># Check for regular variable</span>
						<span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">name</span><span class="p">):</span>
							<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Expression statement with VARIABLE assignment: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
							<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span>

		<span class="c1"># Module-level</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">module</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">namespace</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">NAMESPACE</span>

		<span class="c1"># Documentation</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">docstring</span><span class="p">:</span>
			<span class="c1"># Check if this is a docstring (first string in a container)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_docstring</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
				<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">DOCSTRING</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span>  <span class="c1"># Regular string literals</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">comment</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">COMMENT</span>

		<span class="c1"># Type definitions</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">class_</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span>
			<span class="c1"># Would need to check for ABC inheritance to be precise</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">INTERFACE</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">protocol</span><span class="p">:</span>
			<span class="c1"># Would need to check for Protocol inheritance to be precise</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">PROTOCOL</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">type_alias</span><span class="p">:</span>
			<span class="c1"># For assignments, check if it&#39;s a constant (all uppercase) first</span>
			<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;assignment&quot;</span><span class="p">:</span>
				<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
					<span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">name_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Checking potential constant in type_alias: </span><span class="si">%s</span><span class="s2"> (is_upper: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">isupper</span><span class="p">())</span>
					<span class="c1"># Improved check for constants: name is uppercase and contains at least one letter</span>
					<span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">name</span><span class="p">):</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Identified as CONSTANT: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
						<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span>

			<span class="c1"># Otherwise, treat as a type alias</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TYPE_ALIAS</span>

		<span class="c1"># Functions and methods</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">function</span><span class="p">:</span>
			<span class="c1"># Check if this is a test function</span>
			<span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;test_&quot;</span><span class="p">):</span>
				<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TEST_CASE</span>

			<span class="c1"># Check if this is a method by looking for class ancestry</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_within_class_context</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
				<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span>

		<span class="c1"># Check for properties - decorated definitions</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">property_def</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;decorator&quot;</span><span class="p">:</span>
					<span class="n">decorator_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
					<span class="k">if</span> <span class="s2">&quot;@property&quot;</span> <span class="ow">in</span> <span class="n">decorator_text</span><span class="p">:</span>
						<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">PROPERTY</span>
			<span class="c1"># If no @property decorator, treat as method if in class, otherwise function</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_within_class_context</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
				<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span>

		<span class="c1"># Variables and constants</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">variable</span><span class="p">:</span>
			<span class="c1"># Check if it looks like a constant (uppercase name)</span>
			<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
				<span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">name_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Checking potential constant: </span><span class="si">%s</span><span class="s2"> (is_upper: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">isupper</span><span class="p">())</span>
				<span class="c1"># Improved check for constants: name is uppercase and contains at least one letter</span>
				<span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">name</span><span class="p">):</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Identified as CONSTANT: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
					<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Identified as VARIABLE: node_type=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">node_type</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span>

		<span class="c1"># Class fields</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">class_field</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS_FIELD</span>

		<span class="c1"># Code organization</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">import_</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">decorator</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">DECORATOR</span>

		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_is_within_class_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Check if the node is defined within a class definition.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>

<span class="sd">		Returns:</span>
<span class="sd">		    True if the node is within a class context</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">ancestor</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">while</span> <span class="n">ancestor</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">ancestor</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">class_</span><span class="p">:</span>
				<span class="k">return</span> <span class="kc">True</span>
			<span class="c1"># Stop search if we hit module or another function definition</span>
			<span class="k">if</span> <span class="n">ancestor</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">module</span> <span class="ow">or</span> <span class="n">ancestor</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">function</span><span class="p">:</span>
				<span class="k">break</span>
			<span class="n">ancestor</span> <span class="o">=</span> <span class="n">ancestor</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">return</span> <span class="kc">False</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_is_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Check if a string node is a docstring.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The string node</span>
<span class="sd">		    parent: The parent node</span>

<span class="sd">		Returns:</span>
<span class="sd">		    True if the node is a docstring</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">parent</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">False</span>

		<span class="c1"># For module docstrings, check if it&#39;s the first string in the module</span>
		<span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;module&quot;</span><span class="p">:</span>
			<span class="n">non_comment_children</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">parent</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]]</span>
			<span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">non_comment_children</span> <span class="ow">and</span> <span class="n">node</span> <span class="o">==</span> <span class="n">non_comment_children</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

		<span class="c1"># For expression statements containing string literals</span>
		<span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;expression_statement&quot;</span><span class="p">:</span>
			<span class="c1"># Check if this is the first child of a function or class body</span>
			<span class="n">grandparent</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">parent</span>
			<span class="k">if</span> <span class="n">grandparent</span> <span class="ow">and</span> <span class="n">grandparent</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;block&quot;</span><span class="p">:</span>
				<span class="n">great_grandparent</span> <span class="o">=</span> <span class="n">grandparent</span><span class="o">.</span><span class="n">parent</span>
				<span class="k">if</span> <span class="n">great_grandparent</span> <span class="ow">and</span> <span class="n">great_grandparent</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">function</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">class_</span><span class="p">):</span>
					<span class="c1"># Check if it&#39;s the first item in the block</span>
					<span class="n">non_comment_children</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">grandparent</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]]</span>
					<span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">non_comment_children</span> <span class="ow">and</span> <span class="n">parent</span> <span class="o">==</span> <span class="n">non_comment_children</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
			<span class="k">return</span> <span class="kc">False</span>

		<span class="k">return</span> <span class="kc">False</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">find_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Find the docstring associated with a definition node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A tuple containing:</span>
<span class="sd">		    - The extracted docstring text (or None).</span>
<span class="sd">		    - The specific AST node representing the docstring (or None).</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">body_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">body_node</span><span class="p">:</span>
			<span class="c1"># Handle module docstring case (no explicit body node)</span>
			<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;module&quot;</span><span class="p">:</span>
				<span class="n">body_node</span> <span class="o">=</span> <span class="n">node</span>  <span class="c1"># Treat module itself as the body context</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

		<span class="k">if</span> <span class="n">body_node</span><span class="o">.</span><span class="n">named_child_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

		<span class="c1"># Look for the first child that might be a docstring</span>
		<span class="n">first_body_child</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">body_node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">is_named</span><span class="p">:</span>
				<span class="n">first_body_child</span> <span class="o">=</span> <span class="n">child</span>
				<span class="k">break</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">first_body_child</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

		<span class="n">actual_string_node</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="n">docstring_container_node</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># The node to skip during processing</span>

		<span class="k">if</span> <span class="n">first_body_child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;expression_statement&quot;</span><span class="p">:</span>
			<span class="c1"># For expression statements containing string literals</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">first_body_child</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">docstring</span><span class="p">:</span>
					<span class="n">actual_string_node</span> <span class="o">=</span> <span class="n">child</span>
					<span class="n">docstring_container_node</span> <span class="o">=</span> <span class="n">first_body_child</span>
					<span class="k">break</span>
		<span class="k">elif</span> <span class="n">first_body_child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">docstring</span><span class="p">:</span>
			<span class="c1"># Direct string literal</span>
			<span class="n">actual_string_node</span> <span class="o">=</span> <span class="n">first_body_child</span>
			<span class="n">docstring_container_node</span> <span class="o">=</span> <span class="n">first_body_child</span>

		<span class="k">if</span> <span class="n">actual_string_node</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">docstring_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">actual_string_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&#39; </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
				<span class="k">return</span> <span class="n">docstring_text</span><span class="p">,</span> <span class="n">docstring_container_node</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode/extract Python docstring: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

		<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract the name identifier from a definition node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The extracted name</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Try to find the name field</span>
		<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

		<span class="c1"># Handle assignments</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">name_node</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;assignment&quot;</span><span class="p">:</span>
			<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>

		<span class="c1"># Handle expression statements with assignments</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">name_node</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;expression_statement&quot;</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;assignment&quot;</span><span class="p">:</span>
					<span class="n">name_node</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
						<span class="k">break</span>

		<span class="c1"># Handle decorated definitions</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">name_node</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
			<span class="n">func_def</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;definition&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">func_def</span><span class="p">:</span>
				<span class="n">name_node</span> <span class="o">=</span> <span class="n">func_def</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">name_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode Python name: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
				<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;decoding-error-</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

		<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;anonymous-</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_body_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Get the block node for function/class definition body.&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;function_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;class_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">):</span>
			<span class="c1"># Handle decorated definitions properly</span>
			<span class="n">actual_def_node</span> <span class="o">=</span> <span class="n">node</span>
			<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
				<span class="c1"># Find the actual function/class definition node within the decoration</span>
				<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;function_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;class_definition&quot;</span><span class="p">):</span>
						<span class="n">actual_def_node</span> <span class="o">=</span> <span class="n">child</span>
						<span class="k">break</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Could not find definition within decorator</span>

			<span class="c1"># Find the &#39;block&#39; node which contains the body statements</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">actual_def_node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;block&quot;</span><span class="p">:</span>
					<span class="k">return</span> <span class="n">child</span>
		<span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Not a function/class definition or no block found</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_children_to_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the list of child nodes that should be recursively processed.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    body_node: The body node if available</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of child nodes to process</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Process children of the body node if it exists, otherwise process direct children</span>
		<span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">body_node</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="k">if</span> <span class="n">body_node</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">should_skip_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Determine if a node should be skipped entirely during processing.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>

<span class="sd">		Returns:</span>
<span class="sd">		    True if the node should be skipped</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Skip non-named nodes (like punctuation, operators)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">is_named</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">True</span>

		<span class="c1"># Skip syntax nodes that don&#39;t contribute to code structure</span>
		<span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">]</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract imported module names from a Python import statement.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node representing an import statement</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of imported module names as strings</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">import_</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">[]</span>

		<span class="n">imported_names</span> <span class="o">=</span> <span class="p">[]</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># Handle regular import statements: &quot;import foo, bar&quot;</span>
			<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;import_statement&quot;</span><span class="p">:</span>
				<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;dotted_name&quot;</span><span class="p">:</span>
						<span class="n">module_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
						<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>

			<span class="c1"># Handle import from statements: &quot;from foo.bar import baz, qux&quot;</span>
			<span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;import_from_statement&quot;</span><span class="p">:</span>
				<span class="c1"># Get the module being imported from</span>
				<span class="n">module_node</span> <span class="o">=</span> <span class="kc">None</span>
				<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;dotted_name&quot;</span><span class="p">:</span>
						<span class="n">module_node</span> <span class="o">=</span> <span class="n">child</span>
						<span class="k">break</span>

				<span class="k">if</span> <span class="n">module_node</span><span class="p">:</span>
					<span class="n">module_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">module_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

					<span class="c1"># Get the imported names</span>
					<span class="n">import_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;import&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">import_node</span><span class="p">:</span>
						<span class="c1"># Check for the wildcard import case: &quot;from foo import *&quot;</span>
						<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">import_node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
							<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;wildcard_import&quot;</span><span class="p">:</span>
								<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">.*&quot;</span><span class="p">)</span>
								<span class="k">return</span> <span class="n">imported_names</span>

						<span class="c1"># Regular named imports</span>
						<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">import_node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
							<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;import_list&quot;</span><span class="p">:</span>
								<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">child</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
									<span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;dotted_name&quot;</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span><span class="p">}:</span>
										<span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
										<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode Python imports: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">imported_names</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_calls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract names of functions/methods called within a Python node&#39;s scope.</span>

<span class="sd">		Recursively searches for &#39;call&#39; nodes and extracts the function identifier.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node (e.g., function/method body)</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of called function/method names</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">calls</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;call&quot;</span><span class="p">:</span>
				<span class="n">function_node</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">function_node</span><span class="p">:</span>
					<span class="c1"># Extract the identifier (could be simple name or attribute access like obj.method)</span>
					<span class="c1"># For simplicity, we take the full text of the function node</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">call_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">function_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
						<span class="n">calls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">call_name</span><span class="p">)</span>
					<span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
						<span class="k">pass</span>  <span class="c1"># Ignore decoding errors</span>
			<span class="c1"># Recursively search within the arguments or children of the call if needed, but often not necessary</span>
			<span class="c1"># for call details, just the name.</span>
			<span class="c1"># Else, recursively search deeper within non-call children</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">calls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extract_calls</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">))</span>
		<span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">calls</span><span class="p">))</span>  <span class="c1"># Return unique calls</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Extract the signature up to the colon &#39;:&#39; for Python functions/classes.&quot;&quot;&quot;</span>
		<span class="n">signature_node</span> <span class="o">=</span> <span class="n">node</span>
		<span class="c1"># If it&#39;s a decorated definition, find the actual definition node for the signature start</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;function_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;class_definition&quot;</span><span class="p">):</span>
					<span class="n">signature_node</span> <span class="o">=</span> <span class="n">child</span>
					<span class="k">break</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Fallback to first line of decorator</span>

		<span class="c1"># Find the colon that ends the signature part</span>
		<span class="n">colon_node</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">signature_node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;:&quot;</span><span class="p">:</span>
				<span class="n">colon_node</span> <span class="o">=</span> <span class="n">child</span>
				<span class="k">break</span>
			<span class="c1"># Handle async functions where &#39;def&#39; is preceded by &#39;async&#39;</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;async&quot;</span><span class="p">:</span>
				<span class="k">continue</span>  <span class="c1"># skip &#39;async&#39; keyword itself</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;def&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">}:</span>
				<span class="k">continue</span>  <span class="c1"># skip &#39;def&#39;/&#39;class&#39; keywords</span>
			<span class="c1"># Stop if we hit the body block before finding a colon (shouldn&#39;t happen in valid code)</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;block&quot;</span><span class="p">:</span>
				<span class="k">break</span>

		<span class="k">if</span> <span class="n">colon_node</span><span class="p">:</span>
			<span class="c1"># Extract text from the start of the definition node up to the end of the colon</span>
			<span class="n">start_byte</span> <span class="o">=</span> <span class="n">signature_node</span><span class="o">.</span><span class="n">start_byte</span>
			<span class="n">end_byte</span> <span class="o">=</span> <span class="n">colon_node</span><span class="o">.</span><span class="n">end_byte</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">start_byte</span><span class="p">:</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
			<span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
				<span class="k">return</span> <span class="kc">None</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># Fallback: if no colon found (e.g., malformed code?), return the first line</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">signature_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Find the first ancestor node matching the target Python entity type.&quot;&quot;&quot;</span>
		<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">if</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">:</span>
			<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">]</span>  <span class="c1"># Include decorated</span>
		<span class="k">elif</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">:</span>
			<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">]</span>  <span class="c1"># Include decorated</span>
		<span class="k">elif</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">:</span>
			<span class="c1"># Module is typically the root node or identified by file, not easily findable as ancestor type</span>
			<span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Or return root node? Depends on desired behavior.</span>
		<span class="c1"># Add other types if needed</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">target_node_types</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span>

		<span class="n">current</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">while</span> <span class="n">current</span><span class="p">:</span>
			<span class="c1"># Check if the current node is the target type or a decorator containing it</span>
			<span class="n">node_to_check</span> <span class="o">=</span> <span class="n">current</span>
			<span class="n">actual_node_type</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span>

			<span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
				<span class="c1"># Check the *content* of the decorated definition</span>
				<span class="n">found_target_in_decorator</span> <span class="o">=</span> <span class="kc">False</span>
				<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">current</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">target_node_types</span> <span class="ow">and</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
						<span class="c1"># We found the actual class/func def inside the decorator</span>
						<span class="n">node_to_check</span> <span class="o">=</span> <span class="n">child</span>
						<span class="n">actual_node_type</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span>
						<span class="n">found_target_in_decorator</span> <span class="o">=</span> <span class="kc">True</span>
						<span class="k">break</span>
				<span class="k">if</span> <span class="ow">not</span> <span class="n">found_target_in_decorator</span><span class="p">:</span>
					<span class="n">actual_node_type</span> <span class="o">=</span> <span class="s2">&quot;decorated_definition&quot;</span>  <span class="c1"># Treat decorator itself if no target found within</span>

			<span class="c1"># Now check if the node (or the one found inside decorator) matches</span>
			<span class="k">if</span> <span class="n">actual_node_type</span> <span class="ow">in</span> <span class="n">target_node_types</span> <span class="ow">and</span> <span class="n">actual_node_type</span> <span class="o">!=</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">node_to_check</span>  <span class="c1"># Return the actual definition node</span>

			<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_find_decorated_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Helper to get the actual definition node from a decorated_definition.&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;function_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;class_definition&quot;</span><span class="p">):</span>
					<span class="k">return</span> <span class="n">child</span>
		<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize with Python configuration.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Initialize with Python configuration.&quot;&quot;&quot;</span>
	<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">PYTHON_CONFIG</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler.get_entity_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_entity_type</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_entity_type</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determine the EntityType for a Python node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent node (if any)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The entity type</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityType</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Determine the EntityType for a Python node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    parent: The parent node (if any)</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The entity type</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">node_type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
		<span class="s2">&quot;Getting entity type for Python node: type=</span><span class="si">%s</span><span class="s2">, parent_type=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">node_type</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">type</span> <span class="k">if</span> <span class="n">parent</span> <span class="k">else</span> <span class="kc">None</span>
	<span class="p">)</span>

	<span class="c1"># Print node content for debugging</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">node_content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Node content: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">node_content</span><span class="p">)</span>
	<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to decode node content: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

	<span class="c1"># Special case: if this is an expression statement containing a constant assignment</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;expression_statement&quot;</span><span class="p">:</span>
		<span class="c1"># Check if it contains an assignment that is a constant</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;assignment&quot;</span><span class="p">:</span>
				<span class="n">name_node</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
					<span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">name_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

					<span class="c1"># Get the right side for type detection</span>
					<span class="n">value_node</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
					<span class="n">value_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
					<span class="k">if</span> <span class="n">value_node</span><span class="p">:</span>
						<span class="k">try</span><span class="p">:</span>
							<span class="n">value_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">value_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
						<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
							<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Failed to decode type value: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

					<span class="c1"># Check for type alias - TypeVar or anything referencing typing types like Dict, List, etc.</span>
					<span class="k">if</span> <span class="s2">&quot;TypeVar&quot;</span> <span class="ow">in</span> <span class="n">value_text</span> <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span>
						<span class="n">typing_type</span> <span class="ow">in</span> <span class="n">value_text</span>
						<span class="k">for</span> <span class="n">typing_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Dict&quot;</span><span class="p">,</span> <span class="s2">&quot;List&quot;</span><span class="p">,</span> <span class="s2">&quot;Tuple&quot;</span><span class="p">,</span> <span class="s2">&quot;Set&quot;</span><span class="p">,</span> <span class="s2">&quot;Union&quot;</span><span class="p">,</span> <span class="s2">&quot;Optional&quot;</span><span class="p">,</span> <span class="s2">&quot;Callable&quot;</span><span class="p">,</span> <span class="s2">&quot;Any&quot;</span><span class="p">]</span>
					<span class="p">):</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Expression statement with TYPE_ALIAS: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
						<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TYPE_ALIAS</span>

					<span class="c1"># Check for constant (all uppercase with at least one letter)</span>
					<span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">name</span><span class="p">):</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Expression statement with CONSTANT assignment: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
						<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span>
					<span class="c1"># Check for regular variable</span>
					<span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">name</span><span class="p">):</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Expression statement with VARIABLE assignment: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
						<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span>

	<span class="c1"># Module-level</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">module</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">namespace</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">NAMESPACE</span>

	<span class="c1"># Documentation</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">docstring</span><span class="p">:</span>
		<span class="c1"># Check if this is a docstring (first string in a container)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_docstring</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">DOCSTRING</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span>  <span class="c1"># Regular string literals</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">comment</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">COMMENT</span>

	<span class="c1"># Type definitions</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">class_</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span>
		<span class="c1"># Would need to check for ABC inheritance to be precise</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">INTERFACE</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">protocol</span><span class="p">:</span>
		<span class="c1"># Would need to check for Protocol inheritance to be precise</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">PROTOCOL</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">type_alias</span><span class="p">:</span>
		<span class="c1"># For assignments, check if it&#39;s a constant (all uppercase) first</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;assignment&quot;</span><span class="p">:</span>
			<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
				<span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">name_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Checking potential constant in type_alias: </span><span class="si">%s</span><span class="s2"> (is_upper: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">isupper</span><span class="p">())</span>
				<span class="c1"># Improved check for constants: name is uppercase and contains at least one letter</span>
				<span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">name</span><span class="p">):</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Identified as CONSTANT: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
					<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span>

		<span class="c1"># Otherwise, treat as a type alias</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TYPE_ALIAS</span>

	<span class="c1"># Functions and methods</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">function</span><span class="p">:</span>
		<span class="c1"># Check if this is a test function</span>
		<span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;test_&quot;</span><span class="p">):</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TEST_CASE</span>

		<span class="c1"># Check if this is a method by looking for class ancestry</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_within_class_context</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span>

	<span class="c1"># Check for properties - decorated definitions</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">property_def</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;decorator&quot;</span><span class="p">:</span>
				<span class="n">decorator_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
				<span class="k">if</span> <span class="s2">&quot;@property&quot;</span> <span class="ow">in</span> <span class="n">decorator_text</span><span class="p">:</span>
					<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">PROPERTY</span>
		<span class="c1"># If no @property decorator, treat as method if in class, otherwise function</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_within_class_context</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span>

	<span class="c1"># Variables and constants</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">variable</span><span class="p">:</span>
		<span class="c1"># Check if it looks like a constant (uppercase name)</span>
		<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
			<span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">name_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Checking potential constant: </span><span class="si">%s</span><span class="s2"> (is_upper: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">isupper</span><span class="p">())</span>
			<span class="c1"># Improved check for constants: name is uppercase and contains at least one letter</span>
			<span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">name</span><span class="p">):</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Identified as CONSTANT: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
				<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Identified as VARIABLE: node_type=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">node_type</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span>

	<span class="c1"># Class fields</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">class_field</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS_FIELD</span>

	<span class="c1"># Code organization</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">import_</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">decorator</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">DECORATOR</span>

	<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler.find_docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">find_docstring</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">find_docstring</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Find the docstring associated with a definition node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple containing:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>The extracted docstring text (or None).</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="str">str</span> | None, <span title="tree_sitter.Node">Node</span> | None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>The specific AST node representing the docstring (or None).</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Find the docstring associated with a definition node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A tuple containing:</span>
<span class="sd">	    - The extracted docstring text (or None).</span>
<span class="sd">	    - The specific AST node representing the docstring (or None).</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">body_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">body_node</span><span class="p">:</span>
		<span class="c1"># Handle module docstring case (no explicit body node)</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;module&quot;</span><span class="p">:</span>
			<span class="n">body_node</span> <span class="o">=</span> <span class="n">node</span>  <span class="c1"># Treat module itself as the body context</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

	<span class="k">if</span> <span class="n">body_node</span><span class="o">.</span><span class="n">named_child_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
		<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

	<span class="c1"># Look for the first child that might be a docstring</span>
	<span class="n">first_body_child</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">body_node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">is_named</span><span class="p">:</span>
			<span class="n">first_body_child</span> <span class="o">=</span> <span class="n">child</span>
			<span class="k">break</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">first_body_child</span><span class="p">:</span>
		<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

	<span class="n">actual_string_node</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="n">docstring_container_node</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># The node to skip during processing</span>

	<span class="k">if</span> <span class="n">first_body_child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;expression_statement&quot;</span><span class="p">:</span>
		<span class="c1"># For expression statements containing string literals</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">first_body_child</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">docstring</span><span class="p">:</span>
				<span class="n">actual_string_node</span> <span class="o">=</span> <span class="n">child</span>
				<span class="n">docstring_container_node</span> <span class="o">=</span> <span class="n">first_body_child</span>
				<span class="k">break</span>
	<span class="k">elif</span> <span class="n">first_body_child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">docstring</span><span class="p">:</span>
		<span class="c1"># Direct string literal</span>
		<span class="n">actual_string_node</span> <span class="o">=</span> <span class="n">first_body_child</span>
		<span class="n">docstring_container_node</span> <span class="o">=</span> <span class="n">first_body_child</span>

	<span class="k">if</span> <span class="n">actual_string_node</span><span class="p">:</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">docstring_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">actual_string_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&#39; </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">docstring_text</span><span class="p">,</span> <span class="n">docstring_container_node</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode/extract Python docstring: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

	<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler.extract_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_name</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract the name identifier from a definition node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The extracted name</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract the name identifier from a definition node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The extracted name</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Try to find the name field</span>
	<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

	<span class="c1"># Handle assignments</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">name_node</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;assignment&quot;</span><span class="p">:</span>
		<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>

	<span class="c1"># Handle expression statements with assignments</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">name_node</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;expression_statement&quot;</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;assignment&quot;</span><span class="p">:</span>
				<span class="n">name_node</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
					<span class="k">break</span>

	<span class="c1"># Handle decorated definitions</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">name_node</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
		<span class="n">func_def</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;definition&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">func_def</span><span class="p">:</span>
			<span class="n">name_node</span> <span class="o">=</span> <span class="n">func_def</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">name_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode Python name: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
			<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;decoding-error-</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

	<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;anonymous-</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler.get_body_node" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_body_node</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the block node for function/class definition body.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_body_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Get the block node for function/class definition body.&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;function_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;class_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">):</span>
		<span class="c1"># Handle decorated definitions properly</span>
		<span class="n">actual_def_node</span> <span class="o">=</span> <span class="n">node</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
			<span class="c1"># Find the actual function/class definition node within the decoration</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;function_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;class_definition&quot;</span><span class="p">):</span>
					<span class="n">actual_def_node</span> <span class="o">=</span> <span class="n">child</span>
					<span class="k">break</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Could not find definition within decorator</span>

		<span class="c1"># Find the &#39;block&#39; node which contains the body statements</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">actual_def_node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;block&quot;</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">child</span>
	<span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Not a function/class definition or no block found</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler.get_children_to_process" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_children_to_process</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_children_to_process</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the list of child nodes that should be recursively processed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>body_node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The body node if available</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tree_sitter.Node">Node</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of child nodes to process</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_children_to_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the list of child nodes that should be recursively processed.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    body_node: The body node if available</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of child nodes to process</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Process children of the body node if it exists, otherwise process direct children</span>
	<span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">body_node</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="k">if</span> <span class="n">body_node</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler.should_skip_node" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">should_skip_node</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">should_skip_node</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="bool">bool</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determine if a node should be skipped entirely during processing.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the node should be skipped</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">should_skip_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Determine if a node should be skipped entirely during processing.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>

<span class="sd">	Returns:</span>
<span class="sd">	    True if the node should be skipped</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Skip non-named nodes (like punctuation, operators)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">is_named</span><span class="p">:</span>
		<span class="k">return</span> <span class="kc">True</span>

	<span class="c1"># Skip syntax nodes that don&#39;t contribute to code structure</span>
	<span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler.extract_imports" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_imports</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_imports</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract imported module names from a Python import statement.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node representing an import statement</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of imported module names as strings</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract imported module names from a Python import statement.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node representing an import statement</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of imported module names as strings</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">import_</span><span class="p">:</span>
		<span class="k">return</span> <span class="p">[]</span>

	<span class="n">imported_names</span> <span class="o">=</span> <span class="p">[]</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="c1"># Handle regular import statements: &quot;import foo, bar&quot;</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;import_statement&quot;</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;dotted_name&quot;</span><span class="p">:</span>
					<span class="n">module_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
					<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>

		<span class="c1"># Handle import from statements: &quot;from foo.bar import baz, qux&quot;</span>
		<span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;import_from_statement&quot;</span><span class="p">:</span>
			<span class="c1"># Get the module being imported from</span>
			<span class="n">module_node</span> <span class="o">=</span> <span class="kc">None</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;dotted_name&quot;</span><span class="p">:</span>
					<span class="n">module_node</span> <span class="o">=</span> <span class="n">child</span>
					<span class="k">break</span>

			<span class="k">if</span> <span class="n">module_node</span><span class="p">:</span>
				<span class="n">module_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">module_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

				<span class="c1"># Get the imported names</span>
				<span class="n">import_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;import&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">import_node</span><span class="p">:</span>
					<span class="c1"># Check for the wildcard import case: &quot;from foo import *&quot;</span>
					<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">import_node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
						<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;wildcard_import&quot;</span><span class="p">:</span>
							<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">.*&quot;</span><span class="p">)</span>
							<span class="k">return</span> <span class="n">imported_names</span>

					<span class="c1"># Regular named imports</span>
					<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">import_node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
						<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;import_list&quot;</span><span class="p">:</span>
							<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">child</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
								<span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;dotted_name&quot;</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span><span class="p">}:</span>
									<span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
									<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode Python imports: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

	<span class="k">return</span> <span class="n">imported_names</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler.extract_calls" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_calls</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_calls</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract names of functions/methods called within a Python node's scope.</p>
<p>Recursively searches for 'call' nodes and extracts the function identifier.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node (e.g., function/method body)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of called function/method names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_calls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract names of functions/methods called within a Python node&#39;s scope.</span>

<span class="sd">	Recursively searches for &#39;call&#39; nodes and extracts the function identifier.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node (e.g., function/method body)</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of called function/method names</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">calls</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;call&quot;</span><span class="p">:</span>
			<span class="n">function_node</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">function_node</span><span class="p">:</span>
				<span class="c1"># Extract the identifier (could be simple name or attribute access like obj.method)</span>
				<span class="c1"># For simplicity, we take the full text of the function node</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">call_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">function_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
					<span class="n">calls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">call_name</span><span class="p">)</span>
				<span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
					<span class="k">pass</span>  <span class="c1"># Ignore decoding errors</span>
		<span class="c1"># Recursively search within the arguments or children of the call if needed, but often not necessary</span>
		<span class="c1"># for call details, just the name.</span>
		<span class="c1"># Else, recursively search deeper within non-call children</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">calls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extract_calls</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">))</span>
	<span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">calls</span><span class="p">))</span>  <span class="c1"># Return unique calls</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler.extract_signature" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_signature</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_signature</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract the signature up to the colon ':' for Python functions/classes.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Extract the signature up to the colon &#39;:&#39; for Python functions/classes.&quot;&quot;&quot;</span>
	<span class="n">signature_node</span> <span class="o">=</span> <span class="n">node</span>
	<span class="c1"># If it&#39;s a decorated definition, find the actual definition node for the signature start</span>
	<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;function_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;class_definition&quot;</span><span class="p">):</span>
				<span class="n">signature_node</span> <span class="o">=</span> <span class="n">child</span>
				<span class="k">break</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Fallback to first line of decorator</span>

	<span class="c1"># Find the colon that ends the signature part</span>
	<span class="n">colon_node</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">signature_node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;:&quot;</span><span class="p">:</span>
			<span class="n">colon_node</span> <span class="o">=</span> <span class="n">child</span>
			<span class="k">break</span>
		<span class="c1"># Handle async functions where &#39;def&#39; is preceded by &#39;async&#39;</span>
		<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;async&quot;</span><span class="p">:</span>
			<span class="k">continue</span>  <span class="c1"># skip &#39;async&#39; keyword itself</span>
		<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;def&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">}:</span>
			<span class="k">continue</span>  <span class="c1"># skip &#39;def&#39;/&#39;class&#39; keywords</span>
		<span class="c1"># Stop if we hit the body block before finding a colon (shouldn&#39;t happen in valid code)</span>
		<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;block&quot;</span><span class="p">:</span>
			<span class="k">break</span>

	<span class="k">if</span> <span class="n">colon_node</span><span class="p">:</span>
		<span class="c1"># Extract text from the start of the definition node up to the end of the colon</span>
		<span class="n">start_byte</span> <span class="o">=</span> <span class="n">signature_node</span><span class="o">.</span><span class="n">start_byte</span>
		<span class="n">end_byte</span> <span class="o">=</span> <span class="n">colon_node</span><span class="o">.</span><span class="n">end_byte</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">start_byte</span><span class="p">:</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
		<span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="c1"># Fallback: if no colon found (e.g., malformed code?), return the first line</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">signature_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.python.PythonSyntaxHandler.get_enclosing_node_of_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_enclosing_node_of_type</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Find the first ancestor node matching the target Python entity type.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/python.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Find the first ancestor node matching the target Python entity type.&quot;&quot;&quot;</span>
	<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">if</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">:</span>
		<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">]</span>  <span class="c1"># Include decorated</span>
	<span class="k">elif</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">:</span>
		<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">]</span>  <span class="c1"># Include decorated</span>
	<span class="k">elif</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">:</span>
		<span class="c1"># Module is typically the root node or identified by file, not easily findable as ancestor type</span>
		<span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Or return root node? Depends on desired behavior.</span>
	<span class="c1"># Add other types if needed</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">target_node_types</span><span class="p">:</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="n">current</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>
	<span class="k">while</span> <span class="n">current</span><span class="p">:</span>
		<span class="c1"># Check if the current node is the target type or a decorator containing it</span>
		<span class="n">node_to_check</span> <span class="o">=</span> <span class="n">current</span>
		<span class="n">actual_node_type</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span>

		<span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
			<span class="c1"># Check the *content* of the decorated definition</span>
			<span class="n">found_target_in_decorator</span> <span class="o">=</span> <span class="kc">False</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">current</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">target_node_types</span> <span class="ow">and</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
					<span class="c1"># We found the actual class/func def inside the decorator</span>
					<span class="n">node_to_check</span> <span class="o">=</span> <span class="n">child</span>
					<span class="n">actual_node_type</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span>
					<span class="n">found_target_in_decorator</span> <span class="o">=</span> <span class="kc">True</span>
					<span class="k">break</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">found_target_in_decorator</span><span class="p">:</span>
				<span class="n">actual_node_type</span> <span class="o">=</span> <span class="s2">&quot;decorated_definition&quot;</span>  <span class="c1"># Treat decorator itself if no target found within</span>

		<span class="c1"># Now check if the node (or the one found inside decorator) matches</span>
		<span class="k">if</span> <span class="n">actual_node_type</span> <span class="ow">in</span> <span class="n">target_node_types</span> <span class="ow">and</span> <span class="n">actual_node_type</span> <span class="o">!=</span> <span class="s2">&quot;decorated_definition&quot;</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">node_to_check</span>  <span class="c1"># Return the actual definition node</span>

		<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
	<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="codemap.processor.tree_sitter.languages.typescript" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">typescript</span>


</h5>

    <div class="doc doc-contents ">

        <p>TypeScript-specific configuration for syntax chunking.</p>









  <div class="doc doc-children">











































<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.typescript.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TypeScriptConfig</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></code></p>


        <p>TypeScript-specific syntax chunking configuration.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/typescript.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TypeScriptConfig</span><span class="p">(</span><span class="n">LanguageConfig</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;TypeScript-specific syntax chunking configuration.&quot;&quot;&quot;</span>

	<span class="c1"># File-level entities</span>
	<span class="n">module</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;program&quot;</span><span class="p">]</span>
	<span class="n">namespace</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;export_statement&quot;</span><span class="p">,</span> <span class="s2">&quot;namespace_declaration&quot;</span><span class="p">]</span>

	<span class="c1"># Type definitions</span>
	<span class="n">class_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">]</span>
	<span class="n">interface</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;interface_declaration&quot;</span><span class="p">]</span>
	<span class="n">protocol</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># TypeScript doesn&#39;t have protocols</span>
	<span class="n">struct</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># TypeScript doesn&#39;t have structs</span>
	<span class="n">enum</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;enum_declaration&quot;</span><span class="p">]</span>
	<span class="n">type_alias</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;type_alias_declaration&quot;</span><span class="p">]</span>

	<span class="c1"># Functions and methods</span>
	<span class="n">function</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">function</span><span class="p">,</span> <span class="s2">&quot;function_signature&quot;</span><span class="p">]</span>
	<span class="n">method</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">method</span><span class="p">,</span> <span class="s2">&quot;method_signature&quot;</span><span class="p">]</span>
	<span class="n">property_def</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">property_def</span><span class="p">,</span> <span class="s2">&quot;public_field_definition&quot;</span><span class="p">]</span>
	<span class="n">test_case</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">test_case</span>
	<span class="n">test_suite</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">test_suite</span>

	<span class="c1"># Variables and constants</span>
	<span class="n">variable</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">variable</span>
	<span class="n">constant</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">constant</span>
	<span class="n">class_field</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">class_field</span><span class="p">,</span> <span class="s2">&quot;public_field_definition&quot;</span><span class="p">]</span>

	<span class="c1"># Code organization</span>
	<span class="n">import_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">import_</span><span class="p">,</span> <span class="s2">&quot;import_alias&quot;</span><span class="p">]</span>
	<span class="n">decorator</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">decorator</span>

	<span class="c1"># Documentation</span>
	<span class="n">comment</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">comment</span>
	<span class="n">docstring</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">JAVASCRIPT_CONFIG</span><span class="o">.</span><span class="n">docstring</span>

	<span class="n">file_extensions</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.ts&quot;</span><span class="p">,</span> <span class="s2">&quot;.tsx&quot;</span><span class="p">]</span>
	<span class="n">tree_sitter_name</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;typescript&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.module" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">module</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;program&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.namespace" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">namespace</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">namespace</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="s2">&quot;export_statement&quot;</span><span class="p">,</span>
	<span class="s2">&quot;namespace_declaration&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.class_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_declaration&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.interface" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">interface</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interface</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;interface_declaration&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.protocol" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">protocol</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">protocol</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.struct" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">struct</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">struct</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.enum" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">enum</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">enum</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;enum_declaration&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.type_alias" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">type_alias</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">type_alias</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;type_alias_declaration&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.function" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">function</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">function</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.function">function</span></span><span class="p">,</span> <span class="s1">&#39;function_signature&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.method" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">method</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">method</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.method">method</span></span><span class="p">,</span> <span class="s1">&#39;method_signature&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.property_def" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">property_def</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">property_def</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="o">*</span><span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.property_def">property_def</span></span><span class="p">,</span>
	<span class="s2">&quot;public_field_definition&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.test_case" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">test_case</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">test_case</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.test_case">test_case</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.test_suite" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">test_suite</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">test_suite</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.test_suite">test_suite</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.variable" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">variable</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">variable</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.variable">variable</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.constant" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">constant</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">constant</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.constant">constant</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.class_field" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_field</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_field</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="o">*</span><span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.class_field">class_field</span></span><span class="p">,</span>
	<span class="s2">&quot;public_field_definition&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.import_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">import_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">import_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.import_">import_</span></span><span class="p">,</span> <span class="s1">&#39;import_alias&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.decorator" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">decorator</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">decorator</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.decorator">decorator</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.comment" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">comment</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">comment</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.comment">comment</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG.docstring">docstring</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.file_extensions" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">file_extensions</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_extensions</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.ts&#39;</span><span class="p">,</span> <span class="s1">&#39;.tsx&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig.tree_sitter_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">tree_sitter_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">tree_sitter_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;typescript&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.typescript.TYPESCRIPT_CONFIG" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">TYPESCRIPT_CONFIG</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">TYPESCRIPT_CONFIG</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;TypeScriptConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.typescript.TypeScriptConfig">TypeScriptConfig</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptSyntaxHandler" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TypeScriptSyntaxHandler</span>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;JavaScriptSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler">JavaScriptSyntaxHandler</a></code></p>


        <p>TypeScript-specific syntax handling logic.</p>
<p>Inherits from JavaScript handler to reuse common logic.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/typescript.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TypeScriptSyntaxHandler</span><span class="p">(</span><span class="n">JavaScriptSyntaxHandler</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	TypeScript-specific syntax handling logic.</span>

<span class="sd">	Inherits from JavaScript handler to reuse common logic.</span>

<span class="sd">	&quot;&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Initialize with TypeScript configuration.&quot;&quot;&quot;</span>
		<span class="c1"># Revert to super() and ignore potential linter false positive</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">TYPESCRIPT_CONFIG</span><span class="p">)</span>  <span class="c1"># type: ignore[call-arg] # pylint: disable=too-many-function-args</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityType</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Determine the EntityType for a TypeScript node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    parent: The parent node (if any)</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The entity type</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">node_type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
			<span class="s2">&quot;Getting entity type for TypeScript node: type=</span><span class="si">%s</span><span class="s2">, parent_type=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
			<span class="n">node_type</span><span class="p">,</span>
			<span class="n">parent</span><span class="o">.</span><span class="n">type</span> <span class="k">if</span> <span class="n">parent</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
		<span class="p">)</span>

		<span class="c1"># Check for TypeScript specific types first</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">INTERFACE</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">type_alias</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TYPE_ALIAS</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;enum_declaration&quot;</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">ENUM</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;module&quot;</span><span class="p">:</span>  <span class="c1"># TS internal modules/namespaces</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">NAMESPACE</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;namespace_declaration&quot;</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">NAMESPACE</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;method_signature&quot;</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;property_signature&quot;</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">PROPERTY</span>

		<span class="c1"># Use the JavaScript logic for common types</span>
		<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_entity_type</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract the name identifier from a definition node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The extracted name</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Handle TypeScript-specific node types first</span>
		<span class="n">name_node</span> <span class="o">=</span> <span class="kc">None</span>

		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span>
			<span class="s2">&quot;interface_declaration&quot;</span><span class="p">,</span>
			<span class="s2">&quot;enum_declaration&quot;</span><span class="p">,</span>
			<span class="s2">&quot;type_alias_declaration&quot;</span><span class="p">,</span>
			<span class="s2">&quot;namespace_declaration&quot;</span><span class="p">,</span>
		<span class="p">]</span> <span class="ow">or</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;method_signature&quot;</span><span class="p">,</span> <span class="s2">&quot;property_signature&quot;</span><span class="p">]:</span>
			<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">name_node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">name_node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode TypeScript name: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
				<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;decoding-error-</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

		<span class="c1"># Fall back to JavaScript name extraction</span>
		<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_body_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the node representing the &#39;body&#39; of a definition.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The body node if available, None otherwise</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;interface_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;function_signature&quot;</span><span class="p">,</span> <span class="s2">&quot;method_signature&quot;</span><span class="p">):</span>
			<span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Interfaces and signatures have no body block</span>
		<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_children_to_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the list of child nodes that should be recursively processed.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    body_node: The body node if available</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of child nodes to process</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># TypeScript-specific handling</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;type_alias_declaration&quot;</span><span class="p">:</span>
			<span class="c1"># Type aliases don&#39;t have children to process</span>
			<span class="k">return</span> <span class="p">[]</span>

		<span class="c1"># Fall back to JavaScript children processing</span>
		<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_children_to_process</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract imported module names from a TypeScript import statement.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node representing an import statement</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of imported module names as strings</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># TypeScript import statements are the same as JavaScript</span>
		<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">extract_imports</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Find the first ancestor node matching the target TypeScript entity type.</span>

<span class="sd">		Handles INTERFACE specifically and falls back to the JavaScript handler</span>
<span class="sd">		for other types (CLASS, FUNCTION, METHOD, MODULE).</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The starting node.</span>
<span class="sd">		    target_type: The EntityType to search for in ancestors.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The ancestor node if found, otherwise None.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">INTERFACE</span><span class="p">:</span>
			<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;interface_declaration&quot;</span><span class="p">]</span>
			<span class="n">current</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>
			<span class="k">while</span> <span class="n">current</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">target_node_types</span><span class="p">:</span>
					<span class="k">return</span> <span class="n">current</span>
				<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
			<span class="k">return</span> <span class="kc">None</span>
		<span class="c1"># Fall back to JS handler for other types (CLASS, FUNCTION, METHOD, MODULE)</span>
		<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_enclosing_node_of_type</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptSyntaxHandler.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize with TypeScript configuration.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/typescript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Initialize with TypeScript configuration.&quot;&quot;&quot;</span>
	<span class="c1"># Revert to super() and ignore potential linter false positive</span>
	<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">TYPESCRIPT_CONFIG</span><span class="p">)</span>  <span class="c1"># type: ignore[call-arg] # pylint: disable=too-many-function-args</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptSyntaxHandler.get_entity_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_entity_type</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_entity_type</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determine the EntityType for a TypeScript node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent node (if any)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The entity type</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/typescript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityType</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Determine the EntityType for a TypeScript node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    parent: The parent node (if any)</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The entity type</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">node_type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
		<span class="s2">&quot;Getting entity type for TypeScript node: type=</span><span class="si">%s</span><span class="s2">, parent_type=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
		<span class="n">node_type</span><span class="p">,</span>
		<span class="n">parent</span><span class="o">.</span><span class="n">type</span> <span class="k">if</span> <span class="n">parent</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span>

	<span class="c1"># Check for TypeScript specific types first</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">INTERFACE</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">type_alias</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TYPE_ALIAS</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;enum_declaration&quot;</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">ENUM</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;module&quot;</span><span class="p">:</span>  <span class="c1"># TS internal modules/namespaces</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">NAMESPACE</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;namespace_declaration&quot;</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">NAMESPACE</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;method_signature&quot;</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;property_signature&quot;</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">PROPERTY</span>

	<span class="c1"># Use the JavaScript logic for common types</span>
	<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_entity_type</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptSyntaxHandler.extract_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_name</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract the name identifier from a definition node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The extracted name</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/typescript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract the name identifier from a definition node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The extracted name</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Handle TypeScript-specific node types first</span>
	<span class="n">name_node</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span>
		<span class="s2">&quot;interface_declaration&quot;</span><span class="p">,</span>
		<span class="s2">&quot;enum_declaration&quot;</span><span class="p">,</span>
		<span class="s2">&quot;type_alias_declaration&quot;</span><span class="p">,</span>
		<span class="s2">&quot;namespace_declaration&quot;</span><span class="p">,</span>
	<span class="p">]</span> <span class="ow">or</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;method_signature&quot;</span><span class="p">,</span> <span class="s2">&quot;property_signature&quot;</span><span class="p">]:</span>
		<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">name_node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">name_node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode TypeScript name: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
			<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;decoding-error-</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

	<span class="c1"># Fall back to JavaScript name extraction</span>
	<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptSyntaxHandler.get_body_node" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_body_node</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the node representing the 'body' of a definition.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The body node if available, None otherwise</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/typescript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_body_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the node representing the &#39;body&#39; of a definition.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The body node if available, None otherwise</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;interface_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;function_signature&quot;</span><span class="p">,</span> <span class="s2">&quot;method_signature&quot;</span><span class="p">):</span>
		<span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Interfaces and signatures have no body block</span>
	<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptSyntaxHandler.get_children_to_process" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_children_to_process</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_children_to_process</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the list of child nodes that should be recursively processed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>body_node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The body node if available</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tree_sitter.Node">Node</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of child nodes to process</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/typescript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_children_to_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the list of child nodes that should be recursively processed.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    body_node: The body node if available</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of child nodes to process</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># TypeScript-specific handling</span>
	<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;type_alias_declaration&quot;</span><span class="p">:</span>
		<span class="c1"># Type aliases don&#39;t have children to process</span>
		<span class="k">return</span> <span class="p">[]</span>

	<span class="c1"># Fall back to JavaScript children processing</span>
	<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_children_to_process</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptSyntaxHandler.extract_imports" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_imports</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_imports</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract imported module names from a TypeScript import statement.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node representing an import statement</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of imported module names as strings</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/typescript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract imported module names from a TypeScript import statement.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node representing an import statement</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of imported module names as strings</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># TypeScript import statements are the same as JavaScript</span>
	<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">extract_imports</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.typescript.TypeScriptSyntaxHandler.get_enclosing_node_of_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_enclosing_node_of_type</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Find the first ancestor node matching the target TypeScript entity type.</p>
<p>Handles INTERFACE specifically and falls back to the JavaScript handler
for other types (CLASS, FUNCTION, METHOD, MODULE).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The starting node.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The EntityType to search for in ancestors.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ancestor node if found, otherwise None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/typescript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Find the first ancestor node matching the target TypeScript entity type.</span>

<span class="sd">	Handles INTERFACE specifically and falls back to the JavaScript handler</span>
<span class="sd">	for other types (CLASS, FUNCTION, METHOD, MODULE).</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The starting node.</span>
<span class="sd">	    target_type: The EntityType to search for in ancestors.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The ancestor node if found, otherwise None.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">INTERFACE</span><span class="p">:</span>
		<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;interface_declaration&quot;</span><span class="p">]</span>
		<span class="n">current</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">while</span> <span class="n">current</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">target_node_types</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">current</span>
			<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">return</span> <span class="kc">None</span>
	<span class="c1"># Fall back to JS handler for other types (CLASS, FUNCTION, METHOD, MODULE)</span>
	<span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_enclosing_node_of_type</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="codemap.processor.tree_sitter.languages.base" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">base</span>


</h5>

    <div class="doc doc-contents ">

        <p>Base configuration for language-specific syntax chunking.</p>
<p>This module provides the base configuration class for defining how
different programming languages map their syntax elements to code
chunks.</p>









  <div class="doc doc-children">



































<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.base.LanguageConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LanguageConfig</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">


        <p>Configuration for language-specific syntax chunking.</p>
<p>This class defines how a specific programming language's syntax
elements map to different types of code chunks. Each field is a list of
syntax node types that represent that kind of entity in the language's
AST.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">LanguageConfig</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Configuration for language-specific syntax chunking.</span>

<span class="sd">	This class defines how a specific programming language&#39;s syntax</span>
<span class="sd">	elements map to different types of code chunks. Each field is a list of</span>
<span class="sd">	syntax node types that represent that kind of entity in the language&#39;s</span>
<span class="sd">	AST.</span>

<span class="sd">	&quot;&quot;&quot;</span>

	<span class="c1"># File-level entities</span>
	<span class="n">module</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types that represent entire modules/files.&quot;&quot;&quot;</span>

	<span class="n">namespace</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for namespace/package declarations.&quot;&quot;&quot;</span>

	<span class="c1"># Type definitions</span>
	<span class="n">class_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for class definitions.&quot;&quot;&quot;</span>

	<span class="n">interface</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for interface definitions.&quot;&quot;&quot;</span>

	<span class="n">protocol</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for protocol/trait definitions.&quot;&quot;&quot;</span>

	<span class="n">struct</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for struct definitions.&quot;&quot;&quot;</span>

	<span class="n">enum</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for enum declarations.&quot;&quot;&quot;</span>

	<span class="n">type_alias</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for type aliases/typedefs.&quot;&quot;&quot;</span>

	<span class="c1"># Functions and methods</span>
	<span class="n">function</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for function declarations.&quot;&quot;&quot;</span>

	<span class="n">method</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for method declarations.&quot;&quot;&quot;</span>

	<span class="n">property_def</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for property/getter/setter declarations.&quot;&quot;&quot;</span>

	<span class="n">test_case</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types that identify test functions.&quot;&quot;&quot;</span>

	<span class="n">test_suite</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types that identify test classes/suites.&quot;&quot;&quot;</span>

	<span class="c1"># Variables and constants</span>
	<span class="n">variable</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for variable declarations.&quot;&quot;&quot;</span>

	<span class="n">constant</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for constant declarations.&quot;&quot;&quot;</span>

	<span class="n">class_field</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for class field declarations.&quot;&quot;&quot;</span>

	<span class="c1"># Code organization</span>
	<span class="n">import_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for import statements.&quot;&quot;&quot;</span>

	<span class="n">decorator</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for decorators/annotations.&quot;&quot;&quot;</span>

	<span class="c1"># Documentation</span>
	<span class="n">comment</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for general comments.&quot;&quot;&quot;</span>

	<span class="n">docstring</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Node types for documentation strings.&quot;&quot;&quot;</span>

	<span class="c1"># Language-specific metadata</span>
	<span class="n">file_extensions</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;File extensions associated with this language (e.g., [&#39;.py&#39;, &#39;.pyi&#39;]).&quot;&quot;&quot;</span>

	<span class="n">tree_sitter_name</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Tree-sitter language identifier.&quot;&quot;&quot;</span>

	<span class="c1"># Optional node types that might be language-specific</span>
	<span class="n">decorators</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="n">class_fields</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="nd">@property</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">all_node_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get all node types defined in this configuration.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A set of all node types from all categories.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">all_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="p">[</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">namespace</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">class_</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">protocol</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">struct</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">enum</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">type_alias</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">property_def</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">test_case</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">test_suite</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">constant</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">class_field</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">import_</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">decorator</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">docstring</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">decorators</span><span class="p">,</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">class_fields</span><span class="p">,</span>
		<span class="p">]:</span>
			<span class="k">if</span> <span class="n">attr</span><span class="p">:</span>  <span class="c1"># Skip None values</span>
				<span class="n">all_types</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">all_types</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">


    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.module" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">module</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types that represent entire modules/files.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.namespace" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">namespace</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">namespace</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for namespace/package declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.class_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for class definitions.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.interface" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">interface</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interface</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for interface definitions.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.protocol" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">protocol</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">protocol</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for protocol/trait definitions.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.struct" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">struct</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">struct</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for struct definitions.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.enum" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">enum</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">enum</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for enum declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.type_alias" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">type_alias</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">type_alias</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for type aliases/typedefs.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.function" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">function</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">function</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for function declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.method" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">method</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">method</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for method declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.property_def" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">property_def</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">property_def</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for property/getter/setter declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.test_case" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">test_case</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">test_case</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types that identify test functions.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.test_suite" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">test_suite</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">test_suite</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types that identify test classes/suites.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.variable" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">variable</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">variable</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for variable declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.constant" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">constant</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">constant</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for constant declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.class_field" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_field</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_field</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for class field declarations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.import_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">import_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">import_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for import statements.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.decorator" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">decorator</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">decorator</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for decorators/annotations.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.comment" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">comment</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">comment</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for general comments.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Node types for documentation strings.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.file_extensions" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">file_extensions</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_extensions</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>File extensions associated with this language (e.g., ['.py', '.pyi']).</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.tree_sitter_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">tree_sitter_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">tree_sitter_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Tree-sitter language identifier.</p>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.decorators" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">decorators</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">decorators</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.class_fields" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_fields</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_fields</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageConfig.all_node_types" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">all_node_types</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">all_node_types</span><span class="p">:</span> <span class="n"><span title="set">set</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get all node types defined in this configuration.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="set">set</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A set of all node types from all categories.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LanguageSyntaxHandler</span>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Abstract base class for language-specific syntax handling.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LanguageSyntaxHandler</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Abstract base class for language-specific syntax handling.&quot;&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">LanguageConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initialize with language configuration.</span>

<span class="sd">		Args:</span>
<span class="sd">		    config: Language-specific configuration</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">get_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityType</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Determine the EntityType for a given node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    parent: The parent node (if any)</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The entity type</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">find_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Find the docstring associated with a definition node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A tuple containing:</span>
<span class="sd">		    - The extracted docstring text (or None).</span>
<span class="sd">		    - The specific AST node representing the docstring that should be skipped</span>
<span class="sd">		      during child processing (or None).</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">extract_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract the name identifier from a definition node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The extracted name</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">get_body_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the main body node for a function, method, or class.</span>

<span class="sd">		This should be overridden by subclasses to find the appropriate block node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The node representing the function, method, or class.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The body node, or None if not applicable/found.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Default implementation: returns None or the node itself as a naive fallback</span>
		<span class="c1"># Subclasses should find specific body nodes like &#39;block&#39;, &#39;statement_block&#39; etc.</span>
		<span class="k">return</span> <span class="n">node</span>  <span class="c1"># Naive fallback - subclasses MUST override</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">get_children_to_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the list of child nodes that should be recursively processed.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    body_node: The body node if available</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of child nodes to process</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">should_skip_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Determine if a node should be skipped entirely during processing.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>

<span class="sd">		Returns:</span>
<span class="sd">		    True if the node should be skipped</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">extract_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract imported dependency names from an import node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node (should be an import type)</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of imported names</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">extract_calls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract names of functions/methods called within a node&#39;s scope.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node (e.g., function/method body)</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of called function/method names</span>

<span class="sd">		&quot;&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract the signature (definition line without body) for a function, class, etc.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The node to extract the signature from.</span>
<span class="sd">		    content_bytes: Source code content as bytes.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The signature string, or None if not applicable.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Default implementation: return the first line of the node&#39;s text</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">first_line</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
			<span class="k">return</span> <span class="n">first_line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">):</span>
			<span class="c1"># Catch specific errors related to slicing and decoding</span>
			<span class="k">return</span> <span class="kc">None</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Find the first ancestor node that matches the target entity type.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The starting node.</span>
<span class="sd">		    target_type: The EntityType to search for in ancestors.</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The ancestor node if found, otherwise None.</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">current</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">while</span> <span class="n">current</span><span class="p">:</span>
			<span class="c1"># We need content_bytes to determine the type accurately, but we don&#39;t have it here.</span>
			<span class="c1"># This highlights a limitation of doing this purely structurally without context.</span>
			<span class="c1"># Subclasses might need a different approach or access to the analyzer/content.</span>
			<span class="c1"># For a basic structural check:</span>
			<span class="c1"># entity_type = self.get_entity_type(current, current.parent, ???) # Need content_bytes</span>
			<span class="c1"># if entity_type == target_type:</span>
			<span class="c1">#    return current</span>

			<span class="c1"># Simplistic check based on node type name (less reliable)</span>
			<span class="k">if</span> <span class="n">target_type</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>  <span class="c1"># Very rough check</span>
				<span class="k">return</span> <span class="n">current</span>
			<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="nf">config</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize with language configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Language-specific configuration</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">LanguageConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Initialize with language configuration.</span>

<span class="sd">	Args:</span>
<span class="sd">	    config: Language-specific configuration</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.config" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">config</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config</span> <span class="o">=</span> <span class="n"><span title="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler(config)">config</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.get_entity_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_entity_type</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_entity_type</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determine the EntityType for a given node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent node (if any)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The entity type</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityType</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Determine the EntityType for a given node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    parent: The parent node (if any)</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The entity type</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.find_docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">find_docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">find_docstring</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Find the docstring associated with a definition node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple containing:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>The extracted docstring text (or None).</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="str">str</span> | None, <span title="tree_sitter.Node">Node</span> | None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>The specific AST node representing the docstring that should be skipped
during child processing (or None).</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">find_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Find the docstring associated with a definition node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A tuple containing:</span>
<span class="sd">	    - The extracted docstring text (or None).</span>
<span class="sd">	    - The specific AST node representing the docstring that should be skipped</span>
<span class="sd">	      during child processing (or None).</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.extract_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract the name identifier from a definition node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The extracted name</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract the name identifier from a definition node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The extracted name</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.get_body_node" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_body_node</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the main body node for a function, method, or class.</p>
<p>This should be overridden by subclasses to find the appropriate block node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The node representing the function, method, or class.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The body node, or None if not applicable/found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_body_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the main body node for a function, method, or class.</span>

<span class="sd">	This should be overridden by subclasses to find the appropriate block node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The node representing the function, method, or class.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The body node, or None if not applicable/found.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Default implementation: returns None or the node itself as a naive fallback</span>
	<span class="c1"># Subclasses should find specific body nodes like &#39;block&#39;, &#39;statement_block&#39; etc.</span>
	<span class="k">return</span> <span class="n">node</span>  <span class="c1"># Naive fallback - subclasses MUST override</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.get_children_to_process" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_children_to_process</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_children_to_process</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the list of child nodes that should be recursively processed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>body_node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The body node if available</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tree_sitter.Node">Node</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of child nodes to process</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_children_to_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the list of child nodes that should be recursively processed.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    body_node: The body node if available</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of child nodes to process</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.should_skip_node" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">should_skip_node</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">should_skip_node</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="bool">bool</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determine if a node should be skipped entirely during processing.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the node should be skipped</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">should_skip_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Determine if a node should be skipped entirely during processing.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>

<span class="sd">	Returns:</span>
<span class="sd">	    True if the node should be skipped</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.extract_imports" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_imports</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_imports</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract imported dependency names from an import node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node (should be an import type)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of imported names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract imported dependency names from an import node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node (should be an import type)</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of imported names</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.extract_calls" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_calls</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_calls</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract names of functions/methods called within a node's scope.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node (e.g., function/method body)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of called function/method names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">extract_calls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract names of functions/methods called within a node&#39;s scope.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node (e.g., function/method body)</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of called function/method names</span>

<span class="sd">	&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.extract_signature" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_signature</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_signature</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract the signature (definition line without body) for a function, class, etc.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The node to extract the signature from.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The signature string, or None if not applicable.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract the signature (definition line without body) for a function, class, etc.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The node to extract the signature from.</span>
<span class="sd">	    content_bytes: Source code content as bytes.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The signature string, or None if not applicable.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Default implementation: return the first line of the node&#39;s text</span>
	<span class="k">try</span><span class="p">:</span>
		<span class="n">first_line</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
		<span class="k">return</span> <span class="n">first_line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
	<span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">UnicodeDecodeError</span><span class="p">):</span>
		<span class="c1"># Catch specific errors related to slicing and decoding</span>
		<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler.get_enclosing_node_of_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_enclosing_node_of_type</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Find the first ancestor node that matches the target entity type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The starting node.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>target_type</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The EntityType to search for in ancestors.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ancestor node if found, otherwise None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Find the first ancestor node that matches the target entity type.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The starting node.</span>
<span class="sd">	    target_type: The EntityType to search for in ancestors.</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The ancestor node if found, otherwise None.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">current</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>
	<span class="k">while</span> <span class="n">current</span><span class="p">:</span>
		<span class="c1"># We need content_bytes to determine the type accurately, but we don&#39;t have it here.</span>
		<span class="c1"># This highlights a limitation of doing this purely structurally without context.</span>
		<span class="c1"># Subclasses might need a different approach or access to the analyzer/content.</span>
		<span class="c1"># For a basic structural check:</span>
		<span class="c1"># entity_type = self.get_entity_type(current, current.parent, ???) # Need content_bytes</span>
		<span class="c1"># if entity_type == target_type:</span>
		<span class="c1">#    return current</span>

		<span class="c1"># Simplistic check based on node type name (less reliable)</span>
		<span class="k">if</span> <span class="n">target_type</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>  <span class="c1"># Very rough check</span>
			<span class="k">return</span> <span class="n">current</span>
		<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
	<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.base.PythonConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">PythonConfig</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></code></p>


        <p>Configuration for Python language.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PythonConfig</span><span class="p">(</span><span class="n">LanguageConfig</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Configuration for Python language.&quot;&quot;&quot;</span>

	<span class="n">module</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;module&quot;</span><span class="p">]</span>
	<span class="n">class_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_definition&quot;</span><span class="p">]</span>
	<span class="n">function</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_definition&quot;</span><span class="p">]</span>
	<span class="n">property_def</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;decorated_definition&quot;</span><span class="p">]</span>
	<span class="n">struct</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="n">docstring</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">]</span>
	<span class="n">file_extensions</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.py&quot;</span><span class="p">,</span> <span class="s2">&quot;.pyi&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.PythonConfig.module" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">module</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;module&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.PythonConfig.class_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.PythonConfig.function" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">function</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">function</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;function_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.PythonConfig.property_def" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">property_def</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">property_def</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;decorated_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.PythonConfig.struct" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">struct</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">struct</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.PythonConfig.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.PythonConfig.file_extensions" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">file_extensions</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_extensions</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.py&#39;</span><span class="p">,</span> <span class="s1">&#39;.pyi&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.base.JavaScriptConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">JavaScriptConfig</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></code></p>


        <p>Configuration for JavaScript language.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">JavaScriptConfig</span><span class="p">(</span><span class="n">LanguageConfig</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Configuration for JavaScript language.&quot;&quot;&quot;</span>

	<span class="n">module</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;program&quot;</span><span class="p">]</span>
	<span class="n">class_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">]</span>
	<span class="n">function</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;method_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">]</span>
	<span class="n">property_def</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;property_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;property_identifier&quot;</span><span class="p">]</span>
	<span class="n">struct</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="n">docstring</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>
	<span class="n">file_extensions</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.js&quot;</span><span class="p">,</span> <span class="s2">&quot;.jsx&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.JavaScriptConfig.module" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">module</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;program&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.JavaScriptConfig.class_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_declaration&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.JavaScriptConfig.function" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">function</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">function</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="s2">&quot;function_declaration&quot;</span><span class="p">,</span>
	<span class="s2">&quot;method_definition&quot;</span><span class="p">,</span>
	<span class="s2">&quot;function&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.JavaScriptConfig.property_def" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">property_def</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">property_def</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="s2">&quot;property_definition&quot;</span><span class="p">,</span>
	<span class="s2">&quot;property_identifier&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.JavaScriptConfig.struct" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">struct</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">struct</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.JavaScriptConfig.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.JavaScriptConfig.file_extensions" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">file_extensions</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_extensions</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.js&#39;</span><span class="p">,</span> <span class="s1">&#39;.jsx&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.base.TypeScriptConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TypeScriptConfig</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></code></p>


        <p>Configuration for TypeScript language.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TypeScriptConfig</span><span class="p">(</span><span class="n">LanguageConfig</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Configuration for TypeScript language.&quot;&quot;&quot;</span>

	<span class="n">module</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;program&quot;</span><span class="p">]</span>
	<span class="n">class_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">]</span>
	<span class="n">function</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;method_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">]</span>
	<span class="n">property_def</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;property_definition&quot;</span><span class="p">,</span> <span class="s2">&quot;property_identifier&quot;</span><span class="p">]</span>
	<span class="n">struct</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="n">docstring</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>
	<span class="n">file_extensions</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.ts&quot;</span><span class="p">,</span> <span class="s2">&quot;.tsx&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.TypeScriptConfig.module" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">module</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;program&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.TypeScriptConfig.class_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_declaration&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.TypeScriptConfig.function" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">function</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">function</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="s2">&quot;function_declaration&quot;</span><span class="p">,</span>
	<span class="s2">&quot;method_definition&quot;</span><span class="p">,</span>
	<span class="s2">&quot;function&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.TypeScriptConfig.property_def" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">property_def</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">property_def</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="s2">&quot;property_definition&quot;</span><span class="p">,</span>
	<span class="s2">&quot;property_identifier&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.TypeScriptConfig.struct" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">struct</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">struct</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.TypeScriptConfig.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.TypeScriptConfig.file_extensions" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">file_extensions</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_extensions</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.ts&#39;</span><span class="p">,</span> <span class="s1">&#39;.tsx&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.base.RustConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">RustConfig</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></code></p>


        <p>Configuration for Rust language.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">RustConfig</span><span class="p">(</span><span class="n">LanguageConfig</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Configuration for Rust language.&quot;&quot;&quot;</span>

	<span class="n">module</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;source_file&quot;</span><span class="p">]</span>
	<span class="n">class_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;impl_item&quot;</span><span class="p">]</span>
	<span class="n">function</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_item&quot;</span><span class="p">]</span>
	<span class="n">property_def</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="n">struct</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;struct_item&quot;</span><span class="p">]</span>
	<span class="n">docstring</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;line_comment&quot;</span><span class="p">,</span> <span class="s2">&quot;block_comment&quot;</span><span class="p">]</span>
	<span class="n">file_extensions</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.rs&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.RustConfig.module" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">module</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;source_file&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.RustConfig.class_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;impl_item&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.RustConfig.function" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">function</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">function</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;function_item&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.RustConfig.property_def" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">property_def</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">property_def</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.RustConfig.struct" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">struct</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">struct</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;struct_item&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.RustConfig.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;line_comment&#39;</span><span class="p">,</span> <span class="s1">&#39;block_comment&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.RustConfig.file_extensions" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">file_extensions</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_extensions</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.rs&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.base.GoConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">GoConfig</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></code></p>


        <p>Configuration for Go language.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">GoConfig</span><span class="p">(</span><span class="n">LanguageConfig</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Configuration for Go language.&quot;&quot;&quot;</span>

	<span class="n">module</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;source_file&quot;</span><span class="p">]</span>
	<span class="n">class_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;type_declaration&quot;</span><span class="p">]</span>
	<span class="n">function</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_declaration&quot;</span><span class="p">]</span>
	<span class="n">property_def</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="n">struct</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;struct_type&quot;</span><span class="p">]</span>
	<span class="n">docstring</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>
	<span class="n">file_extensions</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.go&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.GoConfig.module" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">module</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;source_file&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.GoConfig.class_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;type_declaration&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.GoConfig.function" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">function</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">function</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;function_declaration&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.GoConfig.property_def" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">property_def</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">property_def</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.GoConfig.struct" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">struct</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">struct</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;struct_type&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.GoConfig.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.base.GoConfig.file_extensions" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">file_extensions</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_extensions</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.go&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="codemap.processor.tree_sitter.languages.javascript" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">javascript</span>


</h5>

    <div class="doc doc-contents ">

        <p>JavaScript-specific configuration for syntax chunking.</p>









  <div class="doc doc-children">







































<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.javascript.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">JavaScriptConfig</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageConfig">LanguageConfig</a></code></p>


        <p>JavaScript-specific syntax chunking configuration.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">JavaScriptConfig</span><span class="p">(</span><span class="n">LanguageConfig</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;JavaScript-specific syntax chunking configuration.&quot;&quot;&quot;</span>

	<span class="c1"># File-level entities</span>
	<span class="n">module</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;program&quot;</span><span class="p">]</span>
	<span class="n">namespace</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;export_statement&quot;</span><span class="p">]</span>  <span class="c1"># Using export as namespace indicator</span>

	<span class="c1"># Type definitions</span>
	<span class="n">class_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">]</span>
	<span class="n">interface</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Pure JS doesn&#39;t have interfaces</span>
	<span class="n">protocol</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Pure JS doesn&#39;t have protocols</span>
	<span class="n">struct</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Pure JS doesn&#39;t have structs</span>
	<span class="n">enum</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Pure JS doesn&#39;t have enums</span>
	<span class="n">type_alias</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Pure JS doesn&#39;t have type aliases</span>

	<span class="c1"># Functions and methods</span>
	<span class="n">function</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span>
		<span class="s2">&quot;function_declaration&quot;</span><span class="p">,</span>
		<span class="s2">&quot;function&quot;</span><span class="p">,</span>
		<span class="s2">&quot;arrow_function&quot;</span><span class="p">,</span>
		<span class="s2">&quot;generator_function_declaration&quot;</span><span class="p">,</span>
	<span class="p">]</span>
	<span class="n">method</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;method_definition&quot;</span><span class="p">]</span>
	<span class="n">property_def</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;property_identifier&quot;</span><span class="p">,</span> <span class="s2">&quot;public_field_definition&quot;</span><span class="p">]</span>
	<span class="n">test_case</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;call_expression&quot;</span><span class="p">]</span>  <span class="c1"># Special detection for test frameworks</span>
	<span class="n">test_suite</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;call_expression&quot;</span><span class="p">]</span>  <span class="c1"># Special detection for test frameworks</span>

	<span class="c1"># Variables and constants</span>
	<span class="n">variable</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;variable_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;lexical_declaration&quot;</span><span class="p">]</span>
	<span class="n">constant</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;variable_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;lexical_declaration&quot;</span><span class="p">]</span>  <span class="c1"># const declarations</span>
	<span class="n">class_field</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;public_field_definition&quot;</span><span class="p">]</span>

	<span class="c1"># Code organization</span>
	<span class="n">import_</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;import_statement&quot;</span><span class="p">]</span>
	<span class="n">decorator</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;decorator&quot;</span><span class="p">]</span>

	<span class="c1"># Documentation</span>
	<span class="n">comment</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>
	<span class="n">docstring</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>  <span class="c1"># JS uses comments for documentation</span>

	<span class="n">file_extensions</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.js&quot;</span><span class="p">,</span> <span class="s2">&quot;.jsx&quot;</span><span class="p">,</span> <span class="s2">&quot;.mjs&quot;</span><span class="p">,</span> <span class="s2">&quot;.cjs&quot;</span><span class="p">]</span>
	<span class="n">tree_sitter_name</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;javascript&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.module" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">module</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">module</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;program&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.namespace" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">namespace</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">namespace</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;export_statement&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.class_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;class_declaration&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.interface" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">interface</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interface</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.protocol" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">protocol</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">protocol</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.struct" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">struct</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">struct</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.enum" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">enum</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">enum</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.type_alias" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">type_alias</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">type_alias</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.function" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">function</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">function</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="s2">&quot;function_declaration&quot;</span><span class="p">,</span>
	<span class="s2">&quot;function&quot;</span><span class="p">,</span>
	<span class="s2">&quot;arrow_function&quot;</span><span class="p">,</span>
	<span class="s2">&quot;generator_function_declaration&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.method" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">method</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">method</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;method_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.property_def" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">property_def</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">property_def</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="s2">&quot;property_identifier&quot;</span><span class="p">,</span>
	<span class="s2">&quot;public_field_definition&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.test_case" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">test_case</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">test_case</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;call_expression&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.test_suite" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">test_suite</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">test_suite</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;call_expression&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.variable" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">variable</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">variable</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="s2">&quot;variable_declaration&quot;</span><span class="p">,</span>
	<span class="s2">&quot;lexical_declaration&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.constant" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">constant</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">constant</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
	<span class="s2">&quot;variable_declaration&quot;</span><span class="p">,</span>
	<span class="s2">&quot;lexical_declaration&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.class_field" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">class_field</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">class_field</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;public_field_definition&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.import_" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">import_</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">import_</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;import_statement&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.decorator" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">decorator</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">decorator</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;decorator&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.comment" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">comment</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">comment</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">docstring</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">docstring</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.file_extensions" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">file_extensions</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">file_extensions</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.js&quot;</span><span class="p">,</span> <span class="s2">&quot;.jsx&quot;</span><span class="p">,</span> <span class="s2">&quot;.mjs&quot;</span><span class="p">,</span> <span class="s2">&quot;.cjs&quot;</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig.tree_sitter_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">tree_sitter_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">tree_sitter_name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;javascript&#39;</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>




  </div>

    </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="codemap.processor.tree_sitter.languages.javascript.JAVASCRIPT_CONFIG" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">JAVASCRIPT_CONFIG</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">JAVASCRIPT_CONFIG</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;JavaScriptConfig&lt;/span&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.javascript.JavaScriptConfig">JavaScriptConfig</a></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">JavaScriptSyntaxHandler</span>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;LanguageSyntaxHandler&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler&lt;/code&gt;)" href="#codemap.processor.tree_sitter.languages.base.LanguageSyntaxHandler">LanguageSyntaxHandler</a></code></p>


        <p>JavaScript-specific syntax handling logic.</p>







              <details class="quote">
                <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">JavaScriptSyntaxHandler</span><span class="p">(</span><span class="n">LanguageSyntaxHandler</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;JavaScript-specific syntax handling logic.&quot;&quot;&quot;</span>

	<span class="nd">@staticmethod</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">_get_node_text</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Helper to get node text safely.&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
			<span class="k">return</span> <span class="s2">&quot;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Initialize with JavaScript configuration.&quot;&quot;&quot;</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">JAVASCRIPT_CONFIG</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityType</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Determine the EntityType for a JavaScript node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    parent: The parent node (if any)</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The entity type</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">node_type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
			<span class="s2">&quot;Getting entity type for JavaScript node: type=</span><span class="si">%s</span><span class="s2">, parent_type=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
			<span class="n">node_type</span><span class="p">,</span>
			<span class="n">parent</span><span class="o">.</span><span class="n">type</span> <span class="k">if</span> <span class="n">parent</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
		<span class="p">)</span>

		<span class="c1"># Module-level</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">module</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">namespace</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">NAMESPACE</span>

		<span class="c1"># Documentation</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">comment</span><span class="p">:</span>
			<span class="c1"># Check if this is a JSDoc comment (starts with /**)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_jsdoc_comment</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">):</span>
				<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">DOCSTRING</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">COMMENT</span>

		<span class="c1"># Type definitions</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">class_</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span>

		<span class="c1"># Functions and methods</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">function</span><span class="p">:</span>
			<span class="c1"># Check if this is a test function (for frameworks like Jest, Mocha)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_test_function</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">):</span>
				<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TEST_CASE</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span>

		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">method</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span>

		<span class="c1"># Check for test suite declarations (describe blocks in Jest/Mocha)</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">test_suite</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_test_suite</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">):</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TEST_SUITE</span>

		<span class="c1"># Property definitions</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">property_def</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">PROPERTY</span>

		<span class="c1"># Variables and constants</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">variable</span><span class="p">:</span>
			<span class="c1"># Check if it&#39;s a const declaration</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_constant</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">):</span>
				<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span>

		<span class="c1"># Class fields</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">class_field</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS_FIELD</span>

		<span class="c1"># Code organization</span>
		<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">import_</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span>

		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_is_jsdoc_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Check if a comment node is a JSDoc comment.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The comment node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    True if the node is a JSDoc comment</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">!=</span> <span class="s2">&quot;comment&quot;</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">False</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">comment_text</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">comment_text</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;/**&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">comment_text</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;*/&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
			<span class="k">return</span> <span class="kc">False</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_is_constant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Check if a variable declaration is a constant.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The variable declaration node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    True if the node is a constant declaration</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;variable_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;lexical_declaration&quot;</span><span class="p">]:</span>
			<span class="k">return</span> <span class="kc">False</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">decl_text</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">start_byte</span> <span class="o">+</span> <span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">decl_text</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;const&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
			<span class="k">return</span> <span class="kc">False</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_is_test_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Check if a function is a test function.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The function node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    True if the node is a test function</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;call_expression&quot;</span><span class="p">:</span>
			<span class="n">callee</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">callee</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">callee_text</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">callee</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">callee</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
					<span class="k">return</span> <span class="n">callee_text</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;it&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">]</span>
				<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
					<span class="k">pass</span>
		<span class="k">return</span> <span class="kc">False</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_is_test_suite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Check if a node is a test suite declaration.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    True if the node is a test suite declaration</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;call_expression&quot;</span><span class="p">:</span>
			<span class="n">callee</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">callee</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">callee_text</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">callee</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">callee</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
					<span class="k">return</span> <span class="n">callee_text</span> <span class="o">==</span> <span class="s2">&quot;describe&quot;</span>
				<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
					<span class="k">pass</span>
		<span class="k">return</span> <span class="kc">False</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">find_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Find the docstring associated with a definition node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    A tuple containing:</span>
<span class="sd">		    - The extracted docstring text (or None).</span>
<span class="sd">		    - The specific AST node representing the docstring (or None).</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># For functions, classes, and other definition nodes</span>
		<span class="n">parent_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>

		<span class="c1"># Look for JSDoc comments immediately preceding the node</span>
		<span class="k">if</span> <span class="n">parent_node</span><span class="p">:</span>
			<span class="n">index</span> <span class="o">=</span> <span class="kc">None</span>
			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parent_node</span><span class="o">.</span><span class="n">children</span><span class="p">):</span>
				<span class="k">if</span> <span class="n">child</span> <span class="o">==</span> <span class="n">node</span><span class="p">:</span>
					<span class="n">index</span> <span class="o">=</span> <span class="n">i</span>
					<span class="k">break</span>

			<span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
				<span class="n">prev_node</span> <span class="o">=</span> <span class="n">parent_node</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
				<span class="k">if</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;comment&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_jsdoc_comment</span><span class="p">(</span><span class="n">prev_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">):</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">comment_text</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">prev_node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
							<span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span>
						<span class="p">)</span>
						<span class="c1"># Clean JSDoc format: remove /** */ and trim</span>
						<span class="n">comment_text</span> <span class="o">=</span> <span class="n">comment_text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
						<span class="n">comment_text</span> <span class="o">=</span> <span class="n">comment_text</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;/**&quot;</span><span class="p">)</span>
						<span class="n">comment_text</span> <span class="o">=</span> <span class="n">comment_text</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">&quot;*/&quot;</span><span class="p">)</span>
						<span class="k">return</span> <span class="n">comment_text</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">prev_node</span>
					<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
						<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode JavaScript comment: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

		<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract the name identifier from a definition node.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    The extracted name</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Try to find the name field based on node type</span>
		<span class="n">name_node</span> <span class="o">=</span> <span class="kc">None</span>

		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;function_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;class_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;method_definition&quot;</span><span class="p">]:</span>
			<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;property_identifier&quot;</span><span class="p">:</span>
			<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span>
		<span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;variable_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;lexical_declaration&quot;</span><span class="p">]:</span>
			<span class="c1"># Get the first declarator and its name</span>
			<span class="n">declarator</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;declarations&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">declarator</span> <span class="ow">and</span> <span class="n">declarator</span><span class="o">.</span><span class="n">named_child_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
				<span class="n">first_declarator</span> <span class="o">=</span> <span class="n">declarator</span><span class="o">.</span><span class="n">named_children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
				<span class="n">name_node</span> <span class="o">=</span> <span class="n">first_declarator</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;public_field_definition&quot;</span><span class="p">:</span>
			<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">name_node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">name_node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
			<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode JavaScript name: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
				<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;decoding-error-</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

		<span class="c1"># For call expressions that represent tests or suites</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;call_expression&quot;</span><span class="p">:</span>
			<span class="n">callee</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
			<span class="n">arguments</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;arguments&quot;</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">callee</span> <span class="ow">and</span> <span class="n">arguments</span> <span class="ow">and</span> <span class="n">arguments</span><span class="o">.</span><span class="n">named_child_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
				<span class="c1"># First argument is typically the test/suite name</span>
				<span class="n">first_arg</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">named_children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
				<span class="k">if</span> <span class="n">first_arg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span><span class="p">:</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">name</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">first_arg</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">first_arg</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
						<span class="c1"># Remove quotes</span>
						<span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
					<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
						<span class="k">pass</span>

		<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;anonymous-</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_body_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Get the statement block node for JS/TS function/class/method body.&quot;&quot;&quot;</span>
		<span class="c1"># Common body node type in JS/TS grammar</span>
		<span class="n">body_field_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">,</span> <span class="s2">&quot;statement_block&quot;</span><span class="p">]</span>
		<span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">body_field_names</span><span class="p">:</span>
			<span class="n">body_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">body_node</span><span class="p">:</span>
				<span class="c1"># Sometimes the direct body is an expression (arrow functions)</span>
				<span class="c1"># Check if the found node is a block type</span>
				<span class="k">if</span> <span class="n">body_node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;statement_block&quot;</span><span class="p">:</span>
					<span class="k">return</span> <span class="n">body_node</span>
				<span class="k">if</span> <span class="n">body_node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;expression_statement&quot;</span><span class="p">:</span>  <span class="c1"># Arrow function returning object literal</span>
					<span class="k">if</span> <span class="n">body_node</span><span class="o">.</span><span class="n">child_count</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">body_node</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span>
						<span class="k">return</span> <span class="n">body_node</span>  <span class="c1"># Treat expression as body</span>
				<span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;arrow_function&quot;</span><span class="p">:</span>  <span class="c1"># Direct expression in arrow function</span>
					<span class="k">return</span> <span class="n">body_node</span>
		<span class="c1"># Fallback for classes where body might be direct children within curly braces</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;class_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">):</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;class_body&quot;</span><span class="p">:</span>
					<span class="k">return</span> <span class="n">child</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Extract the signature up to the opening curly brace &#39;{&#39; for JS/TS.&quot;&quot;&quot;</span>
		<span class="c1"># Find the body node first</span>
		<span class="n">body_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">body_node</span><span class="p">:</span>
			<span class="c1"># Signature is everything from the start of the node up to the start of the body</span>
			<span class="n">start_byte</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">start_byte</span>
			<span class="n">end_byte</span> <span class="o">=</span> <span class="n">body_node</span><span class="o">.</span><span class="n">start_byte</span>
			<span class="c1"># Adjust end_byte to exclude trailing whitespace before the body</span>
			<span class="k">while</span> <span class="n">end_byte</span> <span class="o">&gt;</span> <span class="n">start_byte</span> <span class="ow">and</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">end_byte</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">isspace</span><span class="p">():</span>
				<span class="n">end_byte</span> <span class="o">-=</span> <span class="mi">1</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">start_byte</span><span class="p">:</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
			<span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
				<span class="k">return</span> <span class="kc">None</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c1"># Fallback: if no body found (e.g., abstract method, interface?), return the first line</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Find the first ancestor node matching the target JS/TS entity type.&quot;&quot;&quot;</span>
		<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">if</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">:</span>
			<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;class_expression&quot;</span><span class="p">]</span>
		<span class="k">elif</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">:</span>
			<span class="c1"># Includes function declarations, arrow functions, function expressions</span>
			<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;arrow_function&quot;</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">]</span>
		<span class="k">elif</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">:</span>
			<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;method_definition&quot;</span><span class="p">]</span>
		<span class="k">elif</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">:</span>
			<span class="c1"># Module is typically the root &#39;program&#39; node</span>
			<span class="n">current</span> <span class="o">=</span> <span class="n">node</span>
			<span class="k">while</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span><span class="p">:</span>
				<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
			<span class="k">return</span> <span class="n">current</span> <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;program&quot;</span> <span class="k">else</span> <span class="kc">None</span>
		<span class="c1"># Add other types if needed (e.g., INTERFACE for TS)</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="n">target_node_types</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span>

		<span class="n">current</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">while</span> <span class="n">current</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">target_node_types</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">current</span>
			<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">get_children_to_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Get the list of child nodes that should be recursively processed.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>
<span class="sd">		    body_node: The body node if available</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of child nodes to process</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Process children of the body node if it exists, otherwise process direct children</span>
		<span class="k">if</span> <span class="n">body_node</span><span class="p">:</span>
			<span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">body_node</span><span class="o">.</span><span class="n">children</span><span class="p">)</span>

		<span class="c1"># Special handling for certain nodes</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;variable_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;lexical_declaration&quot;</span><span class="p">]:</span>
			<span class="c1"># Process the declarations field</span>
			<span class="n">declarations</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;declarations&quot;</span><span class="p">)</span>
			<span class="k">return</span> <span class="p">[</span><span class="n">declarations</span><span class="p">]</span> <span class="k">if</span> <span class="n">declarations</span> <span class="k">else</span> <span class="p">[]</span>

		<span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">should_skip_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Determine if a node should be skipped entirely during processing.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node</span>

<span class="sd">		Returns:</span>
<span class="sd">		    True if the node should be skipped</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="c1"># Skip non-named nodes (like punctuation, operators)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">is_named</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">True</span>

		<span class="c1"># Skip syntax nodes that don&#39;t contribute to code structure</span>
		<span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;=&gt;&quot;</span><span class="p">]</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract imported module names from a JavaScript import statement.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node representing an import statement</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of imported module names as strings</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">import_</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">[]</span>

		<span class="n">imported_names</span> <span class="o">=</span> <span class="p">[]</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="c1"># Find the source (module path) of the import</span>
			<span class="n">source_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">source_node</span><span class="p">:</span>
				<span class="k">return</span> <span class="p">[]</span>

			<span class="c1"># Extract the module path from the string literal</span>
			<span class="n">module_path</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">source_node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">source_node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
			<span class="c1"># Remove quotes</span>
			<span class="n">module_path</span> <span class="o">=</span> <span class="n">module_path</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

			<span class="c1"># Check for different import patterns:</span>

			<span class="c1"># 1. Default import: &quot;import Name from &#39;module&#39;&quot;</span>
			<span class="n">default_import</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">default_import</span><span class="p">:</span>
				<span class="n">name</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">default_import</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">default_import</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
					<span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span>
				<span class="p">)</span>
				<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_path</span><span class="si">}</span><span class="s2">.default&quot;</span><span class="p">)</span>

			<span class="c1"># 2. Named imports: &quot;import { foo, bar as baz } from &#39;module&#39;&quot;</span>
			<span class="n">named_imports</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;named_imports&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">named_imports</span><span class="p">:</span>
				<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">named_imports</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;import_specifier&quot;</span><span class="p">:</span>
						<span class="n">imported_name</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
						<span class="k">if</span> <span class="n">imported_name</span><span class="p">:</span>
							<span class="n">name</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">imported_name</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">imported_name</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
								<span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span>
							<span class="p">)</span>
							<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_path</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

			<span class="c1"># 3. Namespace import: &quot;import * as Name from &#39;module&#39;&quot;</span>
			<span class="n">namespace_import</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;namespace_import&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">namespace_import</span><span class="p">:</span>
				<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_path</span><span class="si">}</span><span class="s2">.*&quot;</span><span class="p">)</span>

			<span class="c1"># If no specific imports found but we have a module, add the whole module</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">imported_names</span> <span class="ow">and</span> <span class="n">module_path</span><span class="p">:</span>
				<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_path</span><span class="p">)</span>

		<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode JavaScript imports: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">imported_names</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">extract_calls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Extract names of functions/methods called within a JS node&#39;s scope.</span>

<span class="sd">		Recursively searches for &#39;call_expression&#39; nodes and extracts the function identifier.</span>

<span class="sd">		Args:</span>
<span class="sd">		    node: The tree-sitter node (e.g., function/method body)</span>
<span class="sd">		    content_bytes: Source code content as bytes</span>

<span class="sd">		Returns:</span>
<span class="sd">		    List of called function/method names</span>

<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">calls</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;call_expression&quot;</span><span class="p">:</span>
				<span class="n">function_node</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">function_node</span><span class="p">:</span>
					<span class="c1"># Extract the identifier (e.g., funcName, obj.methodName)</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">call_name</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">function_node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">function_node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
							<span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span>
						<span class="p">)</span>
						<span class="n">calls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">call_name</span><span class="p">)</span>
					<span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
						<span class="k">pass</span>  <span class="c1"># Ignore decoding errors</span>
			<span class="c1"># Recursively search deeper within non-call children</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">calls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extract_calls</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">))</span>
		<span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">calls</span><span class="p">))</span>  <span class="c1"># Return unique calls</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initialize with JavaScript configuration.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Initialize with JavaScript configuration.&quot;&quot;&quot;</span>
	<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">JAVASCRIPT_CONFIG</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler.get_entity_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_entity_type</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_entity_type</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determine the EntityType for a JavaScript node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>parent</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The parent node (if any)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The entity type</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_entity_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EntityType</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Determine the EntityType for a JavaScript node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    parent: The parent node (if any)</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The entity type</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">node_type</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
		<span class="s2">&quot;Getting entity type for JavaScript node: type=</span><span class="si">%s</span><span class="s2">, parent_type=</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
		<span class="n">node_type</span><span class="p">,</span>
		<span class="n">parent</span><span class="o">.</span><span class="n">type</span> <span class="k">if</span> <span class="n">parent</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
	<span class="p">)</span>

	<span class="c1"># Module-level</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">module</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">namespace</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">NAMESPACE</span>

	<span class="c1"># Documentation</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">comment</span><span class="p">:</span>
		<span class="c1"># Check if this is a JSDoc comment (starts with /**)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_jsdoc_comment</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">):</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">DOCSTRING</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">COMMENT</span>

	<span class="c1"># Type definitions</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">class_</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span>

	<span class="c1"># Functions and methods</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">function</span><span class="p">:</span>
		<span class="c1"># Check if this is a test function (for frameworks like Jest, Mocha)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_test_function</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">):</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TEST_CASE</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span>

	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">method</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span>

	<span class="c1"># Check for test suite declarations (describe blocks in Jest/Mocha)</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">test_suite</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_test_suite</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">TEST_SUITE</span>

	<span class="c1"># Property definitions</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">property_def</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">PROPERTY</span>

	<span class="c1"># Variables and constants</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">variable</span><span class="p">:</span>
		<span class="c1"># Check if it&#39;s a const declaration</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_constant</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">):</span>
			<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span>

	<span class="c1"># Class fields</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">class_field</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS_FIELD</span>

	<span class="c1"># Code organization</span>
	<span class="k">if</span> <span class="n">node_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">import_</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span>

	<span class="k">return</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler.find_docstring" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">find_docstring</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">find_docstring</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tuple">tuple</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Find the docstring associated with a definition node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple containing:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>The extracted docstring text (or None).</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="str">str</span> | None, <span title="tree_sitter.Node">Node</span> | None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>The specific AST node representing the docstring (or None).</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Find the docstring associated with a definition node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    A tuple containing:</span>
<span class="sd">	    - The extracted docstring text (or None).</span>
<span class="sd">	    - The specific AST node representing the docstring (or None).</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># For functions, classes, and other definition nodes</span>
	<span class="n">parent_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>

	<span class="c1"># Look for JSDoc comments immediately preceding the node</span>
	<span class="k">if</span> <span class="n">parent_node</span><span class="p">:</span>
		<span class="n">index</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parent_node</span><span class="o">.</span><span class="n">children</span><span class="p">):</span>
			<span class="k">if</span> <span class="n">child</span> <span class="o">==</span> <span class="n">node</span><span class="p">:</span>
				<span class="n">index</span> <span class="o">=</span> <span class="n">i</span>
				<span class="k">break</span>

		<span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
			<span class="n">prev_node</span> <span class="o">=</span> <span class="n">parent_node</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
			<span class="k">if</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;comment&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_jsdoc_comment</span><span class="p">(</span><span class="n">prev_node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">):</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">comment_text</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">prev_node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">prev_node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
						<span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span>
					<span class="p">)</span>
					<span class="c1"># Clean JSDoc format: remove /** */ and trim</span>
					<span class="n">comment_text</span> <span class="o">=</span> <span class="n">comment_text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
					<span class="n">comment_text</span> <span class="o">=</span> <span class="n">comment_text</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;/**&quot;</span><span class="p">)</span>
					<span class="n">comment_text</span> <span class="o">=</span> <span class="n">comment_text</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">&quot;*/&quot;</span><span class="p">)</span>
					<span class="k">return</span> <span class="n">comment_text</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">prev_node</span>
				<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
					<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode JavaScript comment: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

	<span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler.extract_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_name</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_name</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract the name identifier from a definition node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The extracted name</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract the name identifier from a definition node.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    The extracted name</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Try to find the name field based on node type</span>
	<span class="n">name_node</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;function_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;class_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;method_definition&quot;</span><span class="p">]:</span>
		<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;property_identifier&quot;</span><span class="p">:</span>
		<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span>
	<span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;variable_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;lexical_declaration&quot;</span><span class="p">]:</span>
		<span class="c1"># Get the first declarator and its name</span>
		<span class="n">declarator</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;declarations&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">declarator</span> <span class="ow">and</span> <span class="n">declarator</span><span class="o">.</span><span class="n">named_child_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
			<span class="n">first_declarator</span> <span class="o">=</span> <span class="n">declarator</span><span class="o">.</span><span class="n">named_children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
			<span class="n">name_node</span> <span class="o">=</span> <span class="n">first_declarator</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;public_field_definition&quot;</span><span class="p">:</span>
		<span class="n">name_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">name_node</span><span class="p">:</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">name_node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">name_node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode JavaScript name: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
			<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;decoding-error-</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

	<span class="c1"># For call expressions that represent tests or suites</span>
	<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;call_expression&quot;</span><span class="p">:</span>
		<span class="n">callee</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
		<span class="n">arguments</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;arguments&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">callee</span> <span class="ow">and</span> <span class="n">arguments</span> <span class="ow">and</span> <span class="n">arguments</span><span class="o">.</span><span class="n">named_child_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
			<span class="c1"># First argument is typically the test/suite name</span>
			<span class="n">first_arg</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">named_children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
			<span class="k">if</span> <span class="n">first_arg</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">name</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">first_arg</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">first_arg</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
					<span class="c1"># Remove quotes</span>
					<span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
				<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
					<span class="k">pass</span>

	<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;anonymous-</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler.get_body_node" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_body_node</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the statement block node for JS/TS function/class/method body.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_body_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Get the statement block node for JS/TS function/class/method body.&quot;&quot;&quot;</span>
	<span class="c1"># Common body node type in JS/TS grammar</span>
	<span class="n">body_field_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">,</span> <span class="s2">&quot;statement_block&quot;</span><span class="p">]</span>
	<span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">body_field_names</span><span class="p">:</span>
		<span class="n">body_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">body_node</span><span class="p">:</span>
			<span class="c1"># Sometimes the direct body is an expression (arrow functions)</span>
			<span class="c1"># Check if the found node is a block type</span>
			<span class="k">if</span> <span class="n">body_node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;statement_block&quot;</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">body_node</span>
			<span class="k">if</span> <span class="n">body_node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;expression_statement&quot;</span><span class="p">:</span>  <span class="c1"># Arrow function returning object literal</span>
				<span class="k">if</span> <span class="n">body_node</span><span class="o">.</span><span class="n">child_count</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">body_node</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span>
					<span class="k">return</span> <span class="n">body_node</span>  <span class="c1"># Treat expression as body</span>
			<span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;arrow_function&quot;</span><span class="p">:</span>  <span class="c1"># Direct expression in arrow function</span>
				<span class="k">return</span> <span class="n">body_node</span>
	<span class="c1"># Fallback for classes where body might be direct children within curly braces</span>
	<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;class_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;class_body&quot;</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">child</span>
	<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler.extract_signature" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_signature</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_signature</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract the signature up to the opening curly brace '{' for JS/TS.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Extract the signature up to the opening curly brace &#39;{&#39; for JS/TS.&quot;&quot;&quot;</span>
	<span class="c1"># Find the body node first</span>
	<span class="n">body_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_body_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">body_node</span><span class="p">:</span>
		<span class="c1"># Signature is everything from the start of the node up to the start of the body</span>
		<span class="n">start_byte</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">start_byte</span>
		<span class="n">end_byte</span> <span class="o">=</span> <span class="n">body_node</span><span class="o">.</span><span class="n">start_byte</span>
		<span class="c1"># Adjust end_byte to exclude trailing whitespace before the body</span>
		<span class="k">while</span> <span class="n">end_byte</span> <span class="o">&gt;</span> <span class="n">start_byte</span> <span class="ow">and</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">end_byte</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">isspace</span><span class="p">():</span>
			<span class="n">end_byte</span> <span class="o">-=</span> <span class="mi">1</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">start_byte</span><span class="p">:</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
		<span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="c1"># Fallback: if no body found (e.g., abstract method, interface?), return the first line</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_node_text</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler.get_enclosing_node_of_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_enclosing_node_of_type</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="&lt;span class=&quot;doc doc-object-name doc-class-name&quot;&gt;EntityType&lt;/span&gt; (&lt;code&gt;codemap.processor.tree_sitter.base.EntityType&lt;/code&gt;)" href="#codemap.processor.tree_sitter.base.EntityType">EntityType</a></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Find the first ancestor node matching the target JS/TS entity type.</p>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_enclosing_node_of_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">target_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;Find the first ancestor node matching the target JS/TS entity type.&quot;&quot;&quot;</span>
	<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">if</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">:</span>
		<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;class_expression&quot;</span><span class="p">]</span>
	<span class="k">elif</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">:</span>
		<span class="c1"># Includes function declarations, arrow functions, function expressions</span>
		<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;function_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;arrow_function&quot;</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">]</span>
	<span class="k">elif</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">:</span>
		<span class="n">target_node_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;method_definition&quot;</span><span class="p">]</span>
	<span class="k">elif</span> <span class="n">target_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">:</span>
		<span class="c1"># Module is typically the root &#39;program&#39; node</span>
		<span class="n">current</span> <span class="o">=</span> <span class="n">node</span>
		<span class="k">while</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span><span class="p">:</span>
			<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
		<span class="k">return</span> <span class="n">current</span> <span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;program&quot;</span> <span class="k">else</span> <span class="kc">None</span>
	<span class="c1"># Add other types if needed (e.g., INTERFACE for TS)</span>

	<span class="k">if</span> <span class="ow">not</span> <span class="n">target_node_types</span><span class="p">:</span>
		<span class="k">return</span> <span class="kc">None</span>

	<span class="n">current</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span>
	<span class="k">while</span> <span class="n">current</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">current</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="n">target_node_types</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">current</span>
		<span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">parent</span>
	<span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler.get_children_to_process" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_children_to_process</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_children_to_process</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span> <span class="o">|</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the list of child nodes that should be recursively processed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>body_node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The body node if available</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tree_sitter.Node">Node</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of child nodes to process</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_children_to_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">body_node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Get the list of child nodes that should be recursively processed.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>
<span class="sd">	    body_node: The body node if available</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of child nodes to process</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Process children of the body node if it exists, otherwise process direct children</span>
	<span class="k">if</span> <span class="n">body_node</span><span class="p">:</span>
		<span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">body_node</span><span class="o">.</span><span class="n">children</span><span class="p">)</span>

	<span class="c1"># Special handling for certain nodes</span>
	<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;variable_declaration&quot;</span><span class="p">,</span> <span class="s2">&quot;lexical_declaration&quot;</span><span class="p">]:</span>
		<span class="c1"># Process the declarations field</span>
		<span class="n">declarations</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;declarations&quot;</span><span class="p">)</span>
		<span class="k">return</span> <span class="p">[</span><span class="n">declarations</span><span class="p">]</span> <span class="k">if</span> <span class="n">declarations</span> <span class="k">else</span> <span class="p">[]</span>

	<span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler.should_skip_node" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">should_skip_node</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">should_skip_node</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="bool">bool</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determine if a node should be skipped entirely during processing.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the node should be skipped</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">should_skip_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Determine if a node should be skipped entirely during processing.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node</span>

<span class="sd">	Returns:</span>
<span class="sd">	    True if the node should be skipped</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1"># Skip non-named nodes (like punctuation, operators)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">is_named</span><span class="p">:</span>
		<span class="k">return</span> <span class="kc">True</span>

	<span class="c1"># Skip syntax nodes that don&#39;t contribute to code structure</span>
	<span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;=&gt;&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler.extract_imports" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_imports</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_imports</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract imported module names from a JavaScript import statement.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node representing an import statement</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of imported module names as strings</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract imported module names from a JavaScript import statement.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node representing an import statement</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of imported module names as strings</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">import_</span><span class="p">:</span>
		<span class="k">return</span> <span class="p">[]</span>

	<span class="n">imported_names</span> <span class="o">=</span> <span class="p">[]</span>

	<span class="k">try</span><span class="p">:</span>
		<span class="c1"># Find the source (module path) of the import</span>
		<span class="n">source_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">source_node</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">[]</span>

		<span class="c1"># Extract the module path from the string literal</span>
		<span class="n">module_path</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">source_node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">source_node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
		<span class="c1"># Remove quotes</span>
		<span class="n">module_path</span> <span class="o">=</span> <span class="n">module_path</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

		<span class="c1"># Check for different import patterns:</span>

		<span class="c1"># 1. Default import: &quot;import Name from &#39;module&#39;&quot;</span>
		<span class="n">default_import</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">default_import</span><span class="p">:</span>
			<span class="n">name</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">default_import</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">default_import</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
				<span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span>
			<span class="p">)</span>
			<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_path</span><span class="si">}</span><span class="s2">.default&quot;</span><span class="p">)</span>

		<span class="c1"># 2. Named imports: &quot;import { foo, bar as baz } from &#39;module&#39;&quot;</span>
		<span class="n">named_imports</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;named_imports&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">named_imports</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">named_imports</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;import_specifier&quot;</span><span class="p">:</span>
					<span class="n">imported_name</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">imported_name</span><span class="p">:</span>
						<span class="n">name</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">imported_name</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">imported_name</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
							<span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span>
						<span class="p">)</span>
						<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_path</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

		<span class="c1"># 3. Namespace import: &quot;import * as Name from &#39;module&#39;&quot;</span>
		<span class="n">namespace_import</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;namespace_import&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">namespace_import</span><span class="p">:</span>
			<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">module_path</span><span class="si">}</span><span class="s2">.*&quot;</span><span class="p">)</span>

		<span class="c1"># If no specific imports found but we have a module, add the whole module</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">imported_names</span> <span class="ow">and</span> <span class="n">module_path</span><span class="p">:</span>
			<span class="n">imported_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_path</span><span class="p">)</span>

	<span class="k">except</span> <span class="p">(</span><span class="ne">UnicodeDecodeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to decode JavaScript imports: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

	<span class="k">return</span> <span class="n">imported_names</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h7 id="codemap.processor.tree_sitter.languages.javascript.JavaScriptSyntaxHandler.extract_calls" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_calls</span>


</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_calls</span><span class="p">(</span>
	<span class="n">node</span><span class="p">:</span> <span class="n"><span title="tree_sitter.Node">Node</span></span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="n"><span title="bytes">bytes</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract names of functions/methods called within a JS node's scope.</p>
<p>Recursively searches for 'call_expression' nodes and extracts the function identifier.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="tree_sitter.Node">Node</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The tree-sitter node (e.g., function/method body)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_bytes</code>
            </td>
            <td>
                  <code><span title="bytes">bytes</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Source code content as bytes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of called function/method names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/codemap/processor/tree_sitter/languages/javascript.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_calls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Extract names of functions/methods called within a JS node&#39;s scope.</span>

<span class="sd">	Recursively searches for &#39;call_expression&#39; nodes and extracts the function identifier.</span>

<span class="sd">	Args:</span>
<span class="sd">	    node: The tree-sitter node (e.g., function/method body)</span>
<span class="sd">	    content_bytes: Source code content as bytes</span>

<span class="sd">	Returns:</span>
<span class="sd">	    List of called function/method names</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">calls</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;call_expression&quot;</span><span class="p">:</span>
			<span class="n">function_node</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">child_by_field_name</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">function_node</span><span class="p">:</span>
				<span class="c1"># Extract the identifier (e.g., funcName, obj.methodName)</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">call_name</span> <span class="o">=</span> <span class="n">content_bytes</span><span class="p">[</span><span class="n">function_node</span><span class="o">.</span><span class="n">start_byte</span> <span class="p">:</span> <span class="n">function_node</span><span class="o">.</span><span class="n">end_byte</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
						<span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span>
					<span class="p">)</span>
					<span class="n">calls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">call_name</span><span class="p">)</span>
				<span class="k">except</span> <span class="ne">UnicodeDecodeError</span><span class="p">:</span>
					<span class="k">pass</span>  <span class="c1"># Ignore decoding errors</span>
		<span class="c1"># Recursively search deeper within non-call children</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">calls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extract_calls</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">content_bytes</span><span class="p">))</span>
	<span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">calls</span><span class="p">))</span>  <span class="c1"># Return unique calls</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div>




  </div>

    </div>

</div><p><a href="https://github.com/SarthakMishra/codemap/blob/dev/src/codemap/processor/__init__.py">View Source Code</a></p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../llm/utils/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Utils">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Utils
              </div>
            </div>
          </a>
        
        
          
          <a href="lod/" class="md-footer__link md-footer__link--next" aria-label="Next: Lod">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Lod
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Sarthak Mishra
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/SarthakMishra" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/codemap/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/itssarthakmishra/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/MishraMishry" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "content.tabs.link", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>