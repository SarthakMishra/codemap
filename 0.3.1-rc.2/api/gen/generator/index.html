
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="A CLI tool that generates optimized markdown docs and streamline Git workflows" name="description"/>
<meta content="Sarthak Mishra" name="author"/>
<link href="https://codemap.run/0.3.1-rc.2/api/gen/generator/" rel="canonical"/>
<link href="../command/" rel="prev"/>
<link href="../utils/" rel="next"/>
<link href="../../../assets/codemap_logo.svg" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.12" name="generator"/>
<title>Generator - Codemap</title>
<link href="../../../assets/stylesheets/main.2afb09e1.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Geist:300,300i,400,400i,700,700i%7CGeist+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Geist";--md-code-font:"Geist Mono"}</style>
<link href="../../../assets/_mkdocstrings.css" rel="stylesheet"/>
<link href="../../../stylesheet/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#generator">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
<aside class="md-banner md-banner--warning">
<div class="md-banner__inner md-grid md-typeset">
              
  
  You're not viewing the latest version.
  
  
    You are currently viewing <strong>pre-release</strong> documentation.
  
  <a href="../../../..">
<strong>Click here to go to latest.</strong>
</a>
</div>
<script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
</aside>
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Codemap" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Codemap">
<img alt="logo" src="../../../assets/codemap_logo_white.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Codemap
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Generator
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="deep-orange" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="deep-orange" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to system preference" class="md-option" data-md-color-accent="deep-orange" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="deep-orange" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to system preference">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/SarthakMishra/codemap" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    SarthakMishra/codemap
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Codemap" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Codemap">
<img alt="logo" src="../../../assets/codemap_logo_white.svg"/>
</a>
    Codemap
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/SarthakMishra/codemap" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    SarthakMishra/codemap
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            Home
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../installation/">
<span class="md-ellipsis">
    Installation
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../usage/">
<span class="md-ellipsis">
    Usage
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_3">
<span class="md-nav__icon md-icon"></span>
            Usage
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../usage/generate/">
<span class="md-ellipsis">
    Generate Docs (`gen`)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../usage/commit/">
<span class="md-ellipsis">
    Smart Commit (`commit`)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../usage/pr/">
<span class="md-ellipsis">
    Pull Requests (`pr`)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../usage/configuration/">
<span class="md-ellipsis">
    Configuration (`conf`)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../usage/ask/">
<span class="md-ellipsis">
    Ask Questions (`ask`)
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../contributing/">
<span class="md-ellipsis">
    Contributing
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_4">
<span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributing/guidelines/">
<span class="md-ellipsis">
    Contributing Guidelines
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributing/code-of-conduct/">
<span class="md-ellipsis">
    Code of Conduct
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../acknowledgements/">
<span class="md-ellipsis">
    Acknowledgements
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    API Reference
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../cli/">
<span class="md-ellipsis">
    Cli
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            Cli
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli/ask_cmd/">
<span class="md-ellipsis">
    Ask Cmd
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli/commit_cmd/">
<span class="md-ellipsis">
    Commit Cmd
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli/conf_cmd/">
<span class="md-ellipsis">
    Conf Cmd
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli/gen_cmd/">
<span class="md-ellipsis">
    Gen Cmd
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli/index_cmd/">
<span class="md-ellipsis">
    Index Cmd
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli/pr_cmd/">
<span class="md-ellipsis">
    Pr Cmd
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../config/">
<span class="md-ellipsis">
    Config
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            Config
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../config/config_loader/">
<span class="md-ellipsis">
    Config Loader
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../config/config_schema/">
<span class="md-ellipsis">
    Config Schema
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../config/default_config_template/">
<span class="md-ellipsis">
    Default Config Template
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../db/">
<span class="md-ellipsis">
    Db
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
            Db
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../db/client/">
<span class="md-ellipsis">
    Client
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../db/engine/">
<span class="md-ellipsis">
    Engine
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../db/models/">
<span class="md-ellipsis">
    Models
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    Gen
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_2_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
            Gen
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../command/">
<span class="md-ellipsis">
    Command
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Generator
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Generator
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator">
<span class="md-ellipsis">
      generator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.logger">
<span class="md-ellipsis">
      logger
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.SMALL_RANGE_THRESHOLD">
<span class="md-ellipsis">
      SMALL_RANGE_THRESHOLD
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.MAX_SKELETON_EARLY_CALLS">
<span class="md-ellipsis">
      MAX_SKELETON_EARLY_CALLS
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.CodeMapGenerator">
<span class="md-ellipsis">
      CodeMapGenerator
    </span>
</a>
<nav aria-label="CodeMapGenerator" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.CodeMapGenerator.__init__">
<span class="md-ellipsis">
      __init__
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.CodeMapGenerator.config">
<span class="md-ellipsis">
      config
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.CodeMapGenerator.generate_documentation">
<span class="md-ellipsis">
      generate_documentation
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../utils/">
<span class="md-ellipsis">
    Utils
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../git/">
<span class="md-ellipsis">
    Git
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
            Git
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../git/commit_generator/">
<span class="md-ellipsis">
    Commit Generator
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_6_2" id="__nav_2_6_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_2">
<span class="md-nav__icon md-icon"></span>
            Commit Generator
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/commit_generator/command/">
<span class="md-ellipsis">
    Command
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/commit_generator/generator/">
<span class="md-ellipsis">
    Generator
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/commit_generator/prompts/">
<span class="md-ellipsis">
    Prompts
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/commit_generator/schemas/">
<span class="md-ellipsis">
    Schemas
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/commit_generator/utils/">
<span class="md-ellipsis">
    Utils
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../git/commit_linter/">
<span class="md-ellipsis">
    Commit Linter
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_6_3" id="__nav_2_6_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_3">
<span class="md-nav__icon md-icon"></span>
            Commit Linter
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/commit_linter/config/">
<span class="md-ellipsis">
    Config
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/commit_linter/constants/">
<span class="md-ellipsis">
    Constants
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/commit_linter/linter/">
<span class="md-ellipsis">
    Linter
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/commit_linter/parser/">
<span class="md-ellipsis">
    Parser
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/commit_linter/validators/">
<span class="md-ellipsis">
    Validators
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../git/diff_splitter/">
<span class="md-ellipsis">
    Diff Splitter
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_6_4" id="__nav_2_6_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_4">
<span class="md-nav__icon md-icon"></span>
            Diff Splitter
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/diff_splitter/constants/">
<span class="md-ellipsis">
    Constants
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/diff_splitter/schemas/">
<span class="md-ellipsis">
    Schemas
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/diff_splitter/splitter/">
<span class="md-ellipsis">
    Splitter
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/diff_splitter/strategies/">
<span class="md-ellipsis">
    Strategies
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/diff_splitter/utils/">
<span class="md-ellipsis">
    Utils
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/interactive/">
<span class="md-ellipsis">
    Interactive
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../git/pr_generator/">
<span class="md-ellipsis">
    Pr Generator
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_6_6" id="__nav_2_6_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_6_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_6">
<span class="md-nav__icon md-icon"></span>
            Pr Generator
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/pr_generator/command/">
<span class="md-ellipsis">
    Command
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/pr_generator/constants/">
<span class="md-ellipsis">
    Constants
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/pr_generator/decorators/">
<span class="md-ellipsis">
    Decorators
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/pr_generator/generator/">
<span class="md-ellipsis">
    Generator
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/pr_generator/pr_git_utils/">
<span class="md-ellipsis">
    Pr Git Utils
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/pr_generator/prompts/">
<span class="md-ellipsis">
    Prompts
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/pr_generator/schemas/">
<span class="md-ellipsis">
    Schemas
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/pr_generator/strategies/">
<span class="md-ellipsis">
    Strategies
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/pr_generator/templates/">
<span class="md-ellipsis">
    Templates
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/pr_generator/utils/">
<span class="md-ellipsis">
    Utils
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../git/semantic_grouping/">
<span class="md-ellipsis">
    Semantic Grouping
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_6_7" id="__nav_2_6_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_7_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_7">
<span class="md-nav__icon md-icon"></span>
            Semantic Grouping
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/semantic_grouping/clusterer/">
<span class="md-ellipsis">
    Clusterer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/semantic_grouping/context_processor/">
<span class="md-ellipsis">
    Context Processor
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/semantic_grouping/embedder/">
<span class="md-ellipsis">
    Embedder
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/semantic_grouping/group/">
<span class="md-ellipsis">
    Group
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/semantic_grouping/resolver/">
<span class="md-ellipsis">
    Resolver
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../git/utils/">
<span class="md-ellipsis">
    Utils
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../llm/">
<span class="md-ellipsis">
    Llm
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_7">
<span class="md-nav__icon md-icon"></span>
            Llm
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/api/">
<span class="md-ellipsis">
    Api
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/client/">
<span class="md-ellipsis">
    Client
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/errors/">
<span class="md-ellipsis">
    Errors
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_7_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../llm/rag/">
<span class="md-ellipsis">
    Rag
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_7_5" id="__nav_2_7_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_7_5_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_7_5">
<span class="md-nav__icon md-icon"></span>
            Rag
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/rag/agents/">
<span class="md-ellipsis">
    Agents Overview
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_7_5_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../llm/rag/ask/">
<span class="md-ellipsis">
    Ask
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_7_5_3" id="__nav_2_7_5_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_7_5_3_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_2_7_5_3">
<span class="md-nav__icon md-icon"></span>
            Ask
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/rag/ask/command/">
<span class="md-ellipsis">
    Command
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/rag/ask/prompts/">
<span class="md-ellipsis">
    Prompts
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/rag/do/">
<span class="md-ellipsis">
    Do Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/rag/interactive/">
<span class="md-ellipsis">
    Interactive
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_7_5_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../llm/rag/tools/">
<span class="md-ellipsis">
    Tools
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_7_5_6" id="__nav_2_7_5_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_7_5_6_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_2_7_5_6">
<span class="md-nav__icon md-icon"></span>
            Tools
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/rag/tools/read_file/">
<span class="md-ellipsis">
    Read File
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/rag/tools/semantic_retrieval/">
<span class="md-ellipsis">
    Semantic Retrieval
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/rag/tools/web_search/">
<span class="md-ellipsis">
    Web Search
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../llm/utils/">
<span class="md-ellipsis">
    Utils
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../processor/">
<span class="md-ellipsis">
    Processor
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_8">
<span class="md-nav__icon md-icon"></span>
            Processor
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/hash_calculation/">
<span class="md-ellipsis">
    Hash Calculation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/lod/">
<span class="md-ellipsis">
    Lod
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/pipeline/">
<span class="md-ellipsis">
    Pipeline
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_8_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../processor/tree_sitter/">
<span class="md-ellipsis">
    Tree Sitter
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_8_5" id="__nav_2_8_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_8_5_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_8_5">
<span class="md-nav__icon md-icon"></span>
            Tree Sitter
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/tree_sitter/analyzer/">
<span class="md-ellipsis">
    Analyzer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/tree_sitter/base/">
<span class="md-ellipsis">
    Base
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_8_5_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../processor/tree_sitter/languages/">
<span class="md-ellipsis">
    Languages
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_8_5_4" id="__nav_2_8_5_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_8_5_4_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_2_8_5_4">
<span class="md-nav__icon md-icon"></span>
            Languages
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/tree_sitter/languages/base/">
<span class="md-ellipsis">
    Base
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/tree_sitter/languages/javascript/">
<span class="md-ellipsis">
    Javascript
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/tree_sitter/languages/python/">
<span class="md-ellipsis">
    Python
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/tree_sitter/languages/typescript/">
<span class="md-ellipsis">
    Typescript
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_8_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../processor/utils/">
<span class="md-ellipsis">
    Utils
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_8_6" id="__nav_2_8_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_8_6_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_8_6">
<span class="md-nav__icon md-icon"></span>
            Utils
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/utils/embedding_utils/">
<span class="md-ellipsis">
    Embedding Utils
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/utils/sync_utils/">
<span class="md-ellipsis">
    Sync Utils
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_8_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../processor/vector/">
<span class="md-ellipsis">
    Vector
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_8_7" id="__nav_2_8_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_8_7_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_8_7">
<span class="md-nav__icon md-icon"></span>
            Vector
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/vector/chunking/">
<span class="md-ellipsis">
    Chunking
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/vector/qdrant_manager/">
<span class="md-ellipsis">
    Qdrant Manager
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/vector/schema/">
<span class="md-ellipsis">
    Schema
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/vector/synchronizer/">
<span class="md-ellipsis">
    Synchronizer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../processor/vector/utils/">
<span class="md-ellipsis">
    Utils
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_9" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../utils/">
<span class="md-ellipsis">
    Utils
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_9">
<span class="md-nav__icon md-icon"></span>
            Utils
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../utils/cli_utils/">
<span class="md-ellipsis">
    Cli Utils
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../utils/docker_utils/">
<span class="md-ellipsis">
    Docker Utils
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../utils/file_utils/">
<span class="md-ellipsis">
    File Utils
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../utils/git_hooks/">
<span class="md-ellipsis">
    Git Hooks
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../utils/git_utils/">
<span class="md-ellipsis">
    Git Utils
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../utils/log_setup/">
<span class="md-ellipsis">
    Log Setup
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../utils/path_utils/">
<span class="md-ellipsis">
    Path Utils
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_10" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../watcher/">
<span class="md-ellipsis">
    Watcher
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_10">
<span class="md-nav__icon md-icon"></span>
            Watcher
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../watcher/file_watcher/">
<span class="md-ellipsis">
    File Watcher
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator">
<span class="md-ellipsis">
      generator
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.logger">
<span class="md-ellipsis">
      logger
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.SMALL_RANGE_THRESHOLD">
<span class="md-ellipsis">
      SMALL_RANGE_THRESHOLD
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.MAX_SKELETON_EARLY_CALLS">
<span class="md-ellipsis">
      MAX_SKELETON_EARLY_CALLS
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.CodeMapGenerator">
<span class="md-ellipsis">
      CodeMapGenerator
    </span>
</a>
<nav aria-label="CodeMapGenerator" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.CodeMapGenerator.__init__">
<span class="md-ellipsis">
      __init__
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.CodeMapGenerator.config">
<span class="md-ellipsis">
      config
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codemap.gen.generator.CodeMapGenerator.generate_documentation">
<span class="md-ellipsis">
      generate_documentation
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/SarthakMishra/codemap/raw/master/docs/api/gen/generator.md" title="View source of this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
</a>
<h1 id="generator">Generator</h1>
<div class="doc doc-object doc-module">
<a id="codemap.gen.generator"></a>
<div class="doc doc-contents first">
<p>Code documentation generator implementation.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h3 class="doc doc-heading" id="codemap.gen.generator.logger">
<span class="doc doc-object-name doc-attribute-name">logger</span>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
</span>
</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><span title="logging.getLogger">getLogger</span></span><span class="p">(</span><span class="n"><span title="__name__">__name__</span></span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
</div>
</div>
<div class="doc doc-object doc-attribute">
<h3 class="doc doc-heading" id="codemap.gen.generator.SMALL_RANGE_THRESHOLD">
<span class="doc doc-object-name doc-attribute-name">SMALL_RANGE_THRESHOLD</span>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
</span>
</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">SMALL_RANGE_THRESHOLD</span> <span class="o">=</span> <span class="mi">5</span>
</code></pre></div>
<div class="doc doc-contents">
</div>
</div>
<div class="doc doc-object doc-attribute">
<h3 class="doc doc-heading" id="codemap.gen.generator.MAX_SKELETON_EARLY_CALLS">
<span class="doc doc-object-name doc-attribute-name">MAX_SKELETON_EARLY_CALLS</span>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
</span>
</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">MAX_SKELETON_EARLY_CALLS</span> <span class="o">=</span> <span class="mi">5</span>
</code></pre></div>
<div class="doc doc-contents">
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="codemap.gen.generator.CodeMapGenerator">
<span class="doc doc-object-name doc-class-name">CodeMapGenerator</span>
</h3>
<div class="doc doc-contents">
<p>Generates code documentation based on LOD (Level of Detail).</p>
<details class="quote">
<summary>Source code in <code>src/codemap/gen/generator.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 100</span>
<span class="normal"> 101</span>
<span class="normal"> 102</span>
<span class="normal"> 103</span>
<span class="normal"> 104</span>
<span class="normal"> 105</span>
<span class="normal"> 106</span>
<span class="normal"> 107</span>
<span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">CodeMapGenerator</span><span class="p">:</span>
<span class="w">	</span><span class="sd">"""Generates code documentation based on LOD (Level of Detail)."""</span>

	<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">GenSchema</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">"""</span>
<span class="sd">		Initialize the code map generator.</span>

<span class="sd">		Args:</span>
<span class="sd">		    config: Generation configuration settings</span>

<span class="sd">		"""</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">_generate_mermaid_diagram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entities</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">LODEntity</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">"""Generate a Mermaid diagram string for entity relationships using subgraphs."""</span>
		<span class="c1"># Convert config strings to lower case for case-insensitive comparison</span>
		<span class="n">allowed_entities</span> <span class="o">=</span> <span class="p">{</span><span class="n">e</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_entities</span><span class="p">}</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_entities</span> <span class="k">else</span> <span class="kc">None</span>
		<span class="n">allowed_relationships</span> <span class="o">=</span> <span class="p">(</span>
			<span class="p">{</span><span class="n">r</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_relationships</span><span class="p">}</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_relationships</span> <span class="k">else</span> <span class="kc">None</span>
		<span class="p">)</span>

		<span class="c1"># Helper to check if an entity type should be included</span>
		<span class="k">def</span><span class="w"> </span><span class="nf">should_include_entity</span><span class="p">(</span><span class="n">entity_type</span><span class="p">:</span> <span class="n">EntityType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">			</span><span class="sd">"""Determines if an entity type should be included in the diagram based on allowed entities.</span>

<span class="sd">			If no allowed entities are specified in the config, all entities will be included. Otherwise,</span>
<span class="sd">			only entities whose type matches one of the allowed entity types will be included.</span>

<span class="sd">			Args:</span>
<span class="sd">				entity_type: The type of entity to check for inclusion.</span>

<span class="sd">			Returns:</span>
<span class="sd">				bool: True if the entity should be included, False otherwise.</span>
<span class="sd">			"""</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">allowed_entities</span><span class="p">:</span>
				<span class="k">return</span> <span class="kc">True</span>  <span class="c1"># Include all if not specified</span>
			<span class="k">return</span> <span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_entities</span>

		<span class="k">def</span><span class="w"> </span><span class="nf">should_include_relationship</span><span class="p">(</span><span class="n">relationship_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">			</span><span class="sd">"""Determines if a relationship type should be included in the diagram based on allowed relationships.</span>

<span class="sd">			If no allowed relationships are specified in the config, all relationships will be included. Otherwise,</span>
<span class="sd">			only relationships whose type matches one of the allowed relationship types will be included.</span>

<span class="sd">			Args:</span>
<span class="sd">				relationship_type: The type of relationship to check for inclusion.</span>

<span class="sd">			Returns:</span>
<span class="sd">				bool: True if the relationship should be included, False otherwise.</span>
<span class="sd">			"""</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">allowed_relationships</span><span class="p">:</span>
				<span class="k">return</span> <span class="kc">True</span>  <span class="c1"># Include all if not specified</span>
			<span class="k">return</span> <span class="n">relationship_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">allowed_relationships</span>

		<span class="c1"># --- Data Structures --- #</span>
		<span class="c1"># node_id -&gt; (definition_line, class_name) for regular nodes</span>
		<span class="n">node_definitions</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="c1"># subgraph_id -&gt; (label, type, list_of_contained_node_ids)</span>
		<span class="n">subgraph_definitions</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="c1"># subgraph_id -&gt; parent_subgraph_id (for nesting)</span>
		<span class="n">subgraph_hierarchy</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="c1"># Edges (parent_id, child_id, label, type)</span>
		<span class="n">edges</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="c1"># Track processed entities/subgraphs to avoid duplicates</span>
		<span class="n">processed_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
		<span class="c1"># Map entity ID to entity object</span>
		<span class="n">entity_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">LODEntity</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="c1"># Track which nodes/subgraphs are connected by edges</span>
		<span class="n">connected_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
		<span class="c1"># Map simple function/method names to their full node IDs</span>
		<span class="n">name_to_node_ids</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="c1"># Keep track of nodes defined outside any subgraph (like external imports)</span>
		<span class="n">global_nodes</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
		<span class="c1"># Node ID counter for generating short, sequential IDs</span>
		<span class="n">node_id_counter</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"count"</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
		<span class="c1"># Subgraph ID counter for generating short subgraph IDs</span>
		<span class="n">subgraph_id_counter</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"count"</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
		<span class="c1"># Mapping from short node ID to entity info for debugging/comments</span>
		<span class="n">node_id_to_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="c1"># Map entity unique IDs to their assigned node IDs to prevent duplicates</span>
		<span class="n">entity_to_node_id</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># entity_unique_id -&gt; node_id</span>

		<span class="n">internal_paths</span> <span class="o">=</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"file_path"</span><span class="p">))</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">entities</span> <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"file_path"</span><span class="p">)}</span>

		<span class="k">def</span><span class="w"> </span><span class="nf">get_entity_unique_id</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">LODEntity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">			</span><span class="sd">"""Generate a unique identifier for an entity based on its properties."""</span>
			<span class="n">file_path</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"file_path"</span><span class="p">,</span> <span class="s2">"unknown"</span><span class="p">)</span>
			<span class="n">name</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">""</span>
			<span class="n">entity_type</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span><span class="o">.</span><span class="n">name</span>
			<span class="n">start_line</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">start_line</span>
			<span class="n">end_line</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">end_line</span>
			<span class="k">return</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">start_line</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">end_line</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span>

		<span class="k">def</span><span class="w"> </span><span class="nf">get_node_id</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">LODEntity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">			</span><span class="sd">"""Generates a short, unique node ID for an entity in Mermaid diagram format.</span>

<span class="sd">			Uses sequential numbering (n1, n2, n3, etc.) to keep node IDs clean and readable.</span>
<span class="sd">			The full path and entity information is preserved in comments and labels.</span>
<span class="sd">			Returns the existing ID if the entity has already been assigned one.</span>

<span class="sd">			Args:</span>
<span class="sd">				entity: The entity to generate an ID for.</span>

<span class="sd">			Returns:</span>
<span class="sd">				str: A short Mermaid-compatible node ID string like 'n1', 'n2', etc.</span>
<span class="sd">			"""</span>
			<span class="c1"># Check if this entity already has an assigned node ID</span>
			<span class="n">entity_unique_id</span> <span class="o">=</span> <span class="n">get_entity_unique_id</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">entity_unique_id</span> <span class="ow">in</span> <span class="n">entity_to_node_id</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">entity_to_node_id</span><span class="p">[</span><span class="n">entity_unique_id</span><span class="p">]</span>

			<span class="n">node_id_counter</span><span class="p">[</span><span class="s2">"count"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
			<span class="n">short_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"n</span><span class="si">{</span><span class="n">node_id_counter</span><span class="p">[</span><span class="s1">'count'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>

			<span class="c1"># Store the mapping to prevent duplicates</span>
			<span class="n">entity_to_node_id</span><span class="p">[</span><span class="n">entity_unique_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">short_id</span>

			<span class="c1"># Store mapping for debugging/comments</span>
			<span class="n">file_path</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"file_path"</span><span class="p">,</span> <span class="s2">"unknown_file"</span><span class="p">)</span>
			<span class="n">name</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span><span class="o">.</span><span class="n">name</span>
			<span class="n">node_id_to_info</span><span class="p">[</span><span class="n">short_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">start_line</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>

			<span class="k">return</span> <span class="n">short_id</span>

		<span class="k">def</span><span class="w"> </span><span class="nf">get_subgraph_id</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">LODEntity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">			</span><span class="sd">"""Generates a short, unique subgraph ID for modules and classes.</span>

<span class="sd">			Returns the existing ID if the entity has already been assigned one.</span>

<span class="sd">			Args:</span>
<span class="sd">				entity: The entity to generate a subgraph ID for.</span>

<span class="sd">			Returns:</span>
<span class="sd">				str: A short subgraph ID like 'sg1', 'sg2', etc.</span>
<span class="sd">			"""</span>
			<span class="c1"># Check if this entity already has an assigned node ID</span>
			<span class="n">entity_unique_id</span> <span class="o">=</span> <span class="n">get_entity_unique_id</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">entity_unique_id</span> <span class="ow">in</span> <span class="n">entity_to_node_id</span><span class="p">:</span>
				<span class="k">return</span> <span class="n">entity_to_node_id</span><span class="p">[</span><span class="n">entity_unique_id</span><span class="p">]</span>

			<span class="n">subgraph_id_counter</span><span class="p">[</span><span class="s2">"count"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
			<span class="n">short_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"sg</span><span class="si">{</span><span class="n">subgraph_id_counter</span><span class="p">[</span><span class="s1">'count'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>

			<span class="c1"># Store the mapping to prevent duplicates</span>
			<span class="n">entity_to_node_id</span><span class="p">[</span><span class="n">entity_unique_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">short_id</span>

			<span class="k">return</span> <span class="n">short_id</span>

		<span class="k">def</span><span class="w"> </span><span class="nf">process_entity_recursive</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">LODEntity</span><span class="p">,</span> <span class="n">current_subgraph_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">			</span><span class="sd">"""Recursively processes an entity to build Mermaid diagram components.</span>

<span class="sd">			This function handles:</span>
<span class="sd">			- Creating subgraphs for modules and classes</span>
<span class="sd">			- Creating nodes for functions, methods, variables and constants</span>
<span class="sd">			- Processing dependencies (imports)</span>
<span class="sd">			- Establishing relationships between entities</span>
<span class="sd">			- Recursively processing child entities</span>

<span class="sd">			Args:</span>
<span class="sd">				entity: The entity to process</span>
<span class="sd">				current_subgraph_id: The ID of the current subgraph context (if any)</span>

<span class="sd">			Returns:</span>
<span class="sd">				None: Modifies various data structures in the closure:</span>
<span class="sd">					- node_definitions: Dictionary of node definitions</span>
<span class="sd">					- subgraph_definitions: Dictionary of subgraph definitions</span>
<span class="sd">					- subgraph_hierarchy: Dictionary of subgraph parent-child relationships</span>
<span class="sd">					- edges: List of edges between nodes/subgraphs</span>
<span class="sd">					- processed_ids: Set of processed entity IDs</span>
<span class="sd">					- entity_map: Dictionary mapping node IDs to entities</span>
<span class="sd">					- connected_ids: Set of connected node/subgraph IDs</span>
<span class="sd">					- name_to_node_ids: Dictionary mapping names to node IDs</span>
<span class="sd">					- global_nodes: Set of nodes defined outside subgraphs</span>
<span class="sd">			"""</span>
			<span class="k">nonlocal</span> <span class="n">processed_ids</span><span class="p">,</span> <span class="n">connected_ids</span><span class="p">,</span> <span class="n">global_nodes</span>

			<span class="c1"># Use different ID generation for subgraphs vs nodes</span>
			<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">):</span>
				<span class="n">entity_node_id</span> <span class="o">=</span> <span class="n">get_subgraph_id</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">entity_node_id</span> <span class="o">=</span> <span class="n">get_node_id</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

			<span class="c1"># Skip if already processed, but allow UNKNOWN entities to process their children</span>
			<span class="k">if</span> <span class="n">entity_node_id</span> <span class="ow">in</span> <span class="n">processed_ids</span><span class="p">:</span>
				<span class="k">return</span>

			<span class="c1"># For UNKNOWN entities, skip creating nodes but still process children</span>
			<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
				<span class="n">processed_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">entity_node_id</span><span class="p">)</span>
				<span class="c1"># Process children recursively even for UNKNOWN entities</span>
				<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">):</span>
					<span class="n">process_entity_recursive</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">current_subgraph_id</span><span class="p">)</span>
				<span class="k">return</span>

			<span class="n">processed_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">entity_node_id</span><span class="p">)</span>
			<span class="n">entity_map</span><span class="p">[</span><span class="n">entity_node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span>
			<span class="n">include_this_entity</span> <span class="o">=</span> <span class="n">should_include_entity</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span><span class="p">)</span>

			<span class="n">next_subgraph_id</span> <span class="o">=</span> <span class="n">current_subgraph_id</span>

			<span class="c1"># --- Handle Subgraphs (Module, Class) --- #</span>
			<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">)</span> <span class="ow">and</span> <span class="n">include_this_entity</span><span class="p">:</span>
				<span class="n">subgraph_label</span> <span class="o">=</span> <span class="n">_escape_mermaid_label</span><span class="p">(</span>
					<span class="n">entity</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="n">Path</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"file_path"</span><span class="p">,</span> <span class="s2">"unknown"</span><span class="p">))</span><span class="o">.</span><span class="n">name</span>
				<span class="p">)</span>
				<span class="n">subgraph_type</span> <span class="o">=</span> <span class="s2">"moduleSubgraph"</span> <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span> <span class="k">else</span> <span class="s2">"classSubgraph"</span>
				<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span> <span class="ow">and</span> <span class="n">current_subgraph_id</span><span class="p">:</span>  <span class="c1"># Nested module</span>
					<span class="n">subgraph_type</span> <span class="o">=</span> <span class="s2">"submoduleSubgraph"</span>

				<span class="n">subgraph_definitions</span><span class="p">[</span><span class="n">entity_node_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">subgraph_label</span><span class="p">,</span> <span class="n">subgraph_type</span><span class="p">,</span> <span class="p">[])</span>
				<span class="k">if</span> <span class="n">current_subgraph_id</span><span class="p">:</span>
					<span class="n">subgraph_hierarchy</span><span class="p">[</span><span class="n">entity_node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_subgraph_id</span>
				<span class="c1"># Mark the container as potentially connected if it has children or dependencies</span>
				<span class="n">connected_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">entity_node_id</span><span class="p">)</span>
				<span class="n">next_subgraph_id</span> <span class="o">=</span> <span class="n">entity_node_id</span>  <span class="c1"># Children belong to this new subgraph</span>

			<span class="c1"># --- Handle Nodes (Functions, Methods, Vars, Consts, Imports) --- #</span>
			<span class="k">elif</span> <span class="n">include_this_entity</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span><span class="p">:</span>  <span class="c1"># Imports handled separately</span>
				<span class="n">node_definition</span> <span class="o">=</span> <span class="s2">""</span>
				<span class="n">node_class</span> <span class="o">=</span> <span class="s2">""</span>
				<span class="n">entity_type_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
				<span class="n">label</span> <span class="o">=</span> <span class="n">_escape_mermaid_label</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">"(</span><span class="si">{</span><span class="n">entity_type_name</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>

				<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">):</span>
					<span class="n">node_definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">entity_node_id</span><span class="si">}</span><span class="s1">("</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s1">")'</span>
					<span class="n">node_class</span> <span class="o">=</span> <span class="s2">"funcNode"</span>
				<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span><span class="p">:</span>
					<span class="n">node_definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">entity_node_id</span><span class="si">}</span><span class="s1">["</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s1">"]'</span>
					<span class="n">node_class</span> <span class="o">=</span> <span class="s2">"constNode"</span>
				<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span><span class="p">:</span>
					<span class="n">node_definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">entity_node_id</span><span class="si">}</span><span class="s1">["</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s1">"]'</span>
					<span class="n">node_class</span> <span class="o">=</span> <span class="s2">"varNode"</span>
				<span class="c1"># Add other types if needed</span>

				<span class="k">if</span> <span class="n">node_definition</span> <span class="ow">and</span> <span class="n">entity_node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">node_definitions</span><span class="p">:</span>
					<span class="n">node_definitions</span><span class="p">[</span><span class="n">entity_node_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">node_definition</span><span class="p">,</span> <span class="n">node_class</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">current_subgraph_id</span><span class="p">:</span>
						<span class="n">subgraph_definitions</span><span class="p">[</span><span class="n">current_subgraph_id</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity_node_id</span><span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="c1"># Should not happen often if root is module, but handle just in case</span>
						<span class="n">global_nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">entity_node_id</span><span class="p">)</span>

			<span class="c1"># --- Add to Name Map (for call edges) --- #</span>
			<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">):</span>
				<span class="n">name</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">name</span>
				<span class="k">if</span> <span class="n">name</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">name_to_node_ids</span><span class="p">:</span>
						<span class="n">name_to_node_ids</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
					<span class="n">name_to_node_ids</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity_node_id</span><span class="p">)</span>

			<span class="c1"># --- Process Dependencies (Imports) --- #</span>
			<span class="n">dependencies</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"dependencies"</span><span class="p">,</span> <span class="p">[])</span>
			<span class="c1"># Imports are associated with the module/class they are in, or globally if nowhere else</span>

			<span class="k">if</span> <span class="n">dependencies</span> <span class="ow">and</span> <span class="n">should_include_relationship</span><span class="p">(</span><span class="s2">"imports"</span><span class="p">):</span>
				<span class="k">for</span> <span class="n">dep</span> <span class="ow">in</span> <span class="n">dependencies</span><span class="p">:</span>
					<span class="n">is_external</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">dep</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"."</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span>
						<span class="n">dep</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"</span><span class="se">\\</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"/"</span><span class="p">))</span>
						<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">internal_paths</span>
						<span class="k">if</span> <span class="n">p</span>  <span class="c1"># Handle path separators</span>
					<span class="p">)</span>
					<span class="n">dep_id</span> <span class="o">=</span> <span class="s2">"dep_"</span> <span class="o">+</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">"_"</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">dep</span><span class="p">)</span>
					<span class="n">dep_label</span> <span class="o">=</span> <span class="n">_escape_mermaid_label</span><span class="p">(</span><span class="n">dep</span><span class="p">)</span>

					<span class="k">if</span> <span class="n">dep_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">node_definitions</span> <span class="ow">and</span> <span class="n">dep_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">processed_ids</span><span class="p">:</span>
						<span class="n">processed_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dep_id</span><span class="p">)</span>  <span class="c1"># Mark as processed to avoid duplicate definitions</span>
						<span class="n">dep_class</span> <span class="o">=</span> <span class="s2">"externalImportNode"</span> <span class="k">if</span> <span class="n">is_external</span> <span class="k">else</span> <span class="s2">"internalImportNode"</span>
						<span class="n">node_shape</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">'(("</span><span class="si">{</span><span class="n">dep_label</span><span class="si">}</span><span class="s1">"))'</span> <span class="k">if</span> <span class="n">is_external</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">'["</span><span class="si">{</span><span class="n">dep_label</span><span class="si">}</span><span class="s1">"]'</span>
						<span class="n">node_definitions</span><span class="p">[</span><span class="n">dep_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">dep_id</span><span class="si">}{</span><span class="n">node_shape</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">dep_class</span><span class="p">)</span>
						<span class="n">global_nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dep_id</span><span class="p">)</span>  <span class="c1"># Imports are defined globally</span>

					<span class="c1"># Add edge from the importing *container* (subgraph) to the dependency</span>
					<span class="c1"># Use the entity_node_id of the *module* or *class* for the source of the import edge</span>
					<span class="n">source_node_id</span> <span class="o">=</span> <span class="p">(</span>
						<span class="n">entity_node_id</span>
						<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">)</span>
						<span class="k">else</span> <span class="n">current_subgraph_id</span>
					<span class="p">)</span>
					<span class="k">if</span> <span class="n">source_node_id</span> <span class="ow">and</span> <span class="n">source_node_id</span> <span class="o">!=</span> <span class="n">dep_id</span><span class="p">:</span>  <span class="c1"># Check source_node_id validity</span>
						<span class="n">edge_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="n">source_node_id</span><span class="p">,</span> <span class="n">dep_id</span><span class="p">,</span> <span class="s2">"imports"</span><span class="p">,</span> <span class="s2">"import"</span><span class="p">)</span>
						<span class="k">if</span> <span class="n">edge_tuple</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
							<span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge_tuple</span><span class="p">)</span>
							<span class="n">connected_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">source_node_id</span><span class="p">)</span>
							<span class="n">connected_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dep_id</span><span class="p">)</span>

			<span class="c1"># --- Process Children Recursively and track their node IDs --- #</span>
			<span class="n">child_node_ids</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Track child node IDs for declare edges</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">):</span>
				<span class="c1"># Determine what the child's node ID would be before processing</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">):</span>
					<span class="n">child_node_id</span> <span class="o">=</span> <span class="n">get_subgraph_id</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">child_node_id</span> <span class="o">=</span> <span class="n">get_node_id</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>

				<span class="c1"># Store the child node ID for declare edges (before processing to avoid duplicates)</span>
				<span class="n">child_node_ids</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">child</span><span class="p">,</span> <span class="n">child_node_id</span><span class="p">))</span>

				<span class="c1"># Now process the child recursively</span>
				<span class="n">process_entity_recursive</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">next_subgraph_id</span><span class="p">)</span>

			<span class="c1"># --- Define Parent Edges (Declares) using tracked child node IDs --- #</span>
			<span class="k">for</span> <span class="n">child</span><span class="p">,</span> <span class="n">child_node_id</span> <span class="ow">in</span> <span class="n">child_node_ids</span><span class="p">:</span>
				<span class="k">if</span> <span class="p">(</span>
					<span class="n">next_subgraph_id</span>  <span class="c1"># Ensure there is a parent subgraph</span>
					<span class="ow">and</span> <span class="n">child</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span>
					<span class="ow">and</span> <span class="n">child_node_id</span> <span class="ow">in</span> <span class="n">processed_ids</span>  <span class="c1"># Ensure child was processed (not filtered out)</span>
					<span class="ow">and</span> <span class="n">should_include_relationship</span><span class="p">(</span><span class="s2">"declares"</span><span class="p">)</span>
				<span class="p">):</span>
					<span class="c1"># Only add edge if child is *directly* contained (node or subgraph)</span>
					<span class="n">is_child_node</span> <span class="o">=</span> <span class="n">child_node_id</span> <span class="ow">in</span> <span class="n">node_definitions</span>
					<span class="n">is_child_subgraph</span> <span class="o">=</span> <span class="n">child_node_id</span> <span class="ow">in</span> <span class="n">subgraph_definitions</span>

					<span class="k">if</span> <span class="n">is_child_node</span> <span class="ow">or</span> <span class="n">is_child_subgraph</span><span class="p">:</span>
						<span class="n">edge_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="n">next_subgraph_id</span><span class="p">,</span> <span class="n">child_node_id</span><span class="p">,</span> <span class="s2">"declares"</span><span class="p">,</span> <span class="s2">"declare"</span><span class="p">)</span>
						<span class="k">if</span> <span class="n">edge_tuple</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
							<span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge_tuple</span><span class="p">)</span>
							<span class="n">connected_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">next_subgraph_id</span><span class="p">)</span>
							<span class="n">connected_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">child_node_id</span><span class="p">)</span>

		<span class="c1"># --- Main Processing Loop --- #</span>
		<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
			<span class="c1"># Start processing from top-level modules</span>
			<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"file_path"</span><span class="p">):</span>
				<span class="n">process_entity_recursive</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">current_subgraph_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

		<span class="c1"># --- Define Call Edges --- #</span>
		<span class="k">if</span> <span class="n">should_include_relationship</span><span class="p">(</span><span class="s2">"calls"</span><span class="p">):</span>
			<span class="k">for</span> <span class="n">caller_node_id</span><span class="p">,</span> <span class="n">caller_entity</span> <span class="ow">in</span> <span class="n">entity_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="c1"># Check if the caller is a function/method node that was actually defined</span>
				<span class="k">if</span> <span class="n">caller_node_id</span> <span class="ow">in</span> <span class="n">node_definitions</span> <span class="ow">and</span> <span class="n">caller_entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span>
					<span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span>
					<span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">,</span>
				<span class="p">):</span>
					<span class="n">calls</span> <span class="o">=</span> <span class="n">caller_entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"calls"</span><span class="p">,</span> <span class="p">[])</span>
					<span class="k">for</span> <span class="n">called_name</span> <span class="ow">in</span> <span class="n">calls</span><span class="p">:</span>
						<span class="c1"># Try matching full name first, then simple name</span>
						<span class="n">possible_target_ids</span> <span class="o">=</span> <span class="p">[]</span>
						<span class="k">if</span> <span class="p">(</span>
							<span class="n">called_name</span> <span class="ow">in</span> <span class="n">name_to_node_ids</span>
						<span class="p">):</span>  <span class="c1"># Full name match? (e.g., class.method) - Less likely with simple parsing</span>
							<span class="n">possible_target_ids</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">name_to_node_ids</span><span class="p">[</span><span class="n">called_name</span><span class="p">])</span>
						<span class="k">else</span><span class="p">:</span>
							<span class="n">simple_called_name</span> <span class="o">=</span> <span class="n">called_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"."</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
							<span class="k">if</span> <span class="n">simple_called_name</span> <span class="ow">in</span> <span class="n">name_to_node_ids</span><span class="p">:</span>
								<span class="n">possible_target_ids</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">name_to_node_ids</span><span class="p">[</span><span class="n">simple_called_name</span><span class="p">])</span>

						<span class="k">for</span> <span class="n">target_node_id</span> <span class="ow">in</span> <span class="n">possible_target_ids</span><span class="p">:</span>
							<span class="c1"># Ensure target is also a defined node and not the caller itself</span>
							<span class="k">if</span> <span class="n">target_node_id</span> <span class="ow">in</span> <span class="n">node_definitions</span> <span class="ow">and</span> <span class="n">caller_node_id</span> <span class="o">!=</span> <span class="n">target_node_id</span><span class="p">:</span>
								<span class="n">edge_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="n">caller_node_id</span><span class="p">,</span> <span class="n">target_node_id</span><span class="p">,</span> <span class="s2">"calls"</span><span class="p">,</span> <span class="s2">"call"</span><span class="p">)</span>
								<span class="k">if</span> <span class="n">edge_tuple</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
									<span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge_tuple</span><span class="p">)</span>
									<span class="n">connected_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">caller_node_id</span><span class="p">)</span>
									<span class="n">connected_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">target_node_id</span><span class="p">)</span>

		<span class="c1"># --- Assemble Final Mermaid String --- #</span>
		<span class="n">mermaid_lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"graph LR"</span><span class="p">]</span>  <span class="c1"># Or TD for Top-Down if preferred</span>

		<span class="c1"># --- Define Style Classes ---</span>
		<span class="n">style_map</span> <span class="o">=</span> <span class="p">{</span>
			<span class="c1"># Node Styles</span>
			<span class="s2">"funcNode"</span><span class="p">:</span> <span class="s2">"fill:#007bff,stroke:#FFF,stroke-width:1px,color:white"</span><span class="p">,</span>  <span class="c1"># Blue</span>
			<span class="s2">"constNode"</span><span class="p">:</span> <span class="s2">"fill:#6f42c1,stroke:#FFF,stroke-width:1px,color:white"</span><span class="p">,</span>  <span class="c1"># Purple</span>
			<span class="s2">"varNode"</span><span class="p">:</span> <span class="s2">"fill:#fd7e14,stroke:#FFF,stroke-width:1px,color:white"</span><span class="p">,</span>  <span class="c1"># Orange</span>
			<span class="s2">"internalImportNode"</span><span class="p">:</span> <span class="s2">"fill:#20c997,stroke:#FFF,stroke-width:1px,color:white"</span><span class="p">,</span>  <span class="c1"># Teal</span>
			<span class="s2">"externalImportNode"</span><span class="p">:</span> <span class="s2">"fill:#ffc107,stroke:#333,stroke-width:1px,color:#333"</span><span class="p">,</span>  <span class="c1"># Yellow</span>
			<span class="c1"># Subgraph Styles</span>
			<span class="s2">"moduleSubgraph"</span><span class="p">:</span> <span class="s2">"fill:#121630,color:#FFF"</span><span class="p">,</span>  <span class="c1"># Dark Grey BG</span>
			<span class="s2">"submoduleSubgraph"</span><span class="p">:</span> <span class="s2">"fill:#2a122e,color:#FFF"</span><span class="p">,</span>  <span class="c1"># Lighter Grey BG</span>
			<span class="s2">"classSubgraph"</span><span class="p">:</span> <span class="s2">"fill:#100f5e,color:#FFF"</span><span class="p">,</span>  <span class="c1"># Light Green BG</span>
		<span class="p">}</span>

		<span class="c1"># Check if styling is enabled</span>
		<span class="n">styling_enabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_styled</span>

		<span class="c1"># Track nodes by their style class for bulk application</span>
		<span class="n">nodes_by_class</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

		<span class="c1"># --- Render Logic --- #</span>
		<span class="n">rendered_elements</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># Track IDs of things actually rendered</span>
		<span class="n">output_lines</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">class_def_lines</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Collect classDef commands</span>
		<span class="n">style_lines</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Collect individual style commands for subgraphs</span>
		<span class="n">used_style_keys</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># Track which styles (funcNode, classSubgraph etc.) are used</span>

		<span class="c1"># Helper function to check if a subgraph has any content after filtering</span>
		<span class="k">def</span><span class="w"> </span><span class="nf">subgraph_has_content</span><span class="p">(</span><span class="n">subgraph_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">			</span><span class="sd">"""Check if a subgraph has any content (nodes or nested subgraphs) after filtering.</span>

<span class="sd">			Args:</span>
<span class="sd">				subgraph_id: The ID of the subgraph to check</span>

<span class="sd">			Returns:</span>
<span class="sd">				True if the subgraph has any content that would be rendered, False otherwise</span>
<span class="sd">			"""</span>
			<span class="k">if</span> <span class="n">subgraph_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">subgraph_definitions</span><span class="p">:</span>
				<span class="k">return</span> <span class="kc">False</span>

			<span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">contained_node_ids</span> <span class="o">=</span> <span class="n">subgraph_definitions</span><span class="p">[</span><span class="n">subgraph_id</span><span class="p">]</span>

			<span class="c1"># Check if any nodes in this subgraph would be rendered</span>
			<span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">contained_node_ids</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">node_definitions</span><span class="p">:</span>
					<span class="c1"># If filtering is disabled, all nodes are rendered</span>
					<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_remove_unconnected</span><span class="p">:</span>
						<span class="k">return</span> <span class="kc">True</span>
					<span class="c1"># If filtering is enabled, check if node is connected</span>
					<span class="k">if</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">connected_ids</span><span class="p">:</span>
						<span class="k">return</span> <span class="kc">True</span>

			<span class="c1"># Check if any nested subgraphs have content</span>
			<span class="n">nested_subgraphs</span> <span class="o">=</span> <span class="p">[</span><span class="n">sid</span> <span class="k">for</span> <span class="n">sid</span><span class="p">,</span> <span class="n">parent_id</span> <span class="ow">in</span> <span class="n">subgraph_hierarchy</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">parent_id</span> <span class="o">==</span> <span class="n">subgraph_id</span><span class="p">]</span>
			<span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">subgraph_has_content</span><span class="p">(</span><span class="n">nested_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">nested_id</span> <span class="ow">in</span> <span class="n">nested_subgraphs</span><span class="p">)</span>

		<span class="c1"># Function to recursively render subgraphs and their nodes</span>
		<span class="k">def</span><span class="w"> </span><span class="nf">render_subgraph</span><span class="p">(</span><span class="n">subgraph_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">indent</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">			</span><span class="sd">"""Recursively renders a Mermaid subgraph and its contents.</span>

<span class="sd">			Args:</span>
<span class="sd">				subgraph_id: The ID of the subgraph to render</span>
<span class="sd">				indent: String used for indentation in the output (default: "")</span>

<span class="sd">			Returns:</span>
<span class="sd">				None: Output is written to output_lines and style_lines lists</span>

<span class="sd">			Side Effects:</span>
<span class="sd">				- Adds to rendered_elements set to track rendered items</span>
<span class="sd">				- Appends lines to output_lines for Mermaid graph definition</span>
<span class="sd">				- Appends style commands to style_lines</span>
<span class="sd">				- Updates used_style_keys with any styles actually used</span>
<span class="sd">			"""</span>
			<span class="k">if</span> <span class="n">subgraph_id</span> <span class="ow">in</span> <span class="n">rendered_elements</span><span class="p">:</span>
				<span class="k">return</span>

			<span class="c1"># Skip empty subgraphs when filtering is enabled</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_remove_unconnected</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">subgraph_has_content</span><span class="p">(</span><span class="n">subgraph_id</span><span class="p">):</span>
				<span class="k">return</span>

			<span class="n">rendered_elements</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">subgraph_id</span><span class="p">)</span>

			<span class="n">label</span><span class="p">,</span> <span class="n">sg_type</span><span class="p">,</span> <span class="n">contained_node_ids</span> <span class="o">=</span> <span class="n">subgraph_definitions</span><span class="p">[</span><span class="n">subgraph_id</span><span class="p">]</span>
			<span class="n">subgraph_comment</span> <span class="o">=</span> <span class="n">get_subgraph_comment</span><span class="p">(</span><span class="n">subgraph_id</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">subgraph_comment</span><span class="p">:</span>
				<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">indent</span><span class="si">}{</span><span class="n">subgraph_comment</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
			<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s1">subgraph </span><span class="si">{</span><span class="n">subgraph_id</span><span class="si">}</span><span class="s1">["</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s1">"]'</span><span class="p">)</span>
			<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">  direction LR"</span><span class="p">)</span>  <span class="c1"># Or TD</span>

			<span class="c1"># Render nodes inside this subgraph</span>
			<span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">contained_node_ids</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">node_definitions</span><span class="p">:</span>
					<span class="c1"># Apply filtering if enabled</span>
					<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_remove_unconnected</span> <span class="ow">and</span> <span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">connected_ids</span><span class="p">:</span>
						<span class="k">continue</span>
					<span class="k">if</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">rendered_elements</span><span class="p">:</span>
						<span class="k">continue</span>  <span class="c1"># Should not happen, but safeguard</span>
					<span class="n">rendered_elements</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>

					<span class="n">definition</span><span class="p">,</span> <span class="n">node_class</span> <span class="o">=</span> <span class="n">node_definitions</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>
					<span class="n">inline_comment</span> <span class="o">=</span> <span class="n">get_inline_comment</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">inline_comment</span><span class="p">:</span>
						<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="n">inline_comment</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
					<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">node_class</span> <span class="ow">in</span> <span class="n">style_map</span> <span class="ow">and</span> <span class="n">styling_enabled</span><span class="p">:</span>
						<span class="c1"># Track nodes by class for bulk application</span>
						<span class="k">if</span> <span class="n">node_class</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes_by_class</span><span class="p">:</span>
							<span class="n">nodes_by_class</span><span class="p">[</span><span class="n">node_class</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
						<span class="n">nodes_by_class</span><span class="p">[</span><span class="n">node_class</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
						<span class="n">used_style_keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node_class</span><span class="p">)</span>  <span class="c1"># Track used style</span>

			<span class="c1"># Render nested subgraphs</span>
			<span class="n">nested_subgraphs</span> <span class="o">=</span> <span class="p">[</span><span class="n">sid</span> <span class="k">for</span> <span class="n">sid</span><span class="p">,</span> <span class="n">parent_id</span> <span class="ow">in</span> <span class="n">subgraph_hierarchy</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">parent_id</span> <span class="o">==</span> <span class="n">subgraph_id</span><span class="p">]</span>
			<span class="k">for</span> <span class="n">nested_id</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">nested_subgraphs</span><span class="p">):</span>  <span class="c1"># Sort for consistent output</span>
				<span class="c1"># Apply filtering if enabled - use the comprehensive content check</span>
				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_remove_unconnected</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">subgraph_has_content</span><span class="p">(</span><span class="n">nested_id</span><span class="p">):</span>
					<span class="k">continue</span>
				<span class="n">render_subgraph</span><span class="p">(</span><span class="n">nested_id</span><span class="p">,</span> <span class="n">indent</span> <span class="o">+</span> <span class="s2">"  "</span><span class="p">)</span>

			<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">end"</span><span class="p">)</span>
			<span class="c1"># Apply style definition to subgraph *after* end (subgraphs still use individual styles)</span>
			<span class="k">if</span> <span class="n">sg_type</span> <span class="ow">in</span> <span class="n">style_map</span><span class="p">:</span>
				<span class="n">style_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
					<span class="sa">f</span><span class="s2">"  style </span><span class="si">{</span><span class="n">subgraph_id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">style_map</span><span class="p">[</span><span class="n">sg_type</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
				<span class="p">)</span>  <span class="c1"># Always use 2-space indent for styles</span>
				<span class="n">used_style_keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sg_type</span><span class="p">)</span>  <span class="c1"># Track used style</span>

		<span class="c1"># Helper function to create standalone comments for nodes</span>
		<span class="k">def</span><span class="w"> </span><span class="nf">get_inline_comment</span><span class="p">(</span><span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">			</span><span class="sd">"""Generate a standalone comment for a node ID."""</span>
			<span class="k">if</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">node_id_to_info</span><span class="p">:</span>
				<span class="n">file_path</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="n">node_id_to_info</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

					<span class="n">filename</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
				<span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
					<span class="n">filename</span> <span class="o">=</span> <span class="s2">"unknown"</span>
				<span class="k">return</span> <span class="sa">f</span><span class="s2">"%% </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">"</span>
			<span class="k">return</span> <span class="s2">""</span>

		<span class="c1"># Helper function to create standalone comments for subgraphs</span>
		<span class="k">def</span><span class="w"> </span><span class="nf">get_subgraph_comment</span><span class="p">(</span><span class="n">subgraph_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">			</span><span class="sd">"""Generate a standalone comment for a subgraph ID."""</span>
			<span class="k">if</span> <span class="n">subgraph_id</span> <span class="ow">in</span> <span class="n">entity_map</span><span class="p">:</span>
				<span class="n">entity</span> <span class="o">=</span> <span class="n">entity_map</span><span class="p">[</span><span class="n">subgraph_id</span><span class="p">]</span>
				<span class="n">file_path</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"file_path"</span><span class="p">,</span> <span class="s2">"unknown"</span><span class="p">)</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

					<span class="n">filename</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
				<span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">):</span>
					<span class="n">filename</span> <span class="o">=</span> <span class="s2">"unknown"</span>
				<span class="k">return</span> <span class="sa">f</span><span class="s2">"%% </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">start_line</span><span class="si">}</span><span class="s2">"</span>
			<span class="k">return</span> <span class="s2">""</span>

		<span class="c1"># --- Define Global Nodes (Imports primarily) ---</span>
		<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">  </span><span class="si">%%</span><span class="s2"> Global Nodes"</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">global_nodes</span><span class="p">):</span>
			<span class="k">if</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">node_definitions</span><span class="p">:</span>
				<span class="c1"># Apply filtering if enabled</span>
				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_remove_unconnected</span> <span class="ow">and</span> <span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">connected_ids</span><span class="p">:</span>
					<span class="k">continue</span>
				<span class="k">if</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">rendered_elements</span><span class="p">:</span>
					<span class="k">continue</span>
				<span class="n">rendered_elements</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>

				<span class="n">definition</span><span class="p">,</span> <span class="n">node_class</span> <span class="o">=</span> <span class="n">node_definitions</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>
				<span class="n">inline_comment</span> <span class="o">=</span> <span class="n">get_inline_comment</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">inline_comment</span><span class="p">:</span>
					<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  </span><span class="si">{</span><span class="n">inline_comment</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
				<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">node_class</span> <span class="ow">in</span> <span class="n">style_map</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="s2">"mermaid_styled"</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
					<span class="c1"># Track nodes by class for bulk application</span>
					<span class="k">if</span> <span class="n">nodes_by_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
						<span class="k">if</span> <span class="n">node_class</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes_by_class</span><span class="p">:</span>
							<span class="n">nodes_by_class</span><span class="p">[</span><span class="n">node_class</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
						<span class="n">nodes_by_class</span><span class="p">[</span><span class="n">node_class</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
					<span class="n">used_style_keys</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node_class</span><span class="p">)</span>  <span class="c1"># Track used style</span>

		<span class="c1"># --- Render Top-Level Subgraphs ---</span>
		<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">  </span><span class="si">%%</span><span class="s2"> Subgraphs"</span><span class="p">)</span>
		<span class="n">top_level_subgraphs</span> <span class="o">=</span> <span class="p">[</span><span class="n">sg_id</span> <span class="k">for</span> <span class="n">sg_id</span> <span class="ow">in</span> <span class="n">subgraph_definitions</span> <span class="k">if</span> <span class="n">sg_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">subgraph_hierarchy</span><span class="p">]</span>
		<span class="k">for</span> <span class="n">sg_id</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">top_level_subgraphs</span><span class="p">):</span>
			<span class="c1"># Apply filtering if enabled - use the comprehensive content check</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_remove_unconnected</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">subgraph_has_content</span><span class="p">(</span><span class="n">sg_id</span><span class="p">):</span>
				<span class="k">continue</span>
			<span class="n">render_subgraph</span><span class="p">(</span><span class="n">sg_id</span><span class="p">,</span> <span class="s2">"  "</span><span class="p">)</span>  <span class="c1"># Use 2-space base indentation for top-level subgraphs</span>

		<span class="c1"># --- Render Edges --- #</span>
		<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">  </span><span class="si">%%</span><span class="s2"> Edges"</span><span class="p">)</span>
		<span class="n">link_styles</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">call_edge_indices</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">import_edge_indices</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">declare_edge_indices</span> <span class="o">=</span> <span class="p">[]</span>

		<span class="c1"># Group edges by type for better organization</span>
		<span class="n">call_edges</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">import_edges</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">declare_edges</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">other_edges</span> <span class="o">=</span> <span class="p">[]</span>

		<span class="k">for</span> <span class="n">_i</span><span class="p">,</span> <span class="p">(</span><span class="n">source_id</span><span class="p">,</span> <span class="n">target_id</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">edge_type</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">edges</span><span class="p">):</span>
			<span class="c1"># Ensure both source and target were actually rendered (or are subgraphs that contain rendered nodes)</span>
			<span class="n">source_exists</span> <span class="o">=</span> <span class="n">source_id</span> <span class="ow">in</span> <span class="n">rendered_elements</span> <span class="ow">or</span> <span class="n">source_id</span> <span class="ow">in</span> <span class="n">subgraph_definitions</span>
			<span class="n">target_exists</span> <span class="o">=</span> <span class="n">target_id</span> <span class="ow">in</span> <span class="n">rendered_elements</span> <span class="ow">or</span> <span class="n">target_id</span> <span class="ow">in</span> <span class="n">subgraph_definitions</span>

			<span class="k">if</span> <span class="n">source_exists</span> <span class="ow">and</span> <span class="n">target_exists</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">edge_type</span> <span class="o">==</span> <span class="s2">"call"</span><span class="p">:</span>
					<span class="n">edge_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"  </span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s2"> --&gt;|</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">| </span><span class="si">{</span><span class="n">target_id</span><span class="si">}</span><span class="s2">"</span>
					<span class="n">call_edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge_str</span><span class="p">)</span>
				<span class="k">elif</span> <span class="n">edge_type</span> <span class="o">==</span> <span class="s2">"import"</span><span class="p">:</span>
					<span class="n">edge_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"  </span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s2"> -.-&gt;|</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">| </span><span class="si">{</span><span class="n">target_id</span><span class="si">}</span><span class="s2">"</span>
					<span class="n">import_edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge_str</span><span class="p">)</span>
				<span class="k">elif</span> <span class="n">edge_type</span> <span class="o">==</span> <span class="s2">"declare"</span><span class="p">:</span>
					<span class="c1"># Make declare edges less prominent</span>
					<span class="n">edge_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"  </span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s2"> --- </span><span class="si">{</span><span class="n">target_id</span><span class="si">}</span><span class="s2">"</span>  <span class="c1"># Simple line, no label needed visually</span>
					<span class="n">declare_edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge_str</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>  <span class="c1"># Default or unknown edge type</span>
					<span class="n">edge_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"  </span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s2"> --&gt; </span><span class="si">{</span><span class="n">target_id</span><span class="si">}</span><span class="s2">"</span>
					<span class="n">other_edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge_str</span><span class="p">)</span>

		<span class="c1"># Track starting indices for link styles</span>
		<span class="n">edge_counter</span> <span class="o">=</span> <span class="mi">0</span>

		<span class="c1"># Render call edges</span>
		<span class="k">if</span> <span class="n">call_edges</span><span class="p">:</span>
			<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"  </span><span class="si">%%</span><span class="s2"> Call edges"</span><span class="p">)</span>
			<span class="n">call_edge_indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">edge_counter</span><span class="p">,</span> <span class="n">edge_counter</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">call_edges</span><span class="p">)))</span>
			<span class="n">edge_counter</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">call_edges</span><span class="p">)</span>
			<span class="n">output_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">call_edges</span><span class="p">))</span>

		<span class="c1"># Render import edges</span>
		<span class="k">if</span> <span class="n">import_edges</span><span class="p">:</span>
			<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"  </span><span class="si">%%</span><span class="s2"> Import edges"</span><span class="p">)</span>
			<span class="n">import_edge_indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">edge_counter</span><span class="p">,</span> <span class="n">edge_counter</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">import_edges</span><span class="p">)))</span>
			<span class="n">edge_counter</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">import_edges</span><span class="p">)</span>
			<span class="n">output_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">import_edges</span><span class="p">))</span>

		<span class="c1"># Render declare edges</span>
		<span class="k">if</span> <span class="n">declare_edges</span><span class="p">:</span>
			<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"  </span><span class="si">%%</span><span class="s2"> Declaration edges"</span><span class="p">)</span>
			<span class="n">declare_edge_indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">edge_counter</span><span class="p">,</span> <span class="n">edge_counter</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">declare_edges</span><span class="p">)))</span>
			<span class="n">edge_counter</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">declare_edges</span><span class="p">)</span>
			<span class="n">output_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">declare_edges</span><span class="p">))</span>

		<span class="c1"># Render other edges (if any)</span>
		<span class="k">if</span> <span class="n">other_edges</span><span class="p">:</span>
			<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"  </span><span class="si">%%</span><span class="s2"> Other edges"</span><span class="p">)</span>
			<span class="n">output_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">other_edges</span><span class="p">))</span>

		<span class="c1"># --- Apply Link Styles (Optimized with Comments for Large Ranges) --- #</span>
		<span class="k">if</span> <span class="n">styling_enabled</span> <span class="ow">and</span> <span class="p">(</span><span class="n">call_edge_indices</span> <span class="ow">or</span> <span class="n">import_edge_indices</span> <span class="ow">or</span> <span class="n">declare_edge_indices</span><span class="p">):</span>
			<span class="n">output_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">  </span><span class="si">%%</span><span class="s2"> Link Styles"</span><span class="p">)</span>

			<span class="c1"># Use helper function to add styles with range comments for better readability</span>
			<span class="k">if</span> <span class="n">call_edge_indices</span><span class="p">:</span>
				<span class="n">link_styles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"  </span><span class="si">%%</span><span class="s2"> Call edges (green)"</span><span class="p">)</span>
				<span class="n">_add_range_styles</span><span class="p">(</span><span class="n">link_styles</span><span class="p">,</span> <span class="n">call_edge_indices</span><span class="p">,</span> <span class="s2">"stroke:#28a745,stroke-width:2px"</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">import_edge_indices</span><span class="p">:</span>
				<span class="n">link_styles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"  </span><span class="si">%%</span><span class="s2"> Import edges (yellow dashed)"</span><span class="p">)</span>
				<span class="n">_add_range_styles</span><span class="p">(</span>
					<span class="n">link_styles</span><span class="p">,</span> <span class="n">import_edge_indices</span><span class="p">,</span> <span class="s2">"stroke:#ffc107,stroke-width:1px,stroke-dasharray: 5 5"</span>
				<span class="p">)</span>

			<span class="k">if</span> <span class="n">declare_edge_indices</span><span class="p">:</span>
				<span class="n">link_styles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"  </span><span class="si">%%</span><span class="s2"> Declaration edges (gray)"</span><span class="p">)</span>
				<span class="n">_add_range_styles</span><span class="p">(</span><span class="n">link_styles</span><span class="p">,</span> <span class="n">declare_edge_indices</span><span class="p">,</span> <span class="s2">"stroke:#adb5bd,stroke-width:1px"</span><span class="p">)</span>

			<span class="n">output_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">link_styles</span><span class="p">)</span>

		<span class="c1"># --- Generate Dynamic Legend (if enabled) ---</span>
		<span class="n">legend_lines</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">legend_style_lines</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">mermaid_show_legend</span> <span class="ow">and</span> <span class="n">used_style_keys</span> <span class="ow">and</span> <span class="n">styling_enabled</span><span class="p">:</span>
			<span class="n">legend_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">  </span><span class="si">%%</span><span class="s2"> Legend"</span><span class="p">)</span>
			<span class="n">legend_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"  subgraph Legend"</span><span class="p">)</span>
			<span class="n">legend_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"    direction LR"</span><span class="p">)</span>

			<span class="c1"># Define all possible legend items and their corresponding style keys</span>
			<span class="n">legend_item_definitions</span> <span class="o">=</span> <span class="p">{</span>
				<span class="s2">"legend_module"</span><span class="p">:</span> <span class="p">(</span><span class="s2">"moduleSubgraph"</span><span class="p">,</span> <span class="s1">'["Module/File"]'</span><span class="p">),</span>
				<span class="s2">"legend_submodule"</span><span class="p">:</span> <span class="p">(</span><span class="s2">"submoduleSubgraph"</span><span class="p">,</span> <span class="s1">'["Sub-Module"]'</span><span class="p">),</span>
				<span class="s2">"legend_class"</span><span class="p">:</span> <span class="p">(</span><span class="s2">"classSubgraph"</span><span class="p">,</span> <span class="s1">'["Class"]'</span><span class="p">),</span>
				<span class="s2">"legend_func"</span><span class="p">:</span> <span class="p">(</span><span class="s2">"funcNode"</span><span class="p">,</span> <span class="s1">'("Function/Method")'</span><span class="p">),</span>
				<span class="s2">"legend_const"</span><span class="p">:</span> <span class="p">(</span><span class="s2">"constNode"</span><span class="p">,</span> <span class="s1">'["Constant"]'</span><span class="p">),</span>
				<span class="s2">"legend_var"</span><span class="p">:</span> <span class="p">(</span><span class="s2">"varNode"</span><span class="p">,</span> <span class="s1">'["Variable"]'</span><span class="p">),</span>
				<span class="s2">"legend_import_int"</span><span class="p">:</span> <span class="p">(</span><span class="s2">"internalImportNode"</span><span class="p">,</span> <span class="s1">'["Internal Import"]'</span><span class="p">),</span>
				<span class="s2">"legend_import_ext"</span><span class="p">:</span> <span class="p">(</span><span class="s2">"externalImportNode"</span><span class="p">,</span> <span class="s1">'(("External Import"))'</span><span class="p">),</span>
			<span class="p">}</span>

			<span class="k">for</span> <span class="n">legend_id</span><span class="p">,</span> <span class="p">(</span><span class="n">style_key</span><span class="p">,</span> <span class="n">definition</span><span class="p">)</span> <span class="ow">in</span> <span class="n">legend_item_definitions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="c1"># Only add legend item if its corresponding style was actually used in the graph</span>
				<span class="k">if</span> <span class="n">style_key</span> <span class="ow">in</span> <span class="n">used_style_keys</span><span class="p">:</span>
					<span class="n">legend_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"    </span><span class="si">{</span><span class="n">legend_id</span><span class="si">}{</span><span class="n">definition</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
					<span class="c1"># Track legend nodes by class for bulk application (except subgraph styles)</span>
					<span class="k">if</span> <span class="n">style_key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"funcNode"</span><span class="p">,</span> <span class="s2">"constNode"</span><span class="p">,</span> <span class="s2">"varNode"</span><span class="p">,</span> <span class="s2">"internalImportNode"</span><span class="p">,</span> <span class="s2">"externalImportNode"</span><span class="p">]:</span>
						<span class="k">if</span> <span class="n">style_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nodes_by_class</span><span class="p">:</span>
							<span class="n">nodes_by_class</span><span class="p">[</span><span class="n">style_key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
						<span class="n">nodes_by_class</span><span class="p">[</span><span class="n">style_key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">legend_id</span><span class="p">)</span>
					<span class="c1"># Subgraph-style legend items still use individual styles</span>
					<span class="k">elif</span> <span class="n">style_key</span> <span class="ow">in</span> <span class="n">style_map</span><span class="p">:</span>
						<span class="n">legend_style_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  style </span><span class="si">{</span><span class="n">legend_id</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">style_map</span><span class="p">[</span><span class="n">style_key</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

			<span class="n">legend_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"  end"</span><span class="p">)</span>
			<span class="n">legend_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>  <span class="c1"># Add a blank line after legend</span>

		<span class="c1"># --- Assemble Final Output --- #</span>
		<span class="n">mermaid_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">legend_lines</span><span class="p">)</span>  <span class="c1"># Add legend definitions (if any)</span>
		<span class="n">mermaid_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">output_lines</span><span class="p">)</span>  <span class="c1"># Add main graph structure and edges</span>

		<span class="c1"># --- Add Class Definitions (Consolidated Style Application) --- #</span>
		<span class="k">if</span> <span class="n">styling_enabled</span> <span class="ow">and</span> <span class="n">nodes_by_class</span><span class="p">:</span>
			<span class="n">mermaid_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">  </span><span class="si">%%</span><span class="s2"> Class Definitions"</span><span class="p">)</span>
			<span class="k">for</span> <span class="n">style_class</span><span class="p">,</span> <span class="n">node_ids</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">nodes_by_class</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
				<span class="k">if</span> <span class="n">node_ids</span> <span class="ow">and</span> <span class="n">style_class</span> <span class="ow">in</span> <span class="n">style_map</span><span class="p">:</span>
					<span class="n">class_def_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  classDef </span><span class="si">{</span><span class="n">style_class</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">style_map</span><span class="p">[</span><span class="n">style_class</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
					<span class="c1"># Apply class to all nodes of this type</span>
					<span class="n">node_list</span> <span class="o">=</span> <span class="s2">","</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">node_ids</span><span class="p">))</span>
					<span class="n">class_def_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"  class </span><span class="si">{</span><span class="n">node_list</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">style_class</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

			<span class="n">mermaid_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">class_def_lines</span><span class="p">)</span>

		<span class="c1"># Append individual style commands for subgraphs and legend subgraph-style items</span>
		<span class="n">all_style_lines</span> <span class="o">=</span> <span class="n">style_lines</span> <span class="o">+</span> <span class="n">legend_style_lines</span>
		<span class="k">if</span> <span class="n">styling_enabled</span> <span class="ow">and</span> <span class="n">all_style_lines</span><span class="p">:</span>
			<span class="n">mermaid_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">  </span><span class="si">%%</span><span class="s2"> Individual Styles"</span><span class="p">)</span>
			<span class="n">mermaid_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">all_style_lines</span><span class="p">))</span>

		<span class="k">return</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mermaid_lines</span><span class="p">)</span>

	<span class="k">def</span><span class="w"> </span><span class="nf">generate_documentation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entities</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">LODEntity</span><span class="p">],</span> <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">"""</span>
<span class="sd">		Generate markdown documentation from the processed LOD entities.</span>

<span class="sd">		Args:</span>
<span class="sd">		    entities: List of LOD entities</span>
<span class="sd">		    metadata: Repository metadata</span>

<span class="sd">		Returns:</span>
<span class="sd">		    Generated documentation as string</span>

<span class="sd">		"""</span>
		<span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>

		<span class="c1"># Add header with repository information</span>
		<span class="n">target_path_str</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"target_path"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
		<span class="n">original_path</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"original_path"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
		<span class="n">command_arg</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"command_arg"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>

		<span class="c1"># Debug logging to see what values we're receiving</span>
		<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
			<span class="sa">f</span><span class="s2">"Metadata values for heading: "</span>
			<span class="sa">f</span><span class="s2">"command_arg='</span><span class="si">{</span><span class="n">command_arg</span><span class="si">}</span><span class="s2">', "</span>
			<span class="sa">f</span><span class="s2">"original_path='</span><span class="si">{</span><span class="n">original_path</span><span class="si">}</span><span class="s2">', "</span>
			<span class="sa">f</span><span class="s2">"target_path='</span><span class="si">{</span><span class="n">target_path_str</span><span class="si">}</span><span class="s2">'"</span>
		<span class="p">)</span>

		<span class="c1"># Use the exact command argument if available</span>
		<span class="k">if</span> <span class="n">command_arg</span><span class="p">:</span>
			<span class="n">repo_name</span> <span class="o">=</span> <span class="n">command_arg</span>
		<span class="c1"># Fall back to original path if available</span>
		<span class="k">elif</span> <span class="n">original_path</span><span class="p">:</span>
			<span class="n">repo_name</span> <span class="o">=</span> <span class="n">original_path</span>
		<span class="c1"># Further fallback to just the directory name</span>
		<span class="k">elif</span> <span class="n">target_path_str</span><span class="p">:</span>
			<span class="n">repo_name</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">target_path_str</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">repo_name</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"Repository"</span><span class="p">)</span>

		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"# `</span><span class="si">{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">` Documentation"</span><span class="p">)</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Generated on: </span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">UTC</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

		<span class="k">if</span> <span class="s2">"description"</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">:</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span> <span class="o">+</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"description"</span><span class="p">,</span> <span class="s2">""</span><span class="p">))</span>

		<span class="c1"># Add repository statistics</span>
		<span class="k">if</span> <span class="s2">"stats"</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">:</span>
			<span class="n">stats</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">"stats"</span><span class="p">]</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">## Document Statistics"</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- Total files scanned: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'total_files_scanned'</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- Total lines of code: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'total_lines'</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- Languages: </span><span class="si">{</span><span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'languages'</span><span class="p">,</span><span class="w"> </span><span class="p">[]))</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

		<span class="c1"># Add directory structure if requested</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">include_tree</span> <span class="ow">and</span> <span class="s2">"tree"</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">:</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">## Directory Structure"</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"```"</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">metadata</span><span class="p">[</span><span class="s2">"tree"</span><span class="p">])</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"```"</span><span class="p">)</span>

		<span class="c1"># Add Mermaid diagram if entities exist and config enables it</span>
		<span class="k">if</span> <span class="n">entities</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">include_entity_graph</span><span class="p">:</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">## Entity Relationships"</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"```mermaid"</span><span class="p">)</span>
			<span class="n">mermaid_diagram</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_mermaid_diagram</span><span class="p">(</span><span class="n">entities</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mermaid_diagram</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"```"</span><span class="p">)</span>

		<span class="c1"># Add table of contents for the scanned files</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">## Scanned Files"</span><span class="p">)</span>

		<span class="c1"># Group entities by file</span>
		<span class="n">files</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">LODEntity</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

		<span class="c1"># Get the target path from metadata</span>
		<span class="n">target_path_str</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"target_path"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
		<span class="n">target_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">target_path_str</span><span class="p">)</span> <span class="k">if</span> <span class="n">target_path_str</span> <span class="k">else</span> <span class="kc">None</span>

		<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
			<span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"file_path"</span><span class="p">,</span> <span class="s2">""</span><span class="p">))</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
				<span class="k">continue</span>

			<span class="k">if</span> <span class="n">file_path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
				<span class="n">files</span><span class="p">[</span><span class="n">file_path</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
			<span class="n">files</span><span class="p">[</span><span class="n">file_path</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

		<span class="c1"># Create TOC entries with properly formatted relative paths</span>
		<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="mi">1</span><span class="p">):</span>
			<span class="c1"># Get path relative to the target directory</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">target_path</span> <span class="ow">and</span> <span class="n">target_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
					<span class="c1"># Get the relative path from the target directory</span>
					<span class="n">rel_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">target_path</span><span class="p">)</span>

					<span class="c1"># Format the path with a leading slash for files directly in the target directory</span>
					<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">rel_path</span><span class="si">}</span><span class="s2">"</span>

					<span class="c1"># Create a clean anchor ID by converting to lowercase and removing all special characters</span>
					<span class="c1"># including underscores, to create standard anchor IDs</span>
					<span class="n">filename</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span>
					<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">)</span>

					<span class="c1"># Handle paths with subdirectories</span>
					<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rel_path</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
						<span class="c1"># Get directory name and filename</span>
						<span class="n">directory</span> <span class="o">=</span> <span class="n">rel_path</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># Last directory before the file</span>
						<span class="n">anchor</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">directory</span><span class="si">}{</span><span class="n">clean_filename</span><span class="si">}</span><span class="s2">"</span>  <span class="c1"># e.g., "raginitpy"</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="c1"># Just use the clean filename for files at root</span>
						<span class="n">anchor</span> <span class="o">=</span> <span class="n">clean_filename</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="c1"># Fall back to just the filename if target path is not available</span>
					<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span>
					<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
					<span class="n">anchor</span> <span class="o">=</span> <span class="n">clean_filename</span>

				<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. [</span><span class="si">{</span><span class="n">rel_path_str</span><span class="si">}</span><span class="s2">](#</span><span class="si">{</span><span class="n">anchor</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
				<span class="c1"># If relative_to fails, just use the filename</span>
				<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span>
				<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
				<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. [</span><span class="si">{</span><span class="n">rel_path_str</span><span class="si">}</span><span class="s2">](#</span><span class="si">{</span><span class="n">clean_filename</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>

		<span class="c1"># Add code documentation grouped by file</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">## Code Documentation"</span><span class="p">)</span>

		<span class="c1"># Helper function to get comment syntax for a language</span>
		<span class="k">def</span><span class="w"> </span><span class="nf">get_comment_syntax</span><span class="p">(</span><span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">			</span><span class="sd">"""Get the appropriate comment syntax for a programming language.</span>

<span class="sd">			Args:</span>
<span class="sd">				language: The programming language name</span>

<span class="sd">			Returns:</span>
<span class="sd">				The comment prefix for that language</span>
<span class="sd">			"""</span>
			<span class="n">language_lower</span> <span class="o">=</span> <span class="n">language</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">language</span> <span class="k">else</span> <span class="s2">""</span>

			<span class="c1"># Languages using // for comments</span>
			<span class="k">if</span> <span class="n">language_lower</span> <span class="ow">in</span> <span class="p">(</span>
				<span class="s2">"javascript"</span><span class="p">,</span>
				<span class="s2">"java"</span><span class="p">,</span>
				<span class="s2">"c"</span><span class="p">,</span>
				<span class="s2">"cpp"</span><span class="p">,</span>
				<span class="s2">"c++"</span><span class="p">,</span>
				<span class="s2">"csharp"</span><span class="p">,</span>
				<span class="s2">"c#"</span><span class="p">,</span>
				<span class="s2">"go"</span><span class="p">,</span>
				<span class="s2">"rust"</span><span class="p">,</span>
				<span class="s2">"php"</span><span class="p">,</span>
				<span class="s2">"kotlin"</span><span class="p">,</span>
				<span class="s2">"swift"</span><span class="p">,</span>
				<span class="s2">"typescript"</span><span class="p">,</span>
			<span class="p">):</span>
				<span class="k">return</span> <span class="s2">"//"</span>
			<span class="c1"># Languages using -- for comments</span>
			<span class="k">if</span> <span class="n">language_lower</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"sql"</span><span class="p">,</span> <span class="s2">"haskell"</span><span class="p">,</span> <span class="s2">"lua"</span><span class="p">):</span>
				<span class="k">return</span> <span class="s2">"--"</span>
			<span class="c1"># Languages using % for comments</span>
			<span class="k">if</span> <span class="n">language_lower</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"matlab"</span><span class="p">,</span> <span class="s2">"octave"</span><span class="p">):</span>
				<span class="k">return</span> <span class="s2">"%"</span>
			<span class="c1"># Languages using ; for comments</span>
			<span class="k">if</span> <span class="n">language_lower</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"assembly"</span><span class="p">,</span> <span class="s2">"asm"</span><span class="p">):</span>
				<span class="k">return</span> <span class="s2">";"</span>
			<span class="c1"># Default to # for Python, Ruby, Shell, Perl, etc.</span>
			<span class="k">return</span> <span class="s2">"#"</span>

		<span class="c1"># Helper function to reconstruct code with LOD filtering</span>
		<span class="k">def</span><span class="w"> </span><span class="nf">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">LODEntity</span><span class="p">,</span> <span class="n">current_indent</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">			</span><span class="sd">"""Reconstructs code content based on LOD level.</span>

<span class="sd">			Args:</span>
<span class="sd">				entity: The entity to process</span>
<span class="sd">				current_indent: Current indentation level</span>

<span class="sd">			Returns:</span>
<span class="sd">				List of code lines with appropriate LOD filtering</span>
<span class="sd">			"""</span>
			<span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>

			<span class="c1"># Skip certain entity types based on LOD level</span>
			<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
				<span class="k">return</span> <span class="p">[]</span>  <span class="c1"># Skip imports except at FULL level</span>

			<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">COMMENT</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
				<span class="k">return</span> <span class="p">[]</span>  <span class="c1"># Skip comments except at FULL level</span>

			<span class="c1"># Handle different entity types</span>
			<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">:</span>
				<span class="c1"># For modules, process children without adding module declaration</span>
				<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">):</span>
					<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
						<span class="n">child_lines</span> <span class="o">=</span> <span class="n">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">current_indent</span><span class="p">)</span>
						<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_lines</span><span class="p">)</span>
						<span class="k">if</span> <span class="n">child_lines</span><span class="p">:</span>  <span class="c1"># Add spacing between entities</span>
							<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="c1"># For UNKNOWN entities, check if they contain constants/variables as direct children</span>
						<span class="c1"># This handles cases where expression_statement wrappers contain assignment nodes</span>
						<span class="k">for</span> <span class="n">grandchild</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">):</span>
							<span class="k">if</span> <span class="n">grandchild</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span><span class="p">):</span>
								<span class="n">grandchild_lines</span> <span class="o">=</span> <span class="n">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">grandchild</span><span class="p">,</span> <span class="n">current_indent</span><span class="p">)</span>
								<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">grandchild_lines</span><span class="p">)</span>
								<span class="k">if</span> <span class="n">grandchild_lines</span><span class="p">:</span>  <span class="c1"># Add spacing between entities</span>
									<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>

			<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">):</span>
				<span class="c1"># Add signature/declaration</span>
				<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">signature</span><span class="p">:</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">entity</span><span class="o">.</span><span class="n">signature</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>
				<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
					<span class="c1"># Extract first line as signature</span>
					<span class="n">first_line</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">first_line</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="c1"># Fallback</span>
					<span class="n">entity_keyword</span> <span class="o">=</span> <span class="s2">"class"</span> <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span> <span class="k">else</span> <span class="s2">"def"</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">entity_keyword</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>

				<span class="c1"># Add docstring if available and level permits (but not at SKELETON/FULL level)</span>
				<span class="k">if</span> <span class="p">(</span>
					<span class="n">entity</span><span class="o">.</span><span class="n">docstring</span>
					<span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">DOCS</span><span class="o">.</span><span class="n">value</span>
					<span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">SKELETON</span><span class="o">.</span><span class="n">value</span>
				<span class="p">):</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}</span><span class="s1">    """'</span><span class="p">)</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}</span><span class="s2">    </span><span class="si">{</span><span class="n">doc_line</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">doc_line</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">docstring</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">))</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}</span><span class="s1">    """'</span><span class="p">)</span>

				<span class="c1"># Determine indentation for children</span>
				<span class="n">child_indent</span> <span class="o">=</span> <span class="n">current_indent</span> <span class="o">+</span> <span class="s2">"    "</span>

				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
					<span class="c1"># FULL level: include full implementation</span>
					<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">:</span>
						<span class="n">content_lines</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
						<span class="c1"># Skip the first line (signature) as we already added it</span>
						<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">content_line</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">content_line</span> <span class="ow">in</span> <span class="n">content_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
				<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">SKELETON</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
					<span class="c1"># SKELETON level: show full content but filter out comments</span>
					<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">:</span>
						<span class="n">content_lines</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
						<span class="c1"># Skip the first line (signature) as we already added it</span>
						<span class="k">for</span> <span class="n">content_line</span> <span class="ow">in</span> <span class="n">content_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
							<span class="n">stripped</span> <span class="o">=</span> <span class="n">content_line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

							<span class="c1"># Skip lines that are entirely comments</span>
							<span class="k">if</span> <span class="n">stripped</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">stripped</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"#"</span><span class="p">,</span> <span class="s2">"//"</span><span class="p">,</span> <span class="s2">"/*"</span><span class="p">)):</span>
								<span class="k">continue</span>

							<span class="c1"># Handle inline comments by removing them</span>
							<span class="k">if</span> <span class="n">stripped</span><span class="p">:</span>
								<span class="n">cleaned_line</span> <span class="o">=</span> <span class="n">content_line</span>
								<span class="c1"># Remove inline comments (simple approach - look for comment markers)</span>
								<span class="k">for</span> <span class="n">comment_prefix</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"#"</span><span class="p">,</span> <span class="s2">"//"</span><span class="p">]:</span>
									<span class="k">if</span> <span class="n">comment_prefix</span> <span class="ow">in</span> <span class="n">content_line</span><span class="p">:</span>
										<span class="c1"># Find the comment position (avoiding strings)</span>
										<span class="n">comment_pos</span> <span class="o">=</span> <span class="n">content_line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">comment_prefix</span><span class="p">)</span>
										<span class="k">if</span> <span class="n">comment_pos</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
											<span class="c1"># Simple check: if not in quotes, it's likely a comment</span>
											<span class="n">before_comment</span> <span class="o">=</span> <span class="n">content_line</span><span class="p">[:</span><span class="n">comment_pos</span><span class="p">]</span>
											<span class="k">if</span> <span class="p">(</span>
												<span class="n">before_comment</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">'"'</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
												<span class="ow">and</span> <span class="n">before_comment</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">"'"</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
											<span class="p">):</span>
												<span class="n">cleaned_line</span> <span class="o">=</span> <span class="n">before_comment</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
												<span class="k">break</span>

								<span class="k">if</span> <span class="n">cleaned_line</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>  <span class="c1"># Only add if there's actual code content</span>
									<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">cleaned_line</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
							<span class="k">else</span><span class="p">:</span>  <span class="c1"># Keep empty lines for structure</span>
								<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">content_line</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="c1"># SIGNATURES/STRUCTURE/DOCS: process children as signatures only</span>
					<span class="n">has_children</span> <span class="o">=</span> <span class="kc">False</span>
					<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">):</span>
						<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
							<span class="n">child_lines</span> <span class="o">=</span> <span class="n">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">child_indent</span><span class="p">)</span>
							<span class="k">if</span> <span class="n">child_lines</span><span class="p">:</span>
								<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_lines</span><span class="p">)</span>
								<span class="n">has_children</span> <span class="o">=</span> <span class="kc">True</span>
						<span class="k">else</span><span class="p">:</span>
							<span class="c1"># For UNKNOWN entities, check if they contain constants/variables as direct children</span>
							<span class="k">for</span> <span class="n">grandchild</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">):</span>
								<span class="k">if</span> <span class="n">grandchild</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span><span class="p">):</span>
									<span class="n">grandchild_lines</span> <span class="o">=</span> <span class="n">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">grandchild</span><span class="p">,</span> <span class="n">child_indent</span><span class="p">)</span>
									<span class="k">if</span> <span class="n">grandchild_lines</span><span class="p">:</span>
										<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">grandchild_lines</span><span class="p">)</span>
										<span class="n">has_children</span> <span class="o">=</span> <span class="kc">True</span>

					<span class="c1"># If we have content but not showing full, add truncation comment</span>
					<span class="n">comment_prefix</span> <span class="o">=</span> <span class="n">get_comment_syntax</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">language</span> <span class="ow">or</span> <span class="s2">""</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">has_children</span><span class="p">:</span>
						<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">child_indent</span><span class="si">}{</span><span class="n">comment_prefix</span><span class="si">}</span><span class="s2"> truncated for brevity"</span><span class="p">)</span>
					<span class="k">elif</span> <span class="ow">not</span> <span class="n">has_children</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">:</span>
						<span class="c1"># For functions/methods without children, add truncation comment</span>
						<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">child_indent</span><span class="si">}{</span><span class="n">comment_prefix</span><span class="si">}</span><span class="s2"> hidden for brevity"</span><span class="p">)</span>

			<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span><span class="p">):</span>
				<span class="c1"># At FULL level, show everything; at SKELETON+ levels, show the declaration</span>
				<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
					<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
						<span class="c1"># Show complete content at FULL level</span>
						<span class="n">content_lines</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
						<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">content_line</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">content_line</span> <span class="ow">in</span> <span class="n">content_lines</span><span class="p">)</span>
					<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">SKELETON</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
						<span class="c1"># Show just the first line (declaration) at SKELETON and higher levels</span>
						<span class="n">first_line</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
						<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">first_line</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
				<span class="c1"># If no content is available, skip the entity entirely</span>

			<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}</span><span class="s2">import </span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

			<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">COMMENT</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
				<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">comment_line</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">comment_line</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">))</span>

			<span class="k">return</span> <span class="n">lines</span>

		<span class="n">first_file</span> <span class="o">=</span> <span class="kc">True</span>
		<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">file_entities</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">items</span><span class="p">()),</span> <span class="mi">1</span><span class="p">):</span>
			<span class="c1"># Add a divider before each file section except the first one</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">first_file</span><span class="p">:</span>
				<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">---"</span><span class="p">)</span>  <span class="c1"># Horizontal rule</span>
			<span class="n">first_file</span> <span class="o">=</span> <span class="kc">False</span>

			<span class="c1"># Get path relative to the target directory</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">target_path</span> <span class="ow">and</span> <span class="n">target_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
					<span class="c1"># Get the relative path from the target directory</span>
					<span class="n">rel_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">target_path</span><span class="p">)</span>

					<span class="c1"># Format the path with a leading slash for files directly in the target directory</span>
					<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">rel_path</span><span class="si">}</span><span class="s2">"</span>

					<span class="c1"># Create a clean anchor ID by converting to lowercase and removing all special characters</span>
					<span class="c1"># including underscores, to create standard anchor IDs</span>
					<span class="n">filename</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span>
					<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">)</span>

					<span class="c1"># Handle paths with subdirectories</span>
					<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rel_path</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
						<span class="c1"># Get directory name and filename</span>
						<span class="n">directory</span> <span class="o">=</span> <span class="n">rel_path</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># Last directory before the file</span>
						<span class="n">anchor</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">directory</span><span class="si">}{</span><span class="n">clean_filename</span><span class="si">}</span><span class="s2">"</span>  <span class="c1"># e.g., "raginitpy"</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="c1"># Just use the clean filename for files at root</span>
						<span class="n">anchor</span> <span class="o">=</span> <span class="n">clean_filename</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="c1"># Fall back to just the filename if target path is not available</span>
					<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span>
					<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
					<span class="n">anchor</span> <span class="o">=</span> <span class="n">clean_filename</span>

				<span class="c1"># Add a custom ID to the heading to match our anchor</span>
				<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">### </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">rel_path_str</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
				<span class="c1"># If relative_to fails, just use the filename</span>
				<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span>
				<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
				<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">### </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">rel_path_str</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

			<span class="c1"># Sort top-level entities by line number</span>
			<span class="n">sorted_entities</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">file_entities</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">)</span>

			<span class="c1"># Generate code content using LOD-based reconstruction</span>
			<span class="n">code_lines</span> <span class="o">=</span> <span class="p">[]</span>
			<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">sorted_entities</span><span class="p">:</span>
				<span class="c1"># Process all entities and collect code lines</span>
				<span class="n">entity_lines</span> <span class="o">=</span> <span class="n">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
				<span class="n">code_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">entity_lines</span><span class="p">)</span>

			<span class="c1"># Remove trailing empty lines</span>
			<span class="k">while</span> <span class="n">code_lines</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">code_lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
				<span class="n">code_lines</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

			<span class="c1"># Add the code block with proper language detection</span>
			<span class="k">if</span> <span class="n">code_lines</span><span class="p">:</span>
				<span class="c1"># Get language from the first entity with language info</span>
				<span class="n">lang</span> <span class="o">=</span> <span class="s2">""</span>
				<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">sorted_entities</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">language</span><span class="p">:</span>
						<span class="n">lang</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">language</span>
						<span class="k">break</span>

				<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">```</span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
				<span class="n">content</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">code_lines</span><span class="p">)</span>
				<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"```"</span><span class="p">)</span>

		<span class="k">return</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h4 class="doc doc-heading" id="codemap.gen.generator.CodeMapGenerator.__init__">
<span class="doc doc-object-name doc-function-name">__init__</span>
</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="nf">config</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" href="../../config/config_schema/#codemap.config.config_schema.GenSchema" title='&lt;span class="doc doc-object-name doc-class-name"&gt;GenSchema&lt;/span&gt; (&lt;code&gt;codemap.config.config_schema.GenSchema&lt;/code&gt;)'>GenSchema</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Initialize the code map generator.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>config</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../../config/config_schema/#codemap.config.config_schema.GenSchema" title='&lt;span class="doc doc-object-name doc-class-name"&gt;GenSchema&lt;/span&gt; (&lt;code&gt;codemap.config.config_schema.GenSchema&lt;/code&gt;)'>GenSchema</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Generation configuration settings</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/codemap/gen/generator.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">GenSchema</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">	</span><span class="sd">"""</span>
<span class="sd">	Initialize the code map generator.</span>

<span class="sd">	Args:</span>
<span class="sd">	    config: Generation configuration settings</span>

<span class="sd">	"""</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="codemap.gen.generator.CodeMapGenerator.config">
<span class="doc doc-object-name doc-attribute-name">config</span>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
</span>
</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">config</span> <span class="o">=</span> <span class="n"><span title="codemap.gen.generator.CodeMapGenerator(config)">config</span></span>
</code></pre></div>
<div class="doc doc-contents">
</div>
</div>
<div class="doc doc-object doc-function">
<h4 class="doc doc-heading" id="codemap.gen.generator.CodeMapGenerator.generate_documentation">
<span class="doc doc-object-name doc-function-name">generate_documentation</span>
</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_documentation</span><span class="p">(</span>
	<span class="n">entities</span><span class="p">:</span> <span class="n"><span title="list">list</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" href="../../processor/lod/#codemap.processor.lod.LODEntity" title='&lt;span class="doc doc-object-name doc-class-name"&gt;LODEntity&lt;/span&gt;


  &lt;span class="doc doc-labels"&gt;
      &lt;small class="doc doc-label doc-label-dataclass"&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODEntity&lt;/code&gt;)'>LODEntity</a></span><span class="p">],</span> <span class="n">metadata</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span>
</code></pre></div>
<div class="doc doc-contents">
<p>Generate markdown documentation from the processed LOD entities.</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>entities</code>
</td>
<td>
<code><span title="list">list</span>[<a class="autorefs autorefs-internal" href="../../processor/lod/#codemap.processor.lod.LODEntity" title='&lt;span class="doc doc-object-name doc-class-name"&gt;LODEntity&lt;/span&gt;


  &lt;span class="doc doc-labels"&gt;
      &lt;small class="doc doc-label doc-label-dataclass"&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;codemap.processor.lod.LODEntity&lt;/code&gt;)'>LODEntity</a>]</code>
</td>
<td>
<div class="doc-md-description">
<p>List of LOD entities</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>metadata</code>
</td>
<td>
<code><span title="dict">dict</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Repository metadata</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>Generated documentation as string</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>src/codemap/gen/generator.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_documentation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entities</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">LODEntity</span><span class="p">],</span> <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">	</span><span class="sd">"""</span>
<span class="sd">	Generate markdown documentation from the processed LOD entities.</span>

<span class="sd">	Args:</span>
<span class="sd">	    entities: List of LOD entities</span>
<span class="sd">	    metadata: Repository metadata</span>

<span class="sd">	Returns:</span>
<span class="sd">	    Generated documentation as string</span>

<span class="sd">	"""</span>
	<span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>

	<span class="c1"># Add header with repository information</span>
	<span class="n">target_path_str</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"target_path"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
	<span class="n">original_path</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"original_path"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
	<span class="n">command_arg</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"command_arg"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>

	<span class="c1"># Debug logging to see what values we're receiving</span>
	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
		<span class="sa">f</span><span class="s2">"Metadata values for heading: "</span>
		<span class="sa">f</span><span class="s2">"command_arg='</span><span class="si">{</span><span class="n">command_arg</span><span class="si">}</span><span class="s2">', "</span>
		<span class="sa">f</span><span class="s2">"original_path='</span><span class="si">{</span><span class="n">original_path</span><span class="si">}</span><span class="s2">', "</span>
		<span class="sa">f</span><span class="s2">"target_path='</span><span class="si">{</span><span class="n">target_path_str</span><span class="si">}</span><span class="s2">'"</span>
	<span class="p">)</span>

	<span class="c1"># Use the exact command argument if available</span>
	<span class="k">if</span> <span class="n">command_arg</span><span class="p">:</span>
		<span class="n">repo_name</span> <span class="o">=</span> <span class="n">command_arg</span>
	<span class="c1"># Fall back to original path if available</span>
	<span class="k">elif</span> <span class="n">original_path</span><span class="p">:</span>
		<span class="n">repo_name</span> <span class="o">=</span> <span class="n">original_path</span>
	<span class="c1"># Further fallback to just the directory name</span>
	<span class="k">elif</span> <span class="n">target_path_str</span><span class="p">:</span>
		<span class="n">repo_name</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">target_path_str</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">repo_name</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"Repository"</span><span class="p">)</span>

	<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"# `</span><span class="si">{</span><span class="n">repo_name</span><span class="si">}</span><span class="s2">` Documentation"</span><span class="p">)</span>
	<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">Generated on: </span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">UTC</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

	<span class="k">if</span> <span class="s2">"description"</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">:</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span> <span class="o">+</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"description"</span><span class="p">,</span> <span class="s2">""</span><span class="p">))</span>

	<span class="c1"># Add repository statistics</span>
	<span class="k">if</span> <span class="s2">"stats"</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">:</span>
		<span class="n">stats</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s2">"stats"</span><span class="p">]</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">## Document Statistics"</span><span class="p">)</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- Total files scanned: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'total_files_scanned'</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- Total lines of code: </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'total_lines'</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"- Languages: </span><span class="si">{</span><span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'languages'</span><span class="p">,</span><span class="w"> </span><span class="p">[]))</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

	<span class="c1"># Add directory structure if requested</span>
	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">include_tree</span> <span class="ow">and</span> <span class="s2">"tree"</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">:</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">## Directory Structure"</span><span class="p">)</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"```"</span><span class="p">)</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">metadata</span><span class="p">[</span><span class="s2">"tree"</span><span class="p">])</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"```"</span><span class="p">)</span>

	<span class="c1"># Add Mermaid diagram if entities exist and config enables it</span>
	<span class="k">if</span> <span class="n">entities</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">include_entity_graph</span><span class="p">:</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">## Entity Relationships"</span><span class="p">)</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"```mermaid"</span><span class="p">)</span>
		<span class="n">mermaid_diagram</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_mermaid_diagram</span><span class="p">(</span><span class="n">entities</span><span class="p">)</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mermaid_diagram</span><span class="p">)</span>
		<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"```"</span><span class="p">)</span>

	<span class="c1"># Add table of contents for the scanned files</span>
	<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">## Scanned Files"</span><span class="p">)</span>

	<span class="c1"># Group entities by file</span>
	<span class="n">files</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">LODEntity</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

	<span class="c1"># Get the target path from metadata</span>
	<span class="n">target_path_str</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"target_path"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
	<span class="n">target_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">target_path_str</span><span class="p">)</span> <span class="k">if</span> <span class="n">target_path_str</span> <span class="k">else</span> <span class="kc">None</span>

	<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
		<span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"file_path"</span><span class="p">,</span> <span class="s2">""</span><span class="p">))</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
			<span class="k">continue</span>

		<span class="k">if</span> <span class="n">file_path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
			<span class="n">files</span><span class="p">[</span><span class="n">file_path</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">files</span><span class="p">[</span><span class="n">file_path</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

	<span class="c1"># Create TOC entries with properly formatted relative paths</span>
	<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">file_path</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="mi">1</span><span class="p">):</span>
		<span class="c1"># Get path relative to the target directory</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">target_path</span> <span class="ow">and</span> <span class="n">target_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
				<span class="c1"># Get the relative path from the target directory</span>
				<span class="n">rel_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">target_path</span><span class="p">)</span>

				<span class="c1"># Format the path with a leading slash for files directly in the target directory</span>
				<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">rel_path</span><span class="si">}</span><span class="s2">"</span>

				<span class="c1"># Create a clean anchor ID by converting to lowercase and removing all special characters</span>
				<span class="c1"># including underscores, to create standard anchor IDs</span>
				<span class="n">filename</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span>
				<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">)</span>

				<span class="c1"># Handle paths with subdirectories</span>
				<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rel_path</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
					<span class="c1"># Get directory name and filename</span>
					<span class="n">directory</span> <span class="o">=</span> <span class="n">rel_path</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># Last directory before the file</span>
					<span class="n">anchor</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">directory</span><span class="si">}{</span><span class="n">clean_filename</span><span class="si">}</span><span class="s2">"</span>  <span class="c1"># e.g., "raginitpy"</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="c1"># Just use the clean filename for files at root</span>
					<span class="n">anchor</span> <span class="o">=</span> <span class="n">clean_filename</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># Fall back to just the filename if target path is not available</span>
				<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span>
				<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
				<span class="n">anchor</span> <span class="o">=</span> <span class="n">clean_filename</span>

			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. [</span><span class="si">{</span><span class="n">rel_path_str</span><span class="si">}</span><span class="s2">](#</span><span class="si">{</span><span class="n">anchor</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
			<span class="c1"># If relative_to fails, just use the filename</span>
			<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span>
			<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. [</span><span class="si">{</span><span class="n">rel_path_str</span><span class="si">}</span><span class="s2">](#</span><span class="si">{</span><span class="n">clean_filename</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>

	<span class="c1"># Add code documentation grouped by file</span>
	<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">## Code Documentation"</span><span class="p">)</span>

	<span class="c1"># Helper function to get comment syntax for a language</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">get_comment_syntax</span><span class="p">(</span><span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">"""Get the appropriate comment syntax for a programming language.</span>

<span class="sd">		Args:</span>
<span class="sd">			language: The programming language name</span>

<span class="sd">		Returns:</span>
<span class="sd">			The comment prefix for that language</span>
<span class="sd">		"""</span>
		<span class="n">language_lower</span> <span class="o">=</span> <span class="n">language</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">language</span> <span class="k">else</span> <span class="s2">""</span>

		<span class="c1"># Languages using // for comments</span>
		<span class="k">if</span> <span class="n">language_lower</span> <span class="ow">in</span> <span class="p">(</span>
			<span class="s2">"javascript"</span><span class="p">,</span>
			<span class="s2">"java"</span><span class="p">,</span>
			<span class="s2">"c"</span><span class="p">,</span>
			<span class="s2">"cpp"</span><span class="p">,</span>
			<span class="s2">"c++"</span><span class="p">,</span>
			<span class="s2">"csharp"</span><span class="p">,</span>
			<span class="s2">"c#"</span><span class="p">,</span>
			<span class="s2">"go"</span><span class="p">,</span>
			<span class="s2">"rust"</span><span class="p">,</span>
			<span class="s2">"php"</span><span class="p">,</span>
			<span class="s2">"kotlin"</span><span class="p">,</span>
			<span class="s2">"swift"</span><span class="p">,</span>
			<span class="s2">"typescript"</span><span class="p">,</span>
		<span class="p">):</span>
			<span class="k">return</span> <span class="s2">"//"</span>
		<span class="c1"># Languages using -- for comments</span>
		<span class="k">if</span> <span class="n">language_lower</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"sql"</span><span class="p">,</span> <span class="s2">"haskell"</span><span class="p">,</span> <span class="s2">"lua"</span><span class="p">):</span>
			<span class="k">return</span> <span class="s2">"--"</span>
		<span class="c1"># Languages using % for comments</span>
		<span class="k">if</span> <span class="n">language_lower</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"matlab"</span><span class="p">,</span> <span class="s2">"octave"</span><span class="p">):</span>
			<span class="k">return</span> <span class="s2">"%"</span>
		<span class="c1"># Languages using ; for comments</span>
		<span class="k">if</span> <span class="n">language_lower</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"assembly"</span><span class="p">,</span> <span class="s2">"asm"</span><span class="p">):</span>
			<span class="k">return</span> <span class="s2">";"</span>
		<span class="c1"># Default to # for Python, Ruby, Shell, Perl, etc.</span>
		<span class="k">return</span> <span class="s2">"#"</span>

	<span class="c1"># Helper function to reconstruct code with LOD filtering</span>
	<span class="k">def</span><span class="w"> </span><span class="nf">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">entity</span><span class="p">:</span> <span class="n">LODEntity</span><span class="p">,</span> <span class="n">current_indent</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">"""Reconstructs code content based on LOD level.</span>

<span class="sd">		Args:</span>
<span class="sd">			entity: The entity to process</span>
<span class="sd">			current_indent: Current indentation level</span>

<span class="sd">		Returns:</span>
<span class="sd">			List of code lines with appropriate LOD filtering</span>
<span class="sd">		"""</span>
		<span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>

		<span class="c1"># Skip certain entity types based on LOD level</span>
		<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">[]</span>  <span class="c1"># Skip imports except at FULL level</span>

		<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">COMMENT</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">[]</span>  <span class="c1"># Skip comments except at FULL level</span>

		<span class="c1"># Handle different entity types</span>
		<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">:</span>
			<span class="c1"># For modules, process children without adding module declaration</span>
			<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">):</span>
				<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
					<span class="n">child_lines</span> <span class="o">=</span> <span class="n">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">current_indent</span><span class="p">)</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_lines</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">child_lines</span><span class="p">:</span>  <span class="c1"># Add spacing between entities</span>
						<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="c1"># For UNKNOWN entities, check if they contain constants/variables as direct children</span>
					<span class="c1"># This handles cases where expression_statement wrappers contain assignment nodes</span>
					<span class="k">for</span> <span class="n">grandchild</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">):</span>
						<span class="k">if</span> <span class="n">grandchild</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span><span class="p">):</span>
							<span class="n">grandchild_lines</span> <span class="o">=</span> <span class="n">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">grandchild</span><span class="p">,</span> <span class="n">current_indent</span><span class="p">)</span>
							<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">grandchild_lines</span><span class="p">)</span>
							<span class="k">if</span> <span class="n">grandchild_lines</span><span class="p">:</span>  <span class="c1"># Add spacing between entities</span>
								<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>

		<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">METHOD</span><span class="p">):</span>
			<span class="c1"># Add signature/declaration</span>
			<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">signature</span><span class="p">:</span>
				<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">entity</span><span class="o">.</span><span class="n">signature</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
				<span class="c1"># Extract first line as signature</span>
				<span class="n">first_line</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
				<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">first_line</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># Fallback</span>
				<span class="n">entity_keyword</span> <span class="o">=</span> <span class="s2">"class"</span> <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span> <span class="k">else</span> <span class="s2">"def"</span>
				<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">entity_keyword</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:"</span><span class="p">)</span>

			<span class="c1"># Add docstring if available and level permits (but not at SKELETON/FULL level)</span>
			<span class="k">if</span> <span class="p">(</span>
				<span class="n">entity</span><span class="o">.</span><span class="n">docstring</span>
				<span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">DOCS</span><span class="o">.</span><span class="n">value</span>
				<span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">SKELETON</span><span class="o">.</span><span class="n">value</span>
			<span class="p">):</span>
				<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}</span><span class="s1">    """'</span><span class="p">)</span>
				<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}</span><span class="s2">    </span><span class="si">{</span><span class="n">doc_line</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">doc_line</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">docstring</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">))</span>
				<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}</span><span class="s1">    """'</span><span class="p">)</span>

			<span class="c1"># Determine indentation for children</span>
			<span class="n">child_indent</span> <span class="o">=</span> <span class="n">current_indent</span> <span class="o">+</span> <span class="s2">"    "</span>

			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
				<span class="c1"># FULL level: include full implementation</span>
				<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">:</span>
					<span class="n">content_lines</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
					<span class="c1"># Skip the first line (signature) as we already added it</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">content_line</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">content_line</span> <span class="ow">in</span> <span class="n">content_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
			<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">SKELETON</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
				<span class="c1"># SKELETON level: show full content but filter out comments</span>
				<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">MODULE</span><span class="p">:</span>
					<span class="n">content_lines</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
					<span class="c1"># Skip the first line (signature) as we already added it</span>
					<span class="k">for</span> <span class="n">content_line</span> <span class="ow">in</span> <span class="n">content_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
						<span class="n">stripped</span> <span class="o">=</span> <span class="n">content_line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

						<span class="c1"># Skip lines that are entirely comments</span>
						<span class="k">if</span> <span class="n">stripped</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="n">stripped</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"#"</span><span class="p">,</span> <span class="s2">"//"</span><span class="p">,</span> <span class="s2">"/*"</span><span class="p">)):</span>
							<span class="k">continue</span>

						<span class="c1"># Handle inline comments by removing them</span>
						<span class="k">if</span> <span class="n">stripped</span><span class="p">:</span>
							<span class="n">cleaned_line</span> <span class="o">=</span> <span class="n">content_line</span>
							<span class="c1"># Remove inline comments (simple approach - look for comment markers)</span>
							<span class="k">for</span> <span class="n">comment_prefix</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"#"</span><span class="p">,</span> <span class="s2">"//"</span><span class="p">]:</span>
								<span class="k">if</span> <span class="n">comment_prefix</span> <span class="ow">in</span> <span class="n">content_line</span><span class="p">:</span>
									<span class="c1"># Find the comment position (avoiding strings)</span>
									<span class="n">comment_pos</span> <span class="o">=</span> <span class="n">content_line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">comment_prefix</span><span class="p">)</span>
									<span class="k">if</span> <span class="n">comment_pos</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
										<span class="c1"># Simple check: if not in quotes, it's likely a comment</span>
										<span class="n">before_comment</span> <span class="o">=</span> <span class="n">content_line</span><span class="p">[:</span><span class="n">comment_pos</span><span class="p">]</span>
										<span class="k">if</span> <span class="p">(</span>
											<span class="n">before_comment</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">'"'</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
											<span class="ow">and</span> <span class="n">before_comment</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">"'"</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
										<span class="p">):</span>
											<span class="n">cleaned_line</span> <span class="o">=</span> <span class="n">before_comment</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
											<span class="k">break</span>

							<span class="k">if</span> <span class="n">cleaned_line</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>  <span class="c1"># Only add if there's actual code content</span>
								<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">cleaned_line</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
						<span class="k">else</span><span class="p">:</span>  <span class="c1"># Keep empty lines for structure</span>
							<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">content_line</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># SIGNATURES/STRUCTURE/DOCS: process children as signatures only</span>
				<span class="n">has_children</span> <span class="o">=</span> <span class="kc">False</span>
				<span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">):</span>
					<span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">:</span>
						<span class="n">child_lines</span> <span class="o">=</span> <span class="n">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">child_indent</span><span class="p">)</span>
						<span class="k">if</span> <span class="n">child_lines</span><span class="p">:</span>
							<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">child_lines</span><span class="p">)</span>
							<span class="n">has_children</span> <span class="o">=</span> <span class="kc">True</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="c1"># For UNKNOWN entities, check if they contain constants/variables as direct children</span>
						<span class="k">for</span> <span class="n">grandchild</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">children</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">):</span>
							<span class="k">if</span> <span class="n">grandchild</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span><span class="p">):</span>
								<span class="n">grandchild_lines</span> <span class="o">=</span> <span class="n">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">grandchild</span><span class="p">,</span> <span class="n">child_indent</span><span class="p">)</span>
								<span class="k">if</span> <span class="n">grandchild_lines</span><span class="p">:</span>
									<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">grandchild_lines</span><span class="p">)</span>
									<span class="n">has_children</span> <span class="o">=</span> <span class="kc">True</span>

				<span class="c1"># If we have content but not showing full, add truncation comment</span>
				<span class="n">comment_prefix</span> <span class="o">=</span> <span class="n">get_comment_syntax</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">language</span> <span class="ow">or</span> <span class="s2">""</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">has_children</span><span class="p">:</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">child_indent</span><span class="si">}{</span><span class="n">comment_prefix</span><span class="si">}</span><span class="s2"> truncated for brevity"</span><span class="p">)</span>
				<span class="k">elif</span> <span class="ow">not</span> <span class="n">has_children</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">!=</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CLASS</span><span class="p">:</span>
					<span class="c1"># For functions/methods without children, add truncation comment</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">child_indent</span><span class="si">}{</span><span class="n">comment_prefix</span><span class="si">}</span><span class="s2"> hidden for brevity"</span><span class="p">)</span>

		<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">EntityType</span><span class="o">.</span><span class="n">VARIABLE</span><span class="p">,</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">CONSTANT</span><span class="p">):</span>
			<span class="c1"># At FULL level, show everything; at SKELETON+ levels, show the declaration</span>
			<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">FULL</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
					<span class="c1"># Show complete content at FULL level</span>
					<span class="n">content_lines</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">content_line</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">content_line</span> <span class="ow">in</span> <span class="n">content_lines</span><span class="p">)</span>
				<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">lod_level</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">LODLevel</span><span class="o">.</span><span class="n">SKELETON</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
					<span class="c1"># Show just the first line (declaration) at SKELETON and higher levels</span>
					<span class="n">first_line</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
					<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">first_line</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
			<span class="c1"># If no content is available, skip the entity entirely</span>

		<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">IMPORT</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
				<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}</span><span class="s2">import </span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

		<span class="k">elif</span> <span class="n">entity</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">EntityType</span><span class="o">.</span><span class="n">COMMENT</span> <span class="ow">and</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
			<span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">current_indent</span><span class="si">}{</span><span class="n">comment_line</span><span class="si">}</span><span class="s2">"</span> <span class="k">for</span> <span class="n">comment_line</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">))</span>

		<span class="k">return</span> <span class="n">lines</span>

	<span class="n">first_file</span> <span class="o">=</span> <span class="kc">True</span>
	<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">file_entities</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="o">.</span><span class="n">items</span><span class="p">()),</span> <span class="mi">1</span><span class="p">):</span>
		<span class="c1"># Add a divider before each file section except the first one</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="n">first_file</span><span class="p">:</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">---"</span><span class="p">)</span>  <span class="c1"># Horizontal rule</span>
		<span class="n">first_file</span> <span class="o">=</span> <span class="kc">False</span>

		<span class="c1"># Get path relative to the target directory</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">target_path</span> <span class="ow">and</span> <span class="n">target_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
				<span class="c1"># Get the relative path from the target directory</span>
				<span class="n">rel_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">target_path</span><span class="p">)</span>

				<span class="c1"># Format the path with a leading slash for files directly in the target directory</span>
				<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">rel_path</span><span class="si">}</span><span class="s2">"</span>

				<span class="c1"># Create a clean anchor ID by converting to lowercase and removing all special characters</span>
				<span class="c1"># including underscores, to create standard anchor IDs</span>
				<span class="n">filename</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span>
				<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">)</span>

				<span class="c1"># Handle paths with subdirectories</span>
				<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rel_path</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
					<span class="c1"># Get directory name and filename</span>
					<span class="n">directory</span> <span class="o">=</span> <span class="n">rel_path</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># Last directory before the file</span>
					<span class="n">anchor</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">directory</span><span class="si">}{</span><span class="n">clean_filename</span><span class="si">}</span><span class="s2">"</span>  <span class="c1"># e.g., "raginitpy"</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="c1"># Just use the clean filename for files at root</span>
					<span class="n">anchor</span> <span class="o">=</span> <span class="n">clean_filename</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c1"># Fall back to just the filename if target path is not available</span>
				<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span>
				<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
				<span class="n">anchor</span> <span class="o">=</span> <span class="n">clean_filename</span>

			<span class="c1"># Add a custom ID to the heading to match our anchor</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">### </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">rel_path_str</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
			<span class="c1"># If relative_to fails, just use the filename</span>
			<span class="n">rel_path_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/</span><span class="si">{</span><span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span>
			<span class="n">clean_filename</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s2">""</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">### </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">rel_path_str</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

		<span class="c1"># Sort top-level entities by line number</span>
		<span class="n">sorted_entities</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">file_entities</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">start_line</span><span class="p">)</span>

		<span class="c1"># Generate code content using LOD-based reconstruction</span>
		<span class="n">code_lines</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">sorted_entities</span><span class="p">:</span>
			<span class="c1"># Process all entities and collect code lines</span>
			<span class="n">entity_lines</span> <span class="o">=</span> <span class="n">reconstruct_code_with_lod</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
			<span class="n">code_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">entity_lines</span><span class="p">)</span>

		<span class="c1"># Remove trailing empty lines</span>
		<span class="k">while</span> <span class="n">code_lines</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">code_lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
			<span class="n">code_lines</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

		<span class="c1"># Add the code block with proper language detection</span>
		<span class="k">if</span> <span class="n">code_lines</span><span class="p">:</span>
			<span class="c1"># Get language from the first entity with language info</span>
			<span class="n">lang</span> <span class="o">=</span> <span class="s2">""</span>
			<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">sorted_entities</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">language</span><span class="p">:</span>
					<span class="n">lang</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">language</span>
					<span class="k">break</span>

			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="se">\n</span><span class="s2">```</span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">code_lines</span><span class="p">)</span>
			<span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"```"</span><span class="p">)</span>

	<span class="k">return</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2025 Sarthak Mishra
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/SarthakMishra" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="https://pypi.org/project/codemap/" rel="noopener" target="_blank" title="pypi.org">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"></path></svg>
</a>
<a class="md-social__link" href="https://www.linkedin.com/in/itssarthakmishra/" rel="noopener" target="_blank" title="www.linkedin.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"></path></svg>
</a>
<a class="md-social__link" href="https://x.com/MishraMishry" rel="noopener" target="_blank" title="x.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "content.tabs.link", "navigation.indexes", "navigation.sections", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
<script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
</body>
</html>